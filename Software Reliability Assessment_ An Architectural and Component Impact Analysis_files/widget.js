
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4ed1abaa-e840-5b30-80c4-3cc87ca59c8b")}catch(e){}}();
(()=>{var t={155:(t,e,n)=>{"use strict";n.d(e,{O:()=>Aa});const r=()=>void 0!==window.crypto.randomUUID?window.crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(t=>{const e=parseInt(t,10);return((15&(e^crypto.getRandomValues(new Uint8Array(1))[0]))>>e/4).toString(16)}));var i="Metadata key was used more than once in a parameter:",o="NULL argument",s="Key Not Found",a="Ambiguous match found for serviceIdentifier:",c="No matching bindings found for serviceIdentifier:",l="Missing required @injectable annotation in:",d="Missing required @inject or @multiInject annotation in:",u="Circular dependency found:",p="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",h=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},f=function(t,e){return"@postConstruct error in class "+t+": "+e},g=function(t,e){return"@preDestroy error in class "+t+": "+e},v=function(t,e){return"onDeactivation() error in class "+t+": "+e},y="Maximum call stack size exceeded",m="named",b="name",_="unmanaged",w="optional",S="inject",A="multi_inject",E="inversify:tagged",R="inversify:tagged_props",O="inversify:paramtypes",T="post_construct",I="pre_destroy";var C=[S,A,b,_,m,w];var x=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===m?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},t}();function N(t,e,n,r){!function(t){if(void 0!==t)throw new Error(p)}(e),j(E,t,n.toString(),r)}function P(t){var e=[];if(Array.isArray(t)){var n=function(t){for(var e=new Set,n=0,r=t;n<r.length;n++){var i=r[n];if(e.has(i))return i;e.add(i)}}((e=t).map((function(t){return t.key})));if(void 0!==n)throw new Error(i+" "+n.toString())}else e=[t];return e}function j(t,e,n,r){var o=P(r),s={};Reflect.hasOwnMetadata(t,e)&&(s=Reflect.getMetadata(t,e));var a=s[n];if(void 0===a)a=[];else for(var c=function(t){if(o.some((function(e){return e.key===t.key})))throw new Error(i+" "+t.key.toString())},l=0,d=a;l<d.length;l++){c(d[l])}a.push.apply(a,o),s[n]=a,Reflect.defineMetadata(t,s,e)}function k(t){return function(e,n,r){"number"==typeof r?N(e,n,r,t):function(t,e,n){if(void 0!==t.prototype)throw new Error(p);j(R,t.constructor,e,n)}(e,n,t)}}function D(t){return function(e){return function(n,r,i){if(void 0===e){var o="function"==typeof n?n.name:n.constructor.name;throw new Error("@inject called with undefined this could mean that the class "+o+" has a circular dependency problem. You can use a LazyServiceIdentifier to  overcome this limitation.")}return k(new x(t,e))(n,r,i)}}}var Z=D(S);var L=D(A);const M=()=>function(t){if(Reflect.hasOwnMetadata(O,t))throw new Error("Cannot apply @injectable decorator multiple times.");var e=Reflect.getMetadata("design:paramtypes",t)||[];return Reflect.defineMetadata(O,e,t),t},F=t=>Z(t),U=()=>k(new x(w,!0)),B=t=>L(t);var V;let H=M()(V=Reflect.metadata("design:type",Function)(V=Reflect.metadata("design:paramtypes",["undefined"==typeof ApplicationConfig?Object:ApplicationConfig,"undefined"==typeof Window?Object:Window])(V=Reflect.metadata("design:type",Function)(V=Reflect.metadata("design:paramtypes",["undefined"==typeof ApplicationConfig?Object:ApplicationConfig,"undefined"==typeof Window?Object:Window])(V=class ApplicationContext{constructor(t,e){this.sessionId=void 0,this.adSet=null,this.metadata=null,this.canRenderApplication=!0,this.window=void 0,this.applicationConfig=void 0,this.sessionId=r(),this.applicationConfig=t,this.window=e}getApplicationConfig(){return this.applicationConfig}getStartTime(){return this.applicationConfig.startTime}getSessionId(){return this.sessionId}setSessionId(t){this.sessionId=t}getApplicationId(){return this.applicationConfig.id}isDebug(){return this.applicationConfig.debug}getVersion(){return this.applicationConfig.version}getWindow(){return this.window}getAdSet(){return this.adSet}setAdSet(t){this.adSet=t}getMetadata(){return this.metadata}setMetadata(t){this.metadata=t}setCanRender(t){this.canRenderApplication=t}canRender(){return this.canRenderApplication}})||V)||V)||V)||V)||V,$=function(t){return t[t.LHK=0]="LHK",t[t.DMD=1]="DMD",t}({}),z=function(t){return t[t.GENERAL=0]="GENERAL",t[t.SWOOP=1]="SWOOP",t}({}),q=function(t){return t[t.TARGL=0]="TARGL",t[t.AUTODETECT=100]="AUTODETECT",t}({}),W=function(t){return t[t.GENERAL=0]="GENERAL",t}({}),G=function(t){return t[t.LINK=0]="LINK",t[t.IMAGE=1]="IMAGE",t[t.VIDEO=2]="VIDEO",t}({}),K=function(t){return t[t.AUTO=1]="AUTO",t[t.LEADERBOARD=2]="LEADERBOARD",t[t.LARGE_LEADERBOARD=3]="LARGE_LEADERBOARD",t[t.XL_LEADERBOARD=4]="XL_LEADERBOARD",t[t.TV_SPOT_LEADERBOARD=5]="TV_SPOT_LEADERBOARD",t[t.BILLBOARD=6]="BILLBOARD",t[t.WIDE_SKYSCRAPER=7]="WIDE_SKYSCRAPER",t[t.SKYSCRAPER=8]="SKYSCRAPER",t[t.HALF_PAGE_SKYSCRAPER=9]="HALF_PAGE_SKYSCRAPER",t[t.MEDIUM_RECTANGLE=10]="MEDIUM_RECTANGLE",t[t.SQUARE_RECTANGLE=11]="SQUARE_RECTANGLE",t[t.HALF_PAGE_RECTANGLE=12]="HALF_PAGE_RECTANGLE",t[t.XL_RECTANGLE=13]="XL_RECTANGLE",t[t.MEDIUM_SPLASH=14]="MEDIUM_SPLASH",t[t.SMALL_SPLASH=15]="SMALL_SPLASH",t[t.SMARTPHONE_BANNER=16]="SMARTPHONE_BANNER",t[t.SUPER_LEADERBOARD=17]="SUPER_LEADERBOARD",t[t.PORTRAIT=18]="PORTRAIT",t[t.MOBILEPHONEINTERSTITIAL1=19]="MOBILEPHONEINTERSTITIAL1",t[t.MOBILEPHONEINTERSTITIAL2=20]="MOBILEPHONEINTERSTITIAL2",t[t.MOBILEPHONEINTERSTITIAL3=21]="MOBILEPHONEINTERSTITIAL3",t[t.FEATURE_PHONE_SMALL_BANNER=22]="FEATURE_PHONE_SMALL_BANNER",t[t.FEATURE_PHONE_MEDIUM_BANNER=23]="FEATURE_PHONE_MEDIUM_BANNER",t[t.FEATURE_PHONE_LARGE_BANNER=24]="FEATURE_PHONE_LARGE_BANNER",t}({}),Y=function(t){return t[t.LINK=0]="LINK",t[t.HIDDEN=1]="HIDDEN",t[t.TEXT=2]="TEXT",t}({}),X=function(t){return t[t.INTERNAL=0]="INTERNAL",t[t.EXTERNAL=1]="EXTERNAL",t}({}),Q=function(t){return t[t.NONE=0]="NONE",t[t.DEFAULT=1]="DEFAULT",t[t.CALLBACK_ONLY=2]="CALLBACK_ONLY",t[t.PASSTHROUGH=3]="PASSTHROUGH",t}({}),J=function(t){return t[t.NONE=0]="NONE",t[t.BEFORE_END=1]="BEFORE_END",t[t.AFTER_BEGIN=2]="AFTER_BEGIN",t[t.REPLACE=3]="REPLACE",t}({}),tt=function(t){return t[t.AUTO=1]="AUTO",t[t.LEADERBOARD=2]="LEADERBOARD",t[t.LARGE_LEADERBOARD=3]="LARGE_LEADERBOARD",t[t.XL_LEADERBOARD=4]="XL_LEADERBOARD",t[t.TV_SPOT_LEADERBOARD=5]="TV_SPOT_LEADERBOARD",t[t.BILLBOARD=6]="BILLBOARD",t[t.WIDE_SKYSCRAPER=7]="WIDE_SKYSCRAPER",t[t.SKYSCRAPER=8]="SKYSCRAPER",t[t.HALF_PAGE_SKYSCRAPER=9]="HALF_PAGE_SKYSCRAPER",t[t.MEDIUM_RECTANGLE=10]="MEDIUM_RECTANGLE",t[t.SQUARE_RECTANGLE=11]="SQUARE_RECTANGLE",t[t.HALF_PAGE_RECTANGLE=12]="HALF_PAGE_RECTANGLE",t[t.XL_RECTANGLE=13]="XL_RECTANGLE",t[t.MEDIUM_SPLASH=14]="MEDIUM_SPLASH",t[t.SMALL_SPLASH=15]="SMALL_SPLASH",t[t.SMARTPHONE_BANNER=16]="SMARTPHONE_BANNER",t[t.SUPER_LEADERBOARD=17]="SUPER_LEADERBOARD",t[t.PORTRAIT=18]="PORTRAIT",t[t.MOBILEPHONEINTERSTITIAL1=19]="MOBILEPHONEINTERSTITIAL1",t[t.MOBILEPHONEINTERSTITIAL2=20]="MOBILEPHONEINTERSTITIAL2",t[t.MOBILEPHONEINTERSTITIAL3=21]="MOBILEPHONEINTERSTITIAL3",t[t.FEATURE_PHONE_SMALL_BANNER=22]="FEATURE_PHONE_SMALL_BANNER",t[t.FEATURE_PHONE_MEDIUM_BANNER=23]="FEATURE_PHONE_MEDIUM_BANNER",t[t.FEATURE_PHONE_LARGE_BANNER=24]="FEATURE_PHONE_LARGE_BANNER",t}({}),et=function(t){return t[t.GEO=0]="GEO",t[t.NPI=1]="NPI",t[t.IP=2]="IP",t[t.SOURCE_DEVICE_TYPE=3]="SOURCE_DEVICE_TYPE",t}({}),nt=function(t){return t[t.AD_SLOT_ITEM_CLICK=0]="AD_SLOT_ITEM_CLICK",t[t.AD_SLOT_ITEM_LOAD=1]="AD_SLOT_ITEM_LOAD",t[t.AD_SLOT_ITEM_IMPRESSION=2]="AD_SLOT_ITEM_IMPRESSION",t[t.AD_SLOT_VIEW=3]="AD_SLOT_VIEW",t[t.AD_SLOT_NO_ITEMS=4]="AD_SLOT_NO_ITEMS",t[t.AD_SET_LOAD=5]="AD_SET_LOAD",t[t.AD_SLOT_LOAD=6]="AD_SLOT_LOAD",t}({});class DoctorSpecialty{constructor(){this.encryptedId=void 0,this.source=void 0,this.destination=W.GENERAL}getEncryptedId(){var t;return null!=(t=this.encryptedId)?t:null}setEncryptedId(t){return this.encryptedId=t,this}getSource(){var t;return null!=(t=this.source)?t:null}setSource(t){return this.source=t,this}getDestination(){return this.destination}setDestination(t){return this.destination=t,this}}var rt;let it=M()(rt=class UserContext{constructor(){this.doctorSpecialties=[],this.npis=[]}getNpis(){return[...this.npis]}addNpi(t){return this.npis.push(t),this}hasNpi(){return this.npis.length>0}getDoctorSpecialties(){return this.doctorSpecialties}addDoctorSpecialty(t){return this.doctorSpecialties.push(t),this}hasDoctorSpecialty(){return this.doctorSpecialties.length>0}})||rt;class event_Event{constructor(){this.propagationStopped=!1}static getEmptyInstance(){return event_Event.emptyEventArgsInstance||(event_Event.emptyEventArgsInstance=new event_Event),event_Event.emptyEventArgsInstance}isPropagationStopped(){return this.propagationStopped}stopPropagation(){this.propagationStopped=!0}}event_Event.emptyEventArgsInstance=void 0;class DoctorSpecialtyPreDetectEvent extends event_Event{constructor(t,e){super(),this.adSet=t,this.source=e}getAdSet(){return this.adSet}getSource(){return this.source}}class DoctorSpecialtyPostDetectEvent extends DoctorSpecialtyPreDetectEvent{constructor(t,e,n){super(e,n),this.doctorSpecialty=t,this.adSet=e,this.source=n}getDoctorSpecialty(){return this.doctorSpecialty}}let ot=function(t){return t.APPLICATION_PRE_RUN="applicationPreRun",t.APPLICATION_POST_RUN="applicationPostRun",t.APPLICATION_PRE_INIT="applicationPreInit",t.APPLICATION_POST_INIT="applicationPostInit",t.AD_SET_PRE_RESOLVE="adSetPreResolve",t.AD_SET_POST_RESOLVE="adSetPostResolve",t.AD_SET_PRE_RENDER="adSetPreRender",t.AD_SET_POST_RENDER="adSetPostRender",t.AD_SLOT_PRE_RENDER="adSlotPreRender",t.AD_SLOT_POST_RENDER="adSlotPostRender",t.AD_SLOT_CONTAINER_NO_ITEMS="adSlotContainerNoItems",t.AD_SLOT_CONTAINER_NOT_FOUND="adSlotContainerNotFound",t.AD_SLOT_CONTAINER_PRE_RENDER="adSlotContainerPreRender",t.AD_SLOT_CONTAINER_POST_RENDER="adSlotElementPostRender",t.NPI_PRE_DETECT="npiPreDetect",t.NPI_POST_DETECT="npiPostDetect",t.DOCTOR_SPECIALTY_PRE_DETECT="doctorSpecialtyPreDetect",t.DOCTOR_SPECIALTY_POST_DETECT="doctorSpecialtyPostDetect",t.INTEGRATION_PRE_RUN="integrationPreRun",t.INTEGRATION_POST_RUN="integrationPostRun",t.BACKEND_EVENT="backendEvent",t.TELEMETRY_EVENT="telemetryEvent",t.AD_SLOT_CONTAINER_ITEM_VIEW="adSlotContainerItemView",t.AD_SLOT_CONTAINER_VIEW="adSlotContainerView",t}({});var st;let at=M()(st=class Logger{constructor(){this.enabled=!0}debug(...t){this.log(t,"debug")}info(...t){this.log(t,"info")}warn(...t){this.log(t,"warn")}error(...t){this.log(t,"error")}log(t,e){this.enabled&&console[e](`[${e}]`,...t)}setEnabled(t){this.enabled=t}})||st;var ct;let lt=M()(ct=Reflect.metadata("design:type",Function)(ct=Reflect.metadata("design:paramtypes",[void 0===at?Object:at])(ct=Reflect.metadata("design:type",Function)(ct=Reflect.metadata("design:paramtypes",[void 0===at?Object:at])(ct=class EventManager{constructor(t){this.listeners=void 0,this.logger=t,this.listeners=new Map}addListener(t,e){var n;const r=this.resolveHandler(t,e);if(!r)return;const i=null!=(n=this.listeners.get(t))?n:[];i.push(r),this.listeners.set(t,i)}removeListener(t,e){var n;if(!this.listeners.has(t))return;const r=this.resolveHandler(t,e);if(!r)return;const i=null!=(n=this.listeners.get(t))?n:[];for(let o=0;o<i.length;o++){const t=i[o];"__ee__"in t&&"__ee__"in r&&t.__ee__===r.__ee__&&i.splice(o,1)}this.listeners.set(t,i),0===i.length&&this.listeners.delete(t)}addSubscriber(t){for(const[e,n]of Object.entries(t.getSubscribedEvents()))this.addListener(e,[t,n])}removeSubscriber(t){for(const[e,n]of Object.entries(t.getSubscribedEvents()))this.removeListener(e,[t,n])}async dispatch(t,e){var n,r;e||(e=event_Event.getEmptyInstance()),this.logger.debug(`Dispatching event ${t} for event payload ${null==(n=e)?void 0:n.constructor.name}`,{event:e});for(const o of null!=(i=this.listeners.get(t))?i:[]){var i;if("isPropagationStopped"in e&&e.isPropagationStopped())break;await o(e,t)}return this.logger.debug(`Dispatched event ${t} for event payload ${null==(r=e)?void 0:r.constructor.name}`,{event:e}),e}hasListeners(){return this.listeners.size>0}getListeners(t){var e;return null!=(e=this.listeners.get(t))?e:[]}resolveHandler(t,e){let n,r,i=null;return"function"==typeof e?(n={},r=e):"object"==typeof e&&t in e&&"function"==typeof e[t]?(n=e,r=e[t]):Array.isArray(e)&&"object"==typeof e[0]&&e[1]in e[0]&&"function"==typeof e[0][e[1]]&&(n=e[0],r=e[0][e[1]]),void 0===r||void 0===n||(i=async function(t,e){var i;return null==(i=r)?void 0:i.call(n,t,e)},Object.defineProperty(i,"__ee__",{value:r})),i}})||ct)||ct)||ct)||ct)||ct;var dt;let ut=M()(dt=function(t,e){return B("DoctorSpecialtySource")(t,void 0,0)}(dt=function(t,e){return U()(t,void 0,3)}(dt=Reflect.metadata("design:type",Function)(dt=Reflect.metadata("design:paramtypes",[Array,void 0===it?Object:it,void 0===lt?Object:lt,void 0===at?Object:at])(dt=Reflect.metadata("design:type",Function)(dt=Reflect.metadata("design:paramtypes",[Array,void 0===it?Object:it,void 0===lt?Object:lt,void 0===at?Object:at])(dt=class DoctorSpecialtyDetector{constructor(t,e,n,r){this.sources=t,this.userContext=e,this.eventManager=n,this.logger=r}supports(t){return t.getSettings().isDoctorSpecialtyDetectionEnabled()}async detect(t){if(!this.supports(t))throw new Error(`${this.constructor.name} does not support this adSet`);for(const e of this.sources){if(!e.supports(t))continue;const n=await this.eventManager.dispatch(ot.DOCTOR_SPECIALTY_PRE_DETECT,new DoctorSpecialtyPreDetectEvent(t,e));if(n.isPropagationStopped())continue;const r=await n.getSource().detect(t);for(const i of r){if(!i.encryptedId)continue;const n=(new DoctorSpecialty).setEncryptedId(i.encryptedId).setSource(e.getType()),r=await this.eventManager.dispatch(ot.DOCTOR_SPECIALTY_POST_DETECT,new DoctorSpecialtyPostDetectEvent(n,t,e));this.userContext.addDoctorSpecialty(r.getDoctorSpecialty())}}}})||dt)||dt)||dt)||dt)||dt)||dt)||dt;class Npi{constructor(){this.encryptedNumber=void 0,this.source=void 0,this.destination=z.GENERAL}getEncryptedNumber(){var t;return null!=(t=this.encryptedNumber)?t:null}setEncryptedNumber(t){return this.encryptedNumber=t,this}getSource(){var t;return null!=(t=this.source)?t:null}setSource(t){return this.source=t,this}getDestination(){return this.destination}setDestination(t){return this.destination=t,this}}class NpiPreDetectEvent extends event_Event{constructor(t,e){super(),this.adSet=t,this.source=e}getAdSet(){return this.adSet}getSource(){return this.source}}class NpiPostDetectEvent extends NpiPreDetectEvent{constructor(t,e,n){super(e,n),this.npi=t,this.adSet=e,this.source=n}getNpi(){return this.npi}}var pt;let ht=M()(pt=function(t,e){return B("NpiSource")(t,void 0,0)}(pt=function(t,e){return U()(t,void 0,3)}(pt=Reflect.metadata("design:type",Function)(pt=Reflect.metadata("design:paramtypes",[Array,void 0===it?Object:it,void 0===lt?Object:lt,void 0===at?Object:at])(pt=Reflect.metadata("design:type",Function)(pt=Reflect.metadata("design:paramtypes",[Array,void 0===it?Object:it,void 0===lt?Object:lt,void 0===at?Object:at])(pt=class NpiDetector{constructor(t,e,n,r){this.sources=t,this.userContext=e,this.eventManager=n,this.logger=r}supports(t){return t.getSettings().isNpiDetectionEnabled()}async detect(t){if(!this.supports(t))throw new Error(`${this.constructor.name} does not support this adSet`);for(const e of this.sources){if(!e.supports(t))continue;const n=await this.eventManager.dispatch(ot.NPI_PRE_DETECT,new NpiPreDetectEvent(t,e));if(n.isPropagationStopped())continue;const r=await n.getSource().detect(t);for(const i of r){if(!i.encryptedNumber)continue;const n=(new Npi).setEncryptedNumber(i.encryptedNumber).setSource(e.getType()).setDestination(i.destination),r=await this.eventManager.dispatch(ot.NPI_POST_DETECT,new NpiPostDetectEvent(n,t,e));this.userContext.addNpi(r.getNpi())}}}})||pt)||pt)||pt)||pt)||pt)||pt)||pt;class ApplicationLifecycleEvent extends event_Event{constructor(t){super(),this.application=t}getApplication(){return this.application}}class IntegrationStoppedExecutionException extends Error{constructor(t){super(),this.integration=t}getIntegration(){return this.integration}}class IntegrationLifecycleEvent extends event_Event{constructor(t,e){super(),this.adSet=t,this.integration=e}getAdSet(){return this.adSet}getIntegration(){return this.integration}}var ft;let gt=M()(ft=function(t,e){return B("Integration")(t,void 0,0)}(ft=function(t,e){return U()(t,void 0,2)}(ft=Reflect.metadata("design:type",Function)(ft=Reflect.metadata("design:paramtypes",[Array,void 0===lt?Object:lt,void 0===at?Object:at])(ft=Reflect.metadata("design:type",Function)(ft=Reflect.metadata("design:paramtypes",[Array,void 0===lt?Object:lt,void 0===at?Object:at])(ft=class IntegrationRunner{constructor(t,e,n){this.integrations=t,this.eventManager=e,this.logger=n}async run(t){for(const r of this.integrations){if(!r.supports(t))continue;const i=await this.eventManager.dispatch(ot.INTEGRATION_PRE_RUN,new IntegrationLifecycleEvent(t,r));if(!i.isPropagationStopped())try{await i.getIntegration().run(t),await this.eventManager.dispatch(ot.INTEGRATION_POST_RUN,new IntegrationLifecycleEvent(t,r))}catch(n){var e;throw null==(e=this.logger)||e.error(`Integration ${i.getIntegration().constructor.name} failed to run`,n),n}}}})||ft)||ft)||ft)||ft)||ft)||ft)||ft;function vt(){return vt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vt.apply(this,arguments)}var yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};const mt="object"===("undefined"==typeof window?"undefined":yt(window))&&"object"===("undefined"==typeof document?"undefined":yt(document))&&9===document.nodeType;function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function _t(t){var e=function(t,e){if("object"!=bt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=bt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bt(e)?e:e+""}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_t(r.key),r)}}function St(t,e,n){return e&&wt(t.prototype,e),n&&wt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function At(t,e){return At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},At(t,e)}function Et(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,At(t,e)}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Ot={}.constructor;function Tt(t){if(null==t||"object"!=typeof t)return t;if(Array.isArray(t))return t.map(Tt);if(t.constructor!==Ot)return t;var e={};for(var n in t)e[n]=Tt(t[n]);return e}function It(t,e,n){void 0===t&&(t="unnamed");var r=n.jss,i=Tt(e),o=r.plugins.onCreateRule(t,i,n);return o||(t[0],null)}var Ct=function(t,e){for(var n="",r=0;r<t.length&&"!important"!==t[r];r++)n&&(n+=e),n+=t[r];return n},xt=function(t){if(!Array.isArray(t))return t;var e="";if(Array.isArray(t[0]))for(var n=0;n<t.length&&"!important"!==t[n];n++)e&&(e+=", "),e+=Ct(t[n]," ");else e=Ct(t,", ");return"!important"===t[t.length-1]&&(e+=" !important"),e};function Nt(t){return t&&!1===t.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function Pt(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function jt(t,e,n){void 0===n&&(n={});var r="";if(!e)return r;var i=n.indent,o=void 0===i?0:i,s=e.fallbacks;!1===n.format&&(o=-1/0);var a=Nt(n),c=a.linebreak,l=a.space;if(t&&o++,s)if(Array.isArray(s))for(var d=0;d<s.length;d++){var u=s[d];for(var p in u){var h=u[p];null!=h&&(r&&(r+=c),r+=Pt(p+":"+l+xt(h)+";",o))}}else for(var f in s){var g=s[f];null!=g&&(r&&(r+=c),r+=Pt(f+":"+l+xt(g)+";",o))}for(var v in e){var y=e[v];null!=y&&"fallbacks"!==v&&(r&&(r+=c),r+=Pt(v+":"+l+xt(y)+";",o))}return(r||n.allowEmpty)&&t?(r&&(r=""+c+r+c),Pt(""+t+l+"{"+r,--o)+Pt("}",o)):r}var kt=/([[\].#*$><+~=|^:(),"'`\s])/g,Dt="undefined"!=typeof CSS&&CSS.escape,Zt=function(t){return Dt?Dt(t):t.replace(kt,"\\$1")},Lt=function(){function t(t,e,n){this.type="style",this.isProcessed=!1;var r=n.sheet,i=n.Renderer;this.key=t,this.options=n,this.style=e,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return t.prototype.prop=function(t,e,n){if(void 0===e)return this.style[t];var r=!!n&&n.force;if(!r&&this.style[t]===e)return this;var i=e;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(e,t,this));var o=null==i||!1===i,s=t in this.style;if(o&&!s&&!r)return this;var a=o&&s;if(a?delete this.style[t]:this.style[t]=i,this.renderable&&this.renderer)return a?this.renderer.removeProperty(this.renderable,t):this.renderer.setProperty(this.renderable,t,i),this;var c=this.options.sheet;return c&&c.attached,this},t}(),Mt=function(t){function e(e,n,r){var i;i=t.call(this,e,n,r)||this;var o=r.selector,s=r.scoped,a=r.sheet,c=r.generateId;return o?i.selectorText=o:!1!==s&&(i.id=c(Rt(Rt(i)),a),i.selectorText="."+Zt(i.id)),i}Et(e,t);var n=e.prototype;return n.applyTo=function(t){var e=this.renderer;if(e){var n=this.toJSON();for(var r in n)e.setProperty(t,r,n[r])}return this},n.toJSON=function(){var t={};for(var e in this.style){var n=this.style[e];"object"!=typeof n?t[e]=n:Array.isArray(n)&&(t[e]=xt(n))}return t},n.toString=function(t){var e=this.options.sheet,n=!!e&&e.options.link?vt({},t,{allowEmpty:!0}):t;return jt(this.selectorText,this.style,n)},St(e,[{key:"selector",set:function(t){if(t!==this.selectorText){this.selectorText=t;var e=this.renderer,n=this.renderable;if(n&&e)e.setSelector(n,t)||e.replaceRule(n,this)}},get:function(){return this.selectorText}}]),e}(Lt),Ft={onCreateRule:function(t,e,n){return"@"===t[0]||n.parent&&"keyframes"===n.parent.type?null:new Mt(t,e,n)}},Ut={indent:1,children:!0},Bt=/@([\w-]+)/,Vt=function(){function t(t,e,n){this.type="conditional",this.isProcessed=!1,this.key=t;var r=t.match(Bt);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new ue(vt({},n,{parent:this})),e)this.rules.add(i,e[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(t){return this.rules.get(t)},e.indexOf=function(t){return this.rules.indexOf(t)},e.addRule=function(t,e,n){var r=this.rules.add(t,e,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},e.replaceRule=function(t,e,n){var r=this.rules.replace(t,e,n);return r&&this.options.jss.plugins.onProcessRule(r),r},e.toString=function(t){void 0===t&&(t=Ut);var e=Nt(t).linebreak;if(null==t.indent&&(t.indent=Ut.indent),null==t.children&&(t.children=Ut.children),!1===t.children)return this.query+" {}";var n=this.rules.toString(t);return n?this.query+" {"+e+n+e+"}":""},t}(),Ht=/@container|@media|@supports\s+/,$t={onCreateRule:function(t,e,n){return Ht.test(t)?new Vt(t,e,n):null}},zt={indent:1,children:!0},qt=/@keyframes\s+([\w-]+)/,Wt=function(){function t(t,e,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=t.match(qt);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,o=n.sheet,s=n.generateId;for(var a in this.id=!1===i?this.name:Zt(s(this,o)),this.rules=new ue(vt({},n,{parent:this})),e)this.rules.add(a,e[a],vt({},n,{parent:this}));this.rules.process()}return t.prototype.toString=function(t){void 0===t&&(t=zt);var e=Nt(t).linebreak;if(null==t.indent&&(t.indent=zt.indent),null==t.children&&(t.children=zt.children),!1===t.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(t);return n&&(n=""+e+n+e),this.at+" "+this.id+" {"+n+"}"},t}(),Gt=/@keyframes\s+/,Kt=/\$([\w-]+)/g,Yt=function(t,e){return"string"==typeof t?t.replace(Kt,(function(t,n){return n in e?e[n]:t})):t},Xt=function(t,e,n){var r=t[e],i=Yt(r,n);i!==r&&(t[e]=i)},Qt={onCreateRule:function(t,e,n){return"string"==typeof t&&Gt.test(t)?new Wt(t,e,n):null},onProcessStyle:function(t,e,n){return"style"===e.type&&n?("animation-name"in t&&Xt(t,"animation-name",n.keyframes),"animation"in t&&Xt(t,"animation",n.keyframes),t):t},onChangeValue:function(t,e,n){var r=n.options.sheet;if(!r)return t;switch(e){case"animation":case"animation-name":return Yt(t,r.keyframes);default:return t}}},Jt=function(t){function e(){return t.apply(this,arguments)||this}return Et(e,t),e.prototype.toString=function(t){var e=this.options.sheet,n=!!e&&e.options.link?vt({},t,{allowEmpty:!0}):t;return jt(this.key,this.style,n)},e}(Lt),te={onCreateRule:function(t,e,n){return n.parent&&"keyframes"===n.parent.type?new Jt(t,e,n):null}},ee=function(){function t(t,e,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=t,this.style=e,this.options=n}return t.prototype.toString=function(t){var e=Nt(t).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=jt(this.at,this.style[r]),this.style[r+1]&&(n+=e);return n}return jt(this.at,this.style,t)},t}(),ne=/@font-face/,re={onCreateRule:function(t,e,n){return ne.test(t)?new ee(t,e,n):null}},ie=function(){function t(t,e,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=t,this.style=e,this.options=n}return t.prototype.toString=function(t){return jt(this.key,this.style,t)},t}(),oe={onCreateRule:function(t,e,n){return"@viewport"===t||"@-ms-viewport"===t?new ie(t,e,n):null}},se=function(){function t(t,e,n){this.type="simple",this.isProcessed=!1,this.key=t,this.value=e,this.options=n}return t.prototype.toString=function(t){if(Array.isArray(this.value)){for(var e="",n=0;n<this.value.length;n++)e+=this.key+" "+this.value[n]+";",this.value[n+1]&&(e+="\n");return e}return this.key+" "+this.value+";"},t}(),ae={"@charset":!0,"@import":!0,"@namespace":!0},ce=[Ft,$t,Qt,te,re,oe,{onCreateRule:function(t,e,n){return t in ae?new se(t,e,n):null}}],le={process:!0},de={force:!0,process:!0},ue=function(){function t(t){this.map={},this.raw={},this.index=[],this.counter=0,this.options=t,this.classes=t.classes,this.keyframes=t.keyframes}var e=t.prototype;return e.add=function(t,e,n){var r=this.options,i=r.parent,o=r.sheet,s=r.jss,a=r.Renderer,c=r.generateId,l=r.scoped,d=vt({classes:this.classes,parent:i,sheet:o,jss:s,Renderer:a,generateId:c,scoped:l,name:t,keyframes:this.keyframes,selector:void 0},n),u=t;t in this.raw&&(u=t+"-d"+this.counter++),this.raw[u]=e,u in this.classes&&(d.selector="."+Zt(this.classes[u]));var p=It(u,e,d);if(!p)return null;this.register(p);var h=void 0===d.index?this.index.length:d.index;return this.index.splice(h,0,p),p},e.replace=function(t,e,n){var r=this.get(t),i=this.index.indexOf(r);r&&this.remove(r);var o=n;return-1!==i&&(o=vt({},n,{index:i})),this.add(t,e,o)},e.get=function(t){return this.map[t]},e.remove=function(t){this.unregister(t),delete this.raw[t.key],this.index.splice(this.index.indexOf(t),1)},e.indexOf=function(t){return this.index.indexOf(t)},e.process=function(){var t=this.options.jss.plugins;this.index.slice(0).forEach(t.onProcessRule,t)},e.register=function(t){this.map[t.key]=t,t instanceof Mt?(this.map[t.selector]=t,t.id&&(this.classes[t.key]=t.id)):t instanceof Wt&&this.keyframes&&(this.keyframes[t.name]=t.id)},e.unregister=function(t){delete this.map[t.key],t instanceof Mt?(delete this.map[t.selector],delete this.classes[t.key]):t instanceof Wt&&delete this.keyframes[t.name]},e.update=function(){var t,e,n;if("string"==typeof(arguments.length<=0?void 0:arguments[0])?(t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],t=null),t)this.updateOne(this.get(t),e,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],e,n)},e.updateOne=function(e,n,r){void 0===r&&(r=le);var i=this.options,o=i.jss.plugins,s=i.sheet;if(e.rules instanceof t)e.rules.update(n,r);else{var a=e.style;if(o.onUpdate(n,e,s,r),r.process&&a&&a!==e.style){for(var c in o.onProcessStyle(e.style,e,s),e.style){var l=e.style[c];l!==a[c]&&e.prop(c,l,de)}for(var d in a){var u=e.style[d],p=a[d];null==u&&u!==p&&e.prop(d,null,de)}}}},e.toString=function(t){for(var e="",n=this.options.sheet,r=!!n&&n.options.link,i=Nt(t).linebreak,o=0;o<this.index.length;o++){var s=this.index[o].toString(t);(s||r)&&(e&&(e+=i),e+=s)}return e},t}(),pe=function(){function t(t,e){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=vt({},e,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),e.Renderer&&(this.renderer=new e.Renderer(this)),this.rules=new ue(this.options),t)this.rules.add(n,t[n]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(t,e,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(t,e,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},e.replaceRule=function(t,e,n){var r=this.rules.get(t);if(!r)return this.addRule(t,e,n);var i=this.rules.replace(t,e,n);return i&&this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(this.renderer&&(i?r.renderable&&this.renderer.replaceRule(r.renderable,i):this.renderer.deleteRule(r)),i):i:(this.deployed=!1,i)},e.insertRule=function(t){this.renderer&&this.renderer.insertRule(t)},e.addRules=function(t,e){var n=[];for(var r in t){var i=this.addRule(r,t[r],e);i&&n.push(i)}return n},e.getRule=function(t){return this.rules.get(t)},e.deleteRule=function(t){var e="object"==typeof t?t:this.rules.get(t);return!(!e||this.attached&&!e.renderable)&&(this.rules.remove(e),!(this.attached&&e.renderable&&this.renderer)||this.renderer.deleteRule(e.renderable))},e.indexOf=function(t){return this.rules.indexOf(t)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var t;return(t=this.rules).update.apply(t,arguments),this},e.updateOne=function(t,e,n){return this.rules.updateOne(t,e,n),this},e.toString=function(t){return this.rules.toString(t)},t}(),he=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(t,e,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](t,e,n);if(i)return i}return null},e.onProcessRule=function(t){if(!t.isProcessed){for(var e=t.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](t,e);t.style&&this.onProcessStyle(t.style,t,e),t.isProcessed=!0}},e.onProcessStyle=function(t,e,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)e.style=this.registry.onProcessStyle[r](e.style,e,n)},e.onProcessSheet=function(t){for(var e=0;e<this.registry.onProcessSheet.length;e++)this.registry.onProcessSheet[e](t)},e.onUpdate=function(t,e,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](t,e,n,r)},e.onChangeValue=function(t,e,n){for(var r=t,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,e,n);return r},e.use=function(t,e){void 0===e&&(e={queue:"external"});var n=this.plugins[e.queue];-1===n.indexOf(t)&&(n.push(t),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(t,e){for(var n in e)n in t&&t[n].push(e[n]);return t}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),fe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(t){var e=this.registry,n=t.options.index;if(-1===e.indexOf(t))if(0===e.length||n>=this.index)e.push(t);else for(var r=0;r<e.length;r++)if(e[r].options.index>n)return void e.splice(r,0,t)},e.reset=function(){this.registry=[]},e.remove=function(t){var e=this.registry.indexOf(t);this.registry.splice(e,1)},e.toString=function(t){for(var e=void 0===t?{}:t,n=e.attached,r=function(t,e){if(null==t)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}(e,["attached"]),i=Nt(r).linebreak,o="",s=0;s<this.registry.length;s++){var a=this.registry[s];null!=n&&a.attached!==n||(o&&(o+=i),o+=a.toString(r))}return o},St(t,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),t}(),ge=new fe,ve="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")(),ye="2f1acc6c3a606b082e5eef5e54414ffb";null==ve[ye]&&(ve[ye]=0);var me=ve[ye]++,be=function(t){void 0===t&&(t={});var e=0;return function(n,r){e+=1;var i="",o="";return r&&(r.options.classNamePrefix&&(o=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),t.minify?""+(o||"c")+me+i+e:o+n.key+"-"+me+(i?"-"+i:"")+"-"+e}},_e=function(t){var e;return function(){return e||(e=t()),e}},we=function(t,e){try{return t.attributeStyleMap?t.attributeStyleMap.get(e):t.style.getPropertyValue(e)}catch(n){return""}},Se=function(t,e,n){try{var r=n;if(Array.isArray(n)&&(r=xt(n)),t.attributeStyleMap)t.attributeStyleMap.set(e,r);else{var i=r?r.indexOf("!important"):-1,o=i>-1?r.substr(0,i-1):r;t.style.setProperty(e,o,i>-1?"important":"")}}catch(s){return!1}return!0},Ae=function(t,e){try{t.attributeStyleMap?t.attributeStyleMap.delete(e):t.style.removeProperty(e)}catch(n){}},Ee=function(t,e){return t.selectorText=e,t.selectorText===e},Re=_e((function(){return document.querySelector("head")}));function Oe(t){var e=ge.registry;if(e.length>0){var n=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&"string"==typeof r){var i=function(t){for(var e=Re(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===t)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var Te=_e((function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null})),Ie=function(t,e,n){try{"insertRule"in t?t.insertRule(e,n):"appendRule"in t&&t.appendRule(e)}catch(r){return!1}return t.cssRules[n]},Ce=function(t,e){var n=t.cssRules.length;return void 0===e||e>n?n:e},xe=function(){function t(t){this.getPropertyValue=we,this.setProperty=Se,this.removeProperty=Ae,this.setSelector=Ee,this.hasInsertedRules=!1,this.cssRules=[],t&&ge.add(t),this.sheet=t;var e,n=this.sheet?this.sheet.options:{},r=n.media,i=n.meta,o=n.element;this.element=o||((e=document.createElement("style")).textContent="\n",e),this.element.setAttribute("data-jss",""),r&&this.element.setAttribute("media",r),i&&this.element.setAttribute("data-meta",i);var s=Te();s&&this.element.setAttribute("nonce",s)}var e=t.prototype;return e.attach=function(){if(!this.element.parentNode&&this.sheet){!function(t,e){var n=e.insertionPoint,r=Oe(e);if(!1!==r&&r.parent)r.parent.insertBefore(t,r.node);else if(n&&"number"==typeof n.nodeType){var i=n,o=i.parentNode;o&&o.insertBefore(t,i.nextSibling)}else Re().appendChild(t)}(this.element,this.sheet.options);var t=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&t&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var t=this.element.parentNode;t&&t.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},e.deploy=function(){var t=this.sheet;t&&(t.options.link?this.insertRules(t.rules):this.element.textContent="\n"+t.toString()+"\n")},e.insertRules=function(t,e){for(var n=0;n<t.index.length;n++)this.insertRule(t.index[n],n,e)},e.insertRule=function(t,e,n){if(void 0===n&&(n=this.element.sheet),t.rules){var r=t,i=n;if("conditional"===t.type||"keyframes"===t.type){var o=Ce(n,e);if(!1===(i=Ie(n,r.toString({children:!1}),o)))return!1;this.refCssRule(t,o,i)}return this.insertRules(r.rules,i),i}var s=t.toString();if(!s)return!1;var a=Ce(n,e),c=Ie(n,s,a);return!1!==c&&(this.hasInsertedRules=!0,this.refCssRule(t,a,c),c)},e.refCssRule=function(t,e,n){t.renderable=n,t.options.parent instanceof pe&&this.cssRules.splice(e,0,n)},e.deleteRule=function(t){var e=this.element.sheet,n=this.indexOf(t);return-1!==n&&(e.deleteRule(n),this.cssRules.splice(n,1),!0)},e.indexOf=function(t){return this.cssRules.indexOf(t)},e.replaceRule=function(t,e){var n=this.indexOf(t);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(e,n))},e.getRules=function(){return this.element.sheet.cssRules},t}(),Ne=0,Pe=function(){function t(t){this.id=Ne++,this.version="10.10.0",this.plugins=new he,this.options={id:{minify:!1},createGenerateId:be,Renderer:mt?xe:null,plugins:[]},this.generateId=be({minify:!1});for(var e=0;e<ce.length;e++)this.plugins.use(ce[e],{queue:"internal"});this.setup(t)}var e=t.prototype;return e.setup=function(t){return void 0===t&&(t={}),t.createGenerateId&&(this.options.createGenerateId=t.createGenerateId),t.id&&(this.options.id=vt({},this.options.id,t.id)),(t.createGenerateId||t.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=t.insertionPoint&&(this.options.insertionPoint=t.insertionPoint),"Renderer"in t&&(this.options.Renderer=t.Renderer),t.plugins&&this.use.apply(this,t.plugins),this},e.createStyleSheet=function(t,e){void 0===e&&(e={});var n=e.index;"number"!=typeof n&&(n=0===ge.index?0:ge.index+1);var r=new pe(t,vt({},e,{jss:this,generateId:e.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},e.removeStyleSheet=function(t){return t.detach(),ge.remove(t),this},e.createRule=function(t,e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),"object"==typeof t)return this.createRule(void 0,t,e);var r=vt({},n,{name:t,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=It(t,e,r);return i&&this.plugins.onProcessRule(i),i},e.use=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){t.plugins.use(e)})),this},t}(),je=function(t){return new Pe(t)},ke="object"==typeof CSS&&null!=CSS&&"number"in CSS;je();var De=/[A-Z]/g,Ze=/^ms-/,Le={};function Me(t){return"-"+t.toLowerCase()}const Fe=function(t){if(Le.hasOwnProperty(t))return Le[t];var e=t.replace(De,Me);return Le[t]=Ze.test(e)?"-"+e:e};function Ue(t){var e={};for(var n in t){e[0===n.indexOf("--")?n:Fe(n)]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(Ue):e.fallbacks=Ue(t.fallbacks)),e}const Be=function(){return{onProcessStyle:function(t){if(Array.isArray(t)){for(var e=0;e<t.length;e++)t[e]=Ue(t[e]);return t}return Ue(t)},onChangeValue:function(t,e,n){if(0===e.indexOf("--"))return t;var r=Fe(e);return e===r?t:(n.prop(r,t),null)}}};var Ve=ke&&CSS?CSS.px:"px",He=ke&&CSS?CSS.ms:"ms",$e=ke&&CSS?CSS.percent:"%";function ze(t){var e=/(-[a-z])/g,n=function(t){return t[1].toUpperCase()},r={};for(var i in t)r[i]=t[i],r[i.replace(e,n)]=t[i];return r}var qe=ze({"animation-delay":He,"animation-duration":He,"background-position":Ve,"background-position-x":Ve,"background-position-y":Ve,"background-size":Ve,border:Ve,"border-bottom":Ve,"border-bottom-left-radius":Ve,"border-bottom-right-radius":Ve,"border-bottom-width":Ve,"border-left":Ve,"border-left-width":Ve,"border-radius":Ve,"border-right":Ve,"border-right-width":Ve,"border-top":Ve,"border-top-left-radius":Ve,"border-top-right-radius":Ve,"border-top-width":Ve,"border-width":Ve,"border-block":Ve,"border-block-end":Ve,"border-block-end-width":Ve,"border-block-start":Ve,"border-block-start-width":Ve,"border-block-width":Ve,"border-inline":Ve,"border-inline-end":Ve,"border-inline-end-width":Ve,"border-inline-start":Ve,"border-inline-start-width":Ve,"border-inline-width":Ve,"border-start-start-radius":Ve,"border-start-end-radius":Ve,"border-end-start-radius":Ve,"border-end-end-radius":Ve,margin:Ve,"margin-bottom":Ve,"margin-left":Ve,"margin-right":Ve,"margin-top":Ve,"margin-block":Ve,"margin-block-end":Ve,"margin-block-start":Ve,"margin-inline":Ve,"margin-inline-end":Ve,"margin-inline-start":Ve,padding:Ve,"padding-bottom":Ve,"padding-left":Ve,"padding-right":Ve,"padding-top":Ve,"padding-block":Ve,"padding-block-end":Ve,"padding-block-start":Ve,"padding-inline":Ve,"padding-inline-end":Ve,"padding-inline-start":Ve,"mask-position-x":Ve,"mask-position-y":Ve,"mask-size":Ve,height:Ve,width:Ve,"min-height":Ve,"max-height":Ve,"min-width":Ve,"max-width":Ve,bottom:Ve,left:Ve,top:Ve,right:Ve,inset:Ve,"inset-block":Ve,"inset-block-end":Ve,"inset-block-start":Ve,"inset-inline":Ve,"inset-inline-end":Ve,"inset-inline-start":Ve,"box-shadow":Ve,"text-shadow":Ve,"column-gap":Ve,"column-rule":Ve,"column-rule-width":Ve,"column-width":Ve,"font-size":Ve,"font-size-delta":Ve,"letter-spacing":Ve,"text-decoration-thickness":Ve,"text-indent":Ve,"text-stroke":Ve,"text-stroke-width":Ve,"word-spacing":Ve,motion:Ve,"motion-offset":Ve,outline:Ve,"outline-offset":Ve,"outline-width":Ve,perspective:Ve,"perspective-origin-x":$e,"perspective-origin-y":$e,"transform-origin":$e,"transform-origin-x":$e,"transform-origin-y":$e,"transform-origin-z":$e,"transition-delay":He,"transition-duration":He,"vertical-align":Ve,"flex-basis":Ve,"shape-margin":Ve,size:Ve,gap:Ve,grid:Ve,"grid-gap":Ve,"row-gap":Ve,"grid-row-gap":Ve,"grid-column-gap":Ve,"grid-template-rows":Ve,"grid-template-columns":Ve,"grid-auto-rows":Ve,"grid-auto-columns":Ve,"box-shadow-x":Ve,"box-shadow-y":Ve,"box-shadow-blur":Ve,"box-shadow-spread":Ve,"font-line-height":Ve,"text-shadow-x":Ve,"text-shadow-y":Ve,"text-shadow-blur":Ve});function We(t,e,n){if(null==e)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=We(t,e[r],n);else if("object"==typeof e)if("fallbacks"===t)for(var i in e)e[i]=We(i,e[i],n);else for(var o in e)e[o]=We(t+"-"+o,e[o],n);else if("number"==typeof e&&!1===isNaN(e)){var s=n[t]||qe[t];return!s||0===e&&s===Ve?e.toString():"function"==typeof s?s(e).toString():""+e+s}return e}const Ge=function(t){void 0===t&&(t={});var e=ze(t);return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r in t)t[r]=We(r,t[r],e);return t},onChangeValue:function(t,n){return We(n,t,e)}}};function Ke(){return Ke=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ke.apply(this,arguments)}var Ye=/\s*,\s*/g,Xe=/&/g,Qe=/\$([\w-]+)/g;const Je=function(){function t(t,e){return function(n,r){var i=t.getRule(r)||e&&e.getRule(r);return i?i.selector:r}}function e(t,e){for(var n=e.split(Ye),r=t.split(Ye),i="",o=0;o<n.length;o++)for(var s=n[o],a=0;a<r.length;a++){var c=r[a];i&&(i+=", "),i+=-1!==c.indexOf("&")?c.replace(Xe,s):s+" "+c}return i}function n(t,e,n){if(n)return Ke({},n,{index:n.index+1});var r=t.options.nestingLevel;r=void 0===r?1:r+1;var i=Ke({},t.options,{nestingLevel:r,index:e.indexOf(t)+1});return delete i.name,i}return{onProcessStyle:function(r,i,o){if("style"!==i.type)return r;var s,a,c=i,l=c.options.parent;for(var d in r){var u=-1!==d.indexOf("&"),p="@"===d[0];if(u||p){if(s=n(c,l,s),u){var h=e(d,c.selector);a||(a=t(l,o)),h=h.replace(Qe,a);var f=c.key+"-"+d;"replaceRule"in l?l.replaceRule(f,r[d],Ke({},s,{selector:h})):l.addRule(f,r[d],Ke({},s,{selector:h}))}else p&&l.addRule(d,{},s).addRule(c.key,r[d],{selector:c.selector});delete r[d]}}return r}}};var tn=Date.now(),en="fnValues"+tn,nn="fnStyle"+ ++tn;const rn=function(){return{onCreateRule:function(t,e,n){if("function"!=typeof e)return null;var r=It(t,{},n);return r[nn]=e,r},onProcessStyle:function(t,e){if(en in e||nn in e)return t;var n={};for(var r in t){var i=t[r];"function"==typeof i&&(delete t[r],n[r]=i)}return e[en]=n,t},onUpdate:function(t,e,n,r){var i=e,o=i[nn];o&&(i.style=o(t)||{});var s=i[en];if(s)for(var a in s)i.prop(a,s[a](t),r)}}};var on=n(9488),sn=n.n(on);const an={color:"#000000 !important","& $footerLogo svg > path:first-child":{fill:"#CA2127 !important"},"& $footerLogo svg > g.text":{fill:"#16325c !important"},"& $footerCog svg > g > path":{fill:"#000000 !important",stroke:"#fff !important"}},cn={outerContainer:t=>{var e,n;return sn()({},{display:"block",textDecoration:"none !important",font:"inherit !important"},null!=(e=null==(n=t.style)?void 0:n.outerContainer)?e:{})},container:t=>{var e,n;return sn()({},{display:"flex !important",flexDirection:"column !important",justifyContent:"space-between !important",boxSizing:"border-box !important",font:"13px/18px Arial,Helvetica CY,Nimbus Sans L,sans-serif!important",margin:"0 !important",padding:"0 !important",background:"none !important",position:"relative !important","&:hover $footer":an,"&:focus-within $footer":an},null!=(e=null==(n=t.style)?void 0:n.container)?e:{})},sections:t=>{var e;return sn()({},{display:"flex",justifyContent:"space-between !important",height:"100% !important",padding:"0 !important",margin:"0 !important",flexWrap:"wrap !important",gap:"10px !important","& $section":{flex:"1 0 49% !important",boxSizing:"border-box !important"}},"sections"in t.style?null==(e=t.style)?void 0:e.sections:{})},section:t=>{var e;return sn()({},{},"section"in t.style?null==(e=t.style)?void 0:e.section:{})},list:t=>{var e,n;return sn()({},{listStyle:"none !important",margin:"0 !important",padding:"0 !important"},null!=(e=null==(n=t.style)?void 0:n.list)?e:{})},listItem:t=>{var e,n;return sn()({},{listStyleType:"none !important"},null!=(e=null==(n=t.style)?void 0:n.item)?e:{})},listItemLink:t=>{var e,n;return sn()({},{display:"inline-block !important",textDecoration:"none !important"},null!=(e=null==(n=t.style)?void 0:n.itemLink)?e:{})},footer:t=>{var e,n;return sn()({},{display:"flex !important",flexWrap:"wrap !important",justifyContent:"space-between !important",flexDirection:"row !important"},null!=(e=null==(n=t.style)?void 0:n.footer)?e:{})},footerRight:t=>sn()({},{position:"relative !important",textAlign:"right !important",marginLeft:"auto !important"},"footerRight"in t.style?t.style.footerRight:{}),footerCog:t=>sn()({},{display:"inline-flex !important",alignItems:"center !important",justifyContent:"center !important",height:"16px !important",width:"16px !important",padding:"0 !important",margin:"0 !important",border:"none !important",borderRadius:"50% !important",background:"transparent !important",cursor:"pointer !important",transition:"background-color 0.2s ease-in-out",appearance:"none !important","&:focus-visible":{outline:"2px solid #196eed !important",outlineOffset:"0px !important"},"& svg > g > path":{strokeWidth:1,filter:"drop-shadow(0px 0px 1px rgba(255, 255, 255, .7))"}},"footerCog"in t.style?t.style.footerCog:{}),footerSettings:t=>sn()({},{display:"flex !important",flexDirection:"column !important",alignItems:"flex-end !important",marginRight:"4px !important",gap:"8px !important",position:"relative !important"},"footerSettings"in t.style?t.style.footerSettings:{}),footerSettingsModal:t=>sn()({},{position:"absolute !important",right:"0 !important",top:"calc(100% + 4px) !important",padding:"10px !important",background:"#ffffff !important",boxShadow:"0 4px 8px 0 rgba(0,0,0,0.15) !important",border:"solid 1px #d8dde6 !important",borderRadius:"3px !important",width:"max-content !important",minWidth:"200px !important",zIndex:2,"& ul":{listStyle:"none !important",padding:"0 !important",margin:"0 !important",whiteSpace:"nowrap !important",textAlign:"left !important","& li":{"& a":{color:"#16325c !important",textDecoration:"none !important",display:"block",padding:"10px 20px !important",transition:"0.2s ease-in-out","&:hover":{color:"#196eed !important"}}}}},"footerSettingsModal"in t.style?t.style.footerSettingsModal:{})},ln="strict-origin-when-cross-origin, no-referrer-when-downgrade",dn="_blank",un={[tt.AUTO]:{width:"auto",height:"auto"},[tt.LEADERBOARD]:{width:728,height:90},[tt.LARGE_LEADERBOARD]:{width:840,height:150},[tt.XL_LEADERBOARD]:{width:995,height:123},[tt.TV_SPOT_LEADERBOARD]:{width:840,height:250},[tt.BILLBOARD]:{width:970,height:250},[tt.WIDE_SKYSCRAPER]:{width:160,height:600},[tt.SKYSCRAPER]:{width:120,height:600},[tt.HALF_PAGE_SKYSCRAPER]:{width:300,height:600},[tt.MEDIUM_RECTANGLE]:{width:300,height:250},[tt.SQUARE_RECTANGLE]:{width:250,height:250},[tt.HALF_PAGE_RECTANGLE]:{width:300,height:600},[tt.XL_RECTANGLE]:{width:468,height:400},[tt.MEDIUM_SPLASH]:{width:640,height:480},[tt.SMALL_SPLASH]:{width:500,height:400},[tt.SMARTPHONE_BANNER]:{width:320,height:50},[tt.SUPER_LEADERBOARD]:{width:970,height:90},[tt.PORTRAIT]:{width:300,height:1050},[tt.MOBILEPHONEINTERSTITIAL1]:{width:640,height:1136},[tt.MOBILEPHONEINTERSTITIAL2]:{width:750,height:1334},[tt.MOBILEPHONEINTERSTITIAL3]:{width:1080,height:1920},[tt.FEATURE_PHONE_SMALL_BANNER]:{width:120,height:20},[tt.FEATURE_PHONE_MEDIUM_BANNER]:{width:168,height:28},[tt.FEATURE_PHONE_LARGE_BANNER]:{width:216,height:36}},pn={outerContainer:t=>{var e,n;return sn()({},Object.assign({},cn.outerContainer(t),{maxWidth:un[t.format].width,maxHeight:un[t.format].height}),null!=(e=null==(n=t.style)?void 0:n.outerContainer)?e:{})},container:t=>{var e,n;return sn()({},Object.assign({},cn.container(t)),null!=(e=null==(n=t.style)?void 0:n.container)?e:{})},heading:t=>{var e,n;return sn()({},{display:"none !important"},null!=(e=null==(n=t.style)?void 0:n.heading)?e:{})},listItemImgLink:t=>{var e;return sn()({},{display:"inline-block !important",textDecoration:"none !important"},"itemImgLink"in t.style?null==(e=t.style)?void 0:e.itemImgLink:{})},listItemImg:t=>{var e;return sn()({verticalAlign:"middle !important",borderStyle:"none !important",maxWidth:un[t.format].width,maxHeight:un[t.format].height},{},"itemImg"in t.style?null==(e=t.style)?void 0:e.itemImg:{})},footer:t=>{var e,n;return sn()({},Object.assign({},cn.footer(t),{position:"absolute !important",bottom:0,right:0}),null!=(e=null==(n=t.style)?void 0:n.footer)?e:{})},footerLeft:t=>{var e;return sn()({},{display:"none !important"},null!=(e=t.style.footerLeft)?e:{})},footerRight:t=>{var e;return sn()({},Object.assign({},cn.footerRight(t),{padding:10}),null!=(e=t.style.footerLeft)?e:{})}},hn={outerContainer:t=>{var e,n;return sn()({},Object.assign({},cn.outerContainer(t),{padding:"4px 0 0 4px !important"}),null!=(e=null==(n=t.style)?void 0:n.outerContainer)?e:{})},container:t=>{var e,n;return sn()({},Object.assign({},cn.container(t),{width:un[t.format].width,height:un[t.format].height,"&:hover $footer":{color:"#000000 !important","& $footerLogo svg > path:first-child":{fill:"#CA2127 !important"},"& $footerLogo svg > g.text":{fill:"#16325c !important"},"& $footerCog svg > g > path":{fill:"#000000 !important"}}}),null!=(e=null==(n=t.style)?void 0:n.container)?e:{})},heading:t=>{var e,n;return sn()({},{margin:"0 !important",padding:"0 !important",border:"0 !important",verticalAlign:"baseline !important",lineHeight:"inherit !important",letterSpacing:"inherit !important",color:"inherit !important",fontStyle:"normal !important",fontSize:"14px !important",fontWeight:"700 !important",marginBottom:"20px !important",paddingTop:"8px !important"},null!=(e=null==(n=t.style)?void 0:n.heading)?e:{})},sections:t=>{var e;return sn()({},Object.assign({},cn.sections(t),{flexDirection:t.format===tt.AUTO||un[t.format].width>un[t.format].height?"row":"column"}),"sections"in t.style?null==(e=t.style)?void 0:e.sections:{})},listItem:t=>{var e,n;return sn()({},Object.assign({},cn.listItem(t),{marginBottom:"12px !important"}),null!=(e=null==(n=t.style)?void 0:n.item)?e:{})},listItemLink:t=>{var e,n;return sn()({},Object.assign({},cn.listItemLink(t),{color:"#000000 !important","&:hover":{textDecoration:"underline !important","& svg > g > path":{stroke:"#000000 !important"}}}),null!=(e=null==(n=t.style)?void 0:n.itemLink)?e:{})},listItemTitle:t=>{var e,n;return sn()({},{display:"inline-block !important"},null!=(e=null==(n=t.style)?void 0:n.itemTitle)?e:{})},listItemTitleExternalLinkIcon:t=>{var e;return sn()({},{display:"inline-block !important",marginLeft:"2px !important",verticalAlign:"-3px !important",cursor:"pointer !important","& svg":{height:"14px !important",width:"14px !important"},"&:hover":{cursor:"pointer !important"}},"itemTitleExternalLinkIcon"in t.style?null==(e=t.style)?void 0:e.itemTitleExternalLinkIcon:{})},listItemMeta:t=>{var e,n;return sn()({},{color:"#a2b1b6 !important",marginTop:"2px !important","& a":{color:"#a2b1b6 !important",textDecoration:"none !important","&:hover":{textDecoration:"underline !important"}}},null!=(e=null==(n=t.style)?void 0:n.itemMeta)?e:{})},listItemSubtitle:t=>{var e;return sn()({},{},null==(e=t.style)?void 0:e.itemSubtitle)},listItemAuthors:t=>{var e;return sn()({},{},null==(e=t.style)?void 0:e.itemAuthors)},listItemPublicationName:t=>{var e;return sn()({},{},"itemPublicationName"in t.style?null==(e=t.style)?void 0:e.itemPublicationName:{})},listItemPublicationDate:t=>{var e;return sn()({},{},"itemPublicationDate"in t.style?null==(e=t.style)?void 0:e.itemPublicationDate:{})},footer:t=>{var e,n;return sn()({},Object.assign({},cn.footer(t),{borderTop:"2px solid #e9eeef !important",color:"#cad5d9 !important",fontFamily:'SF Pro Display, Arial, "Helvetica CY", sans-serif !important',fontSize:"14px !important",margin:"13px 0 15px 0 !important",padding:"15px 0 0 !important"}),null!=(e=null==(n=t.style)?void 0:n.footer)?e:{})},footerLeft:t=>{var e;return sn()({},{"& a":{display:"flex !important",alignItems:"center !important",color:"inherit !important",textDecoration:"none !important","&:hover":{textDecoration:"none !important"}}},null!=(e=t.style.footerLeft)?e:{})},footerLogo:t=>sn()({},{minWidth:"70px !important",height:"22px !important",marginLeft:"5px !important",verticalAlign:"middle !important","& svg":{height:"22px !important",width:"auto !important"}},"footerLogo"in t.style?t.style.footerLogo:{})},fn={[G.LINK]:hn,[G.IMAGE]:pn,[G.VIDEO]:{}};var gn;let vn=M()(gn=class StylesheetProvider{provide(t){var e;return Object.assign({},cn,null!=(e=fn[t.getCreativeType()])?e:{})}})||gn;var yn,mn;let bn=M()(yn=function(t,e){return F("kernel.debug")(t,void 0,1)}(yn=Reflect.metadata("design:type",Function)(yn=Reflect.metadata("design:paramtypes",[void 0===vn?Object:vn,Boolean])(yn=Reflect.metadata("design:type",Function)(yn=Reflect.metadata("design:paramtypes",[void 0===vn?Object:vn,Boolean])((mn=class StylesheetRenderer{constructor(t,e){this.jssInstance=void 0,this.stylesheets=void 0,this.stylesheetProvider=t,this.debug=e,this.stylesheets=new Map,this.jssInstance=je({id:{minify:!this.debug},createGenerateId:t=>e=>{const n=((t,e="")=>{const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";const i=new Uint8Array(t);return crypto.getRandomValues(i),i.forEach((t=>{r+=n[t%62]})),`${e}${r}`})(StylesheetRenderer.CLASS_NAMES_LENGTH);return null!=t&&t.minify?`c${n}`:`${e.key}-${n}`},plugins:[rn(),Je(),Be(),Ge()]})}async render(t){if(!(null==t?void 0:t.getId()))return;const e=this.getStylesheet(t);e.attached||(e.update({format:t.getSettings().getFormat(),style:t.getSettings().getStyle(),creativeType:t.getCreativeType()}),e.attach())}getClasses(t){return this.getStylesheet(t).classes||{}}getClass(t,e){var n;return null!=(n=this.getClasses(t)[e])?n:""}getStylesheet(t){var e;const n=t.getId(),r=null!=(e=this.stylesheets.get(n))?e:this.jssInstance.createStyleSheet(this.stylesheetProvider.provide(t));return this.stylesheets.set(n,r),r}},mn.CLASS_NAMES_LENGTH=10,yn=mn))||yn)||yn)||yn)||yn)||yn)||yn;var _n;let wn=M()(_n=Reflect.metadata("design:type",Function)(_n=Reflect.metadata("design:paramtypes",[void 0===H?Object:H])(_n=Reflect.metadata("design:type",Function)(_n=Reflect.metadata("design:paramtypes",[void 0===H?Object:H])(_n=class BrowserObjectModel{constructor(t){this.applicationContext=t}getWindow(){return this.applicationContext.getWindow()}getDocument(){return this.getWindow().document}})||_n)||_n)||_n)||_n)||_n;class AdSlotContainerItemViewEvent extends event_Event{constructor(t,e){super(),this.adSlotContainerItem=t,this.element=e}getAdSlotContainerItem(){return this.adSlotContainerItem}getElement(){return this.element}}class ViewObserver{constructor(t){this.elementMap=new Map,this.timeoutsMap=new Map,this.observer=void 0,this.mutationObserver=void 0,this.options=t,this.options=Object.assign({},ViewObserver.DEFAULT_OPTIONS,t),this.observer=new IntersectionObserver(this.handleIntersection.bind(this),this.options),this.mutationObserver=new MutationObserver(this.handleMutations.bind(this))}observe(t,e){if(!t)return;this.elementMap.has(t)&&(this.elementMap.delete(t),this.observer.unobserve(t)),this.elementMap.set(t,Object.assign({},ViewObserver.ELEMENT_DEFAULT_OPTIONS,e)),this.observer.observe(t);const n=t.parentElement;n&&this.mutationObserver.observe(n,{childList:!0,subtree:!1})}unobserve(t){t&&(this.elementMap.delete(t),this.timeoutsMap.delete(t),this.observer.unobserve(t),0===this.elementMap.size&&this.destroy())}destroy(){this.elementMap.clear(),this.timeoutsMap.clear(),this.observer.disconnect(),this.mutationObserver.disconnect()}static getInstance(t){return new ViewObserver(t)}handleIntersection(t){t.filter((t=>this.elementMap.has(t.target))).forEach((t=>{var e;const n=t.target,r=this.elementMap.get(n);if(!r)return;const i=r.threshold,o=r.trackAllChanges,s=null==(e=this.options)?void 0:e.trackVisibility,a=t.isIntersecting&&t.intersectionRatio>=i;let c=a;s&&void 0!==t.isVisible&&(c=t.isVisible&&a);const l="data-isInView",d=!n.hasAttribute(l)||n.hasAttribute(l)&&n.getAttribute(l)!==String(c);(o||!o&&d)&&(this.onVisibilityChange(t.target,{entry:t,isInView:c}),n.setAttribute(l,String(c)))}))}onVisibilityChange(t,e){var n;const r=this.elementMap.get(t);if(!r)return;const{entry:i,isInView:o}=e,s=null!=(n=r.callback)?n:()=>{};if(o){var a;if(this.timeoutsMap.has(t))return;return void this.timeoutsMap.set(t,setTimeout((()=>{Promise.resolve(s(t,o,i)).then((()=>{})),r.freezeOnceVisible&&this.observer.unobserve(t),this.timeoutsMap.delete(t)}),null!=(a=r.minimumVisibleTime)?a:0))}const c=this.timeoutsMap.get(t);clearTimeout(c),this.timeoutsMap.delete(t),Promise.resolve(s(t,o,i)).then((()=>{}))}handleMutations(t){t.forEach((t=>{t.removedNodes.length&&t.removedNodes.forEach((t=>{t instanceof Element&&this.elementMap.has(t)&&this.unobserve(t)}))}))}}var Sn,An;ViewObserver.ELEMENT_DEFAULT_OPTIONS={freezeOnceVisible:!1,threshold:.25,trackAllChanges:!1},ViewObserver.DEFAULT_OPTIONS={root:null,rootMargin:"0px",threshold:[...Array(100).fill(null).map(((t,e)=>e/100)),1]};let En=M()(Sn=function(t,e){return B("AdSlotContainerItemViewCreative")(t,void 0,3)}(Sn=function(t,e){return U()(t,void 0,4)}(Sn=Reflect.metadata("design:type",Function)(Sn=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===lt?Object:lt,void 0===bn?Object:bn,Array,void 0===at?Object:at])(Sn=Reflect.metadata("design:type",Function)(Sn=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===lt?Object:lt,void 0===bn?Object:bn,Array,void 0===at?Object:at])(((An=class AdSlotContainerItemView{constructor(t,e,n,r,i){this.browserObjectModel=t,this.eventManager=e,this.stylesheetRenderer=n,this.creativeViews=r,this.logger=i}async render(t,e){var n,r,i,o=this;const s=null==(n=t.getAdSlotContainer())?void 0:n.getAdSlot();if(!s)throw new Error("AdSlot is required to render AdSlotContainer");const a=this.browserObjectModel.getDocument().createElement("li");a.className=this.stylesheetRenderer.getClass(s,"listItem");const c=this.creativeViews.find((e=>e.supports(t)));var l;return c?(a.innerHTML=c.render(t).innerHTML,(null!=e?e:ViewObserver.getInstance({trackVisibility:!1,delay:100})).observe(a,{freezeOnceVisible:!0,minimumVisibleTime:null!=(r=null==s?void 0:s.getSettings().getItemImpressionTrackTimeout())?r:500,threshold:null!=(i=null==s?void 0:s.getSettings().getItemImpressionMinimumVisibleThreshold())?i:.25,callback:async function(e,n){var r;n&&(await o.eventManager.dispatch(ot.AD_SLOT_CONTAINER_ITEM_VIEW,new AdSlotContainerItemViewEvent(t,e)),null==(r=o.logger)||r.debug("Item view event dispatched",{item:t,adSlot:s.getId()}))}}),a):(null==(l=this.logger)||l.warn("No creative view found for item",t),a)}}).DEFAULT_REFERRER_POLICY="strict-origin-when-cross-origin, no-referrer-when-downgrade",Sn=An))||Sn)||Sn)||Sn)||Sn)||Sn)||Sn)||Sn;class AdSlotContainerViewEvent extends event_Event{constructor(t,e){super(),this.adSlotContainer=t,this.element=e}getAdSlotContainer(){return this.adSlotContainer}getElement(){return this.element}}const Rn=(t,e)=>{var n,r,i,o,s,a,c,l,d;const u={default:dn,[X.INTERNAL]:"_self",[X.EXTERNAL]:dn},p={default:"",[X.INTERNAL]:"",[X.EXTERNAL]:"sponsored"},h={default:ln,[X.INTERNAL]:ln,[X.EXTERNAL]:ln},f=e.dom.createElement("a");f.href=null!=(n=t.href)?n:"",f.target=null!=(r=t.target)?r:u[null!=(i=t.linkingType)?i:"default"],f.rel=null!=(o=t.rel)?o:p[null!=(s=t.linkingType)?s:"default"],f.referrerPolicy=null!=(a=t.referrerPolicy)?a:h[null!=(c=t.linkingType)?c:"default"],f.className=null!=(l=t.className)?l:"",f.innerHTML=null!=(d=t.textContent)?d:"";for(const[v,y]of Object.entries(null!=(g=t.attributes)?g:{})){var g;f.setAttribute(v,null!=y?y:"")}return f};var On;let Tn=M()(On=function(t,e){return U()(t,void 0,4)}(On=Reflect.metadata("design:type",Function)(On=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===En?Object:En,void 0===lt?Object:lt,void 0===bn?Object:bn,void 0===at?Object:at])(On=Reflect.metadata("design:type",Function)(On=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===En?Object:En,void 0===lt?Object:lt,void 0===bn?Object:bn,void 0===at?Object:at])(On=class AdSlotContainerView{constructor(t,e,n,r,i){this.browserObjectModel=t,this.adSlotContainerItemView=e,this.eventManager=n,this.stylesheetRenderer=r,this.logger=i}async render(t){var e,n,r,i=this;const o=t.getAdSlot();if(!o)throw new Error("AdSlot is required to render AdSlotContainer");const s={adSlot:o,dom:this.browserObjectModel.getDocument(),stylesheet:this.stylesheetRenderer.getStylesheet(o)},a=this.browserObjectModel.getDocument().createElement("div");a.setAttribute("data-id",`${o.getId()}-${t.getIndex()}`),a.className=this.stylesheetRenderer.getClass(o,"container");const c=(null!=(e=o.getSettings().getHeadingText())?e:"We recommend").trim(),l=this.browserObjectModel.getDocument().createElement("h2");l.className=this.stylesheetRenderer.getClass(o,"heading"),l.textContent=""!==c?c:"We recommend",a.appendChild(l);const d=ViewObserver.getInstance({trackVisibility:!1,delay:100}),u=t.getItems().reduce(((t,e)=>{const n=e.getLinkingType();return null===n||(t[n]||(t[n]=[]),t[n].push(e)),t}),{}),p=this.browserObjectModel.getDocument().createElement("div");p.className=this.stylesheetRenderer.getClass(o,"sections");for(const[h,f]of Object.entries(u)){const t=this.browserObjectModel.getDocument().createElement("div");t.setAttribute("data-section-linking-type",h.toString()),t.className=this.stylesheetRenderer.getClass(o,"section");const e=this.browserObjectModel.getDocument().createElement("ul");e.className=this.stylesheetRenderer.getClass(o,"list");for(const n of f){const t=await this.adSlotContainerItemView.render(n,d);e.appendChild(t)}t.appendChild(e),p.appendChild(t)}return a.appendChild(p),a.appendChild(this.getFooterElement(o,s)),d.observe(a,{freezeOnceVisible:!0,minimumVisibleTime:null!=(n=null==o?void 0:o.getSettings().getImpressionTrackTimeout())?n:200,threshold:null!=(r=null==o?void 0:o.getSettings().getImpressionMinimumVisibleThreshold())?r:.01,callback:async function(e,n){n&&await i.eventManager.dispatch(ot.AD_SLOT_CONTAINER_VIEW,new AdSlotContainerViewEvent(t,e))}}),a}getFooterElement(t,e){var n;const r=this.browserObjectModel.getDocument().createElement("div"),i=null==(n=t.getSettings().getLinkProperties())?void 0:n.brand;if(i){var o,s,a;const n=this.browserObjectModel.getDocument().createElement("span");n.className=this.stylesheetRenderer.getClass(t,"footerLogo"),n.innerHTML='<svg viewBox="0 0 94 20" version="1.1" xmlns="http://www.w3.org/2000/svg">\n  \x3c!-- Background shape around MD --\x3e\n  <path\n    d="M83.4905 0H65.1299C59.607 0 55.1299 4.47715 55.1299 10C55.1299 15.5228 59.607 20 65.1299 20H83.4905C89.0133 20 93.4905 15.5228 93.4905 10C93.4905 4.47715 89.0133 0 83.4905 0Z"\n    class="shape0"\n    fill="#a3afc5"\n  />\n\n  \x3c!-- Text group (Trend) --\x3e\n  <g transform="translate(0.000000, 0.000000)" fill="#878787" class="text">\n    <path d="M5.55556 15.4994V6.62497H8.66309V4.50073H0V6.62497H3.10753V15.4994H5.55556Z" class="shape1"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M16.3216 11.5662C17.713 11.0524 18.4092 9.91399 18.4092 8.15189C18.4092 6.87207 18.0453 5.94415 17.3185 5.3673C16.5917 4.79044 15.3749 4.50158 13.6699 4.50158H9.51091V15.4994H11.9589V11.9905H13.6537L16.0864 15.4994H19.0994L16.3216 11.5662ZM15.9134 8.15956C15.9134 8.75261 15.7618 9.18461 15.4584 9.45728C15.1551 9.73079 14.585 9.86627 13.7474 9.86627H11.9581V6.60963H13.7943C14.5791 6.60963 15.1287 6.71955 15.4422 6.94023C15.7558 7.16092 15.9134 7.56736 15.9134 8.15956Z" class="shape2"/>\n    <path d="M27.8877 4.50073V6.68802H22.4259V8.9537H27.3381V11.0464H22.4259V13.3283H28.0598V15.4994H19.9778V4.50073H27.8877Z" class="shape3"/>\n    <path d="M39.4223 4.50073H36.9743V11.5815L31.5908 4.50073H29.2996V15.4985H31.7476V8.6069L36.9734 15.4985H39.4214V4.50073H39.4223Z" class="shape4"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M49.5603 5.94075C50.6058 6.90019 51.1299 8.23539 51.1299 9.94467C51.1299 11.6539 50.6203 13.0079 49.5995 14.004C48.5796 15.0009 47.0228 15.4985 44.931 15.4985H41.1801V4.50073H45.0562C47.0126 4.50073 48.514 4.98045 49.5603 5.94075ZM47.7633 12.4779C48.3649 11.9113 48.6656 11.0882 48.6656 10.0077C48.6656 8.92728 48.3649 8.09565 47.7633 7.51368C47.1617 6.93171 46.2389 6.6403 44.9932 6.6403H43.6273V13.3274H45.1806C46.3003 13.3274 47.1609 13.0445 47.7624 12.4779H47.7633Z" class="shape5"/>\n  </g>\n\n  \x3c!-- MD group (white inside gray shape) --\x3e\n  <g transform="translate(55.000000, 0.000000)" fill="#FFFFFF">\n    <path d="M14.1125 10.5232L11.287 4.48107H7.97583V15.4797H10.4239V8.55656L13.3746 14.5671H14.8342L17.8003 8.55656V15.4797H20.2483V4.48107H16.9525L14.1125 10.5232Z" class="shape6"/>\n    <path d="M30.6232 5.92108C29.5769 4.96164 28.0755 4.48107 26.1192 4.48107H22.243V15.4789H25.9939C28.0866 15.4789 29.6434 14.9812 30.6624 13.9843C31.6824 12.9882 32.1928 11.6343 32.1928 9.925C32.1928 8.21573 31.6696 6.88053 30.6232 5.92108ZM28.8262 12.4582C28.2246 13.0249 27.364 13.3078 26.2444 13.3078H24.6902V6.62064H26.0553C27.3001 6.62064 28.2238 6.91205 28.8254 7.49402C29.4261 8.07599 29.7277 8.90762 29.7277 9.98806C29.7277 11.0685 29.4269 11.8916 28.8262 12.4582Z" class="shape7"/>\n  </g>\n</svg>\n';const c=Rn({href:i.href,target:null!=(o=i.target)?o:"_blank",rel:null!=(s=i.rel)?s:"",referrerPolicy:null!=(a=i.referrerPolicy)?a:"",className:this.stylesheetRenderer.getClass(t,"footerBrandLink")},e);c.insertAdjacentHTML("beforeend","<span>Powered by</span>"),c.appendChild(n);const l=this.browserObjectModel.getDocument().createElement("div");l.className=this.stylesheetRenderer.getClass(t,"footerLeft"),l.appendChild(c),r.appendChild(l)}const c=this.browserObjectModel.getDocument().createElement("div");c.className=this.stylesheetRenderer.getClass(t,"footerRight");const l=this.getSettingsElement(t,e);return c.appendChild(l),r.className=this.stylesheetRenderer.getClass(t,"footer"),r.appendChild(c),r}getSettingsElement(t,e){const n=this.browserObjectModel.getDocument(),r=n.createElement("div");r.className=this.stylesheetRenderer.getClass(t,"footerSettings");const i=`trendmd-links-${t.getId()}`,o=n.createElement("button");o.type="button",o.className=this.stylesheetRenderer.getClass(t,"footerCog"),o.innerHTML='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n  <g>\n    <path\n      d="M20 12c0-.568-.06-1.122-.174-1.656l1.834-1.612-2-3.464-2.322.786c-.82-.736-1.787-1.308-2.86-1.657L14 2h-4l-.48 2.396c-1.07.35-2.04.92-2.858 1.657L4.34 5.268l-2 3.464 1.834 1.612C4.06 10.878 4 11.432 4 12s.06 1.122.174 1.656L2.34 15.268l2 3.464 2.322-.786c.82.736 1.787 1.308 2.86 1.657L10 22h4l.48-2.396c1.07-.35 2.038-.92 2.858-1.657l2.322.786 2-3.464-1.834-1.613c.113-.535.174-1.09.174-1.657zm-8 4c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"\n      fill="#a3afc5"></path>\n  </g>\n</svg>\n',o.setAttribute("aria-expanded","false"),o.setAttribute("aria-controls",i),o.setAttribute("aria-label","Show TrendMD links");const s={privacyPolicy:{styleClass:"footerSettingsLinkPrivacyPolicy",text:"Privacy policy"},targetingSettings:{styleClass:"footerSettingsLinkTargeting",text:"Targeting settings"},termsOfUse:{styleClass:"footerSettingsLinkTerms",text:"Terms of use"},personalData:{styleClass:"footerSettingsLinkPersonalData",text:"Do not sell my personal information"}},a=n.createElement("ul");a.setAttribute("role","list");for(const[b,{styleClass:_,text:w}]of Object.entries(s)){var c,l,d,u;const r=null==(c=t.getSettings().getLinkProperties())?void 0:c[b];if(null==r||!r.href)continue;const i=Rn({href:r.href,target:null!=(l=r.target)?l:"_blank",rel:null!=(d=r.rel)?d:"",referrerPolicy:null!=(u=r.referrerPolicy)?u:"",textContent:w,className:this.stylesheetRenderer.getClass(t,_)},e),o=n.createElement("li");o.appendChild(i),o.setAttribute("role","listitem"),a.appendChild(o)}if(0===a.childElementCount)return r;const p=n.createElement("div");p.className=this.stylesheetRenderer.getClass(t,"footerSettingsModal"),p.id=i,p.setAttribute("role","group"),p.setAttribute("aria-label","TrendMD links"),p.hidden=!0,p.setAttribute("aria-hidden","true"),p.appendChild(a);let h=!1,f=!1;const g={capture:!0},v=t=>{if(h!==t&&(!t&&p.contains(n.activeElement)&&o.focus(),h=t,o.setAttribute("aria-expanded",String(t)),o.setAttribute("aria-label",t?"Hide TrendMD links":"Show TrendMD links"),p.hidden=!t,p.setAttribute("aria-hidden",t?"false":"true"),t?f||(n.addEventListener("pointerdown",m,g),f=!0):f&&(n.removeEventListener("pointerdown",m,g),f=!1),t&&n.activeElement===o)){const t=a.querySelector("a");null==t||t.focus()}},y=t=>{"Escape"===t.key&&h&&(t.preventDefault(),v(!1),o.focus())},m=t=>{r.contains(t.target)||v(!1)};return o.addEventListener("click",(()=>{v(!h)})),o.addEventListener("keydown",y),p.addEventListener("keydown",y),r.addEventListener("focusout",(t=>{const e=t.relatedTarget;r.contains(e)||v(!1)})),r.appendChild(o),r.appendChild(p),r}})||On)||On)||On)||On)||On)||On;class AdSlotContainerLifecycleEvent extends event_Event{constructor(t){super(),this.adSlotContainer=t}getAdSlotContainer(){return this.adSlotContainer}}class AdSlotContainerPreRenderEvent extends AdSlotContainerLifecycleEvent{constructor(...t){super(...t),this.items=[]}getItems(){return this.items}setItems(t){this.items=t}}class BackendEvent extends event_Event{constructor(t,e,n){super(),this.adSlotIdentifier=t,this.type=e,this.payload=n}getAdSlotIdentifier(){return this.adSlotIdentifier}getType(){return this.type}getPayload(){return this.payload}}var In;let Cn=M()(In=Reflect.metadata("design:type",Function)(In=Reflect.metadata("design:paramtypes",[void 0===lt?Object:lt,void 0===Tn?Object:Tn,void 0===bn?Object:bn])(In=Reflect.metadata("design:type",Function)(In=Reflect.metadata("design:paramtypes",[void 0===lt?Object:lt,void 0===Tn?Object:Tn,void 0===bn?Object:bn])(In=class AdSlotContainerRenderer{constructor(t,e,n){this.eventManager=t,this.adSlotContainerView=e,this.stylesheetRenderer=n}async render(t){if(!t||t.isRendered())return;const e=t.getAdSlot();if(!e)return;if((await this.eventManager.dispatch(ot.AD_SLOT_CONTAINER_PRE_RENDER,new AdSlotContainerPreRenderEvent(t))).isPropagationStopped())return;0===t.getItems().length&&await this.eventManager.dispatch(ot.BACKEND_EVENT,new BackendEvent(e.getId(),nt.AD_SLOT_NO_ITEMS));const n=t.getElement();n&&0!==t.getItems().length?(n.className=this.stylesheetRenderer.getClass(e,"outerContainer"),n.appendChild(await this.adSlotContainerView.render(t)),t.setIsRendered(!0),await this.eventManager.dispatch(ot.AD_SLOT_CONTAINER_POST_RENDER,new AdSlotContainerLifecycleEvent(t))):await this.eventManager.dispatch(ot.AD_SLOT_CONTAINER_POST_RENDER,new AdSlotContainerLifecycleEvent(t))}})||In)||In)||In)||In)||In;class AdSlotLifecycleEvent extends event_Event{constructor(t){super(),this.render=!0,this.adSlot=t}getAdSlot(){return this.adSlot}}class AdSlotContainer{constructor(){this.adSlot=void 0,this.element=void 0,this.rendered=!1,this.index=0,this.items=new Map}getElement(){var t;return null!=(t=this.element)?t:null}setElement(t){return this.element=t,this}getIndex(){return this.index}setIndex(t){return this.index=t,this}getAdSlot(){var t;return null!=(t=this.adSlot)?t:null}setAdSlot(t){return this.adSlot=t,this}isRendered(){return this.rendered}setIsRendered(t){return this.rendered=t,this.element&&(this.element.dataset.index=this.index.toString(),this.element.dataset.rendered=t?"true":"false",delete this.element.dataset.rendering),this}getItems(){return[...this.items.values()]}setItems(t){for(const e of t)this.addItem(e);return this}addItem(t){return this.items.has(t.getId())||(this.items.set(t.getId(),t),t.setAdSlotContainer(this)),this}removeItem(t){return this.hasItem(t)?(this.items.delete(t.getId())&&t.getAdSlotContainer()===this&&t.setAdSlotContainer(void 0),this):this}hasItem(t){return this.items.has(t.getId())}hasItems(){return this.items.size>0}}var xn;let Nn=M()(xn=class AdSlotContainerResolver{async resolve(t,e){if(!t.getSettings().getDatasetId())throw new Error("Dataset ID is not defined");const n=[];for(const r of e){if(r.getAttributeNames().includes("rendered")&&"true"===r.getAttribute("data-rendered"))continue;const t=new AdSlotContainer;t.setElement(r),n.push(t)}return n}})||xn;var Pn;let jn=M()(Pn=class Validator{validate(t){return!0}})||Pn;var kn;let Dn=M()(kn=function(t,e){return B("AdSlotConstraintValidator")(t,void 0,0)}(kn=Reflect.metadata("design:type",Function)(kn=Reflect.metadata("design:paramtypes",[Array])(kn=Reflect.metadata("design:type",Function)(kn=Reflect.metadata("design:paramtypes",[Array])(kn=class AdSlotRenderValidator extends jn{constructor(t){super(),this.adSlotConstraintValidators=t}validate(t){return!!t.getId()&&(!!super.validate(t)&&t.getConstraints().every((t=>this.adSlotConstraintValidators.filter((e=>e.supports(t))).every((e=>e.validate(t))))))}})||kn)||kn)||kn)||kn)||kn)||kn;var Zn;let Ln=M()(Zn=function(t,e){return U()(t,void 0,6)}(Zn=Reflect.metadata("design:type",Function)(Zn=Reflect.metadata("design:paramtypes",[void 0===lt?Object:lt,void 0===Nn?Object:Nn,void 0===Dn?Object:Dn,void 0===Cn?Object:Cn,void 0===bn?Object:bn,void 0===wn?Object:wn,void 0===at?Object:at])(Zn=Reflect.metadata("design:type",Function)(Zn=Reflect.metadata("design:paramtypes",[void 0===lt?Object:lt,void 0===Nn?Object:Nn,void 0===Dn?Object:Dn,void 0===Cn?Object:Cn,void 0===bn?Object:bn,void 0===wn?Object:wn,void 0===at?Object:at])(Zn=class AdSlotRenderer{constructor(t,e,n,r,i,o,s){this.mutationObservers=new Map,this.observedElements=new Set,this.eventManager=t,this.adSlotContainerResolver=e,this.adSlotRenderValidator=n,this.adSlotContainerRenderer=r,this.stylesheetRenderer=i,this.browserObjectModel=o,this.logger=s}async render(t){var e=this;if(!t)return;const n=await this.eventManager.dispatch(ot.AD_SLOT_PRE_RENDER,new AdSlotLifecycleEvent(t));if(!this.adSlotRenderValidator.validate(t)||n.isPropagationStopped())return;const r=t.getSettings().getDatasetId();var i;if(!r)return void(null==(i=this.logger)||i.error("Dataset ID is not defined"));await this.stylesheetRenderer.render(t);const o=[];if(this.browserObjectModel.getDocument().querySelectorAll(`ins[data-${r}="${t.getId()}"]`).forEach((t=>o.push(t))),await this.renderContainers(t,o),await this.eventManager.dispatch(ot.AD_SLOT_POST_RENDER,new AdSlotLifecycleEvent(t)),this.mutationObservers.has(t.getId()))return;const s=new MutationObserver((n=>{n.forEach((n=>{n.addedNodes.length>0&&n.addedNodes.forEach((async function(n){if(!(n instanceof Element))return;let i=n;var o;("ins"!==i.tagName.toLowerCase()&&(i=i.querySelector(`ins[data-${r}="${t.getId()}"]`)),!i||"ins"!==i.tagName.toLowerCase()||!i.hasAttribute(`data-${r}`)||i.getAttribute(`data-${r}`)!==t.getId()||i.hasAttribute("data-rendered")&&"true"===i.getAttribute("data-rendered")||i.hasAttribute("data-rendering")&&"true"===i.getAttribute("data-rendering")||i.childElementCount>0||e.observedElements.has(i))?null==(o=e.logger)||o.debug("Skipping node",i):(e.observedElements.add(i),i.setAttribute("data-rendering","true"),await e.renderContainers(t,[i]))}))}))}));s.observe(document.body,{childList:!0,subtree:!0}),this.mutationObservers.set(t.getId(),s)}async renderContainers(t,e){const n=await this.adSlotContainerResolver.resolve(t,e);for(const r of n)t.addContainer(r),await this.adSlotContainerRenderer.render(r)}})||Zn)||Zn)||Zn)||Zn)||Zn)||Zn;class AdSetLifecycleEvent extends event_Event{constructor(t){super(),this.render=!0,this.adSet=t}getAdSet(){return this.adSet}}var Mn;let Fn=M()(Mn=Reflect.metadata("design:type",Function)(Mn=Reflect.metadata("design:paramtypes",[void 0===lt?Object:lt,void 0===Ln?Object:Ln])(Mn=Reflect.metadata("design:type",Function)(Mn=Reflect.metadata("design:paramtypes",[void 0===lt?Object:lt,void 0===Ln?Object:Ln])(Mn=class AdSetRenderer{constructor(t,e){this.eventManager=t,this.adSlotRenderer=e}async render(t){if(!t)return;const e=await this.eventManager.dispatch(ot.AD_SET_PRE_RENDER,new AdSetLifecycleEvent(t));if(!e.isPropagationStopped()){for(const t of e.getAdSet().getAdSlots())await this.adSlotRenderer.render(t);await this.eventManager.dispatch(ot.AD_SET_POST_RENDER,new AdSetLifecycleEvent(t))}}})||Mn)||Mn)||Mn)||Mn)||Mn;class AdSlot{constructor(){this.id=void 0,this.creativeType=void 0,this.adSet=void 0,this.settings=void 0,this.containers=new Set,this.constraints=new Set}getId(){if(void 0===this.id)throw new Error(`Attempt to access "id" of ${this.constructor.name} before initialization`);return this.id}getAdSet(){var t;return null!=(t=this.adSet)?t:null}setAdSet(t){return this.adSet=t,this}getContainers(){return[...this.containers.values()]}addContainer(t){return this.containers.has(t)||(this.containers.add(t),t.setAdSlot(this),t.setIndex(this.containers.size-1)),this}removeContainer(t){return this.hasContainer(t)?(this.containers.delete(t)&&t.getAdSlot()===this&&t.setAdSlot(void 0),this):this}hasContainer(t){return this.containers.has(t)}getCreativeType(){if(void 0===this.creativeType)throw new Error(`Attempt to access "creativeType" of ${this.constructor.name} before initialization`);return this.creativeType}getSettings(){if(void 0===this.settings)throw new Error(`Attempt to access "settings" of ${this.constructor.name} before initialization`);return this.settings}setSettings(t){return this.settings=t,t.setAdSlot(this),this}getConstraints(){return[...this.constraints]}addConstraint(t){return this.constraints.has(t)||(this.constraints.add(t),t.setAdSlot(this)),this}removeConstraint(t){return this.hasConstraint(t)?(this.constraints.delete(t)&&t.getAdSlot()===this&&t.setAdSlot(void 0),this):this}hasConstraint(t){return this.constraints.has(t)}}class AdSlotConstraint{constructor(){this.adSlot=void 0,this.type=void 0,this.constraint=void 0}getAdSlot(){var t;return null!=(t=this.adSlot)?t:null}setAdSlot(t){return this.adSlot=t,this}getType(){var t;return null!=(t=this.type)?t:null}getConstraint(){var t;return null!=(t=this.constraint)?t:null}}class AdSlotSettings{constructor(){this.adSlot=void 0,this.positionSelector=void 0,this.maxNumberOfColumns=void 0,this.format=void 0,this.datasetId=void 0,this.impressionTrackTimeout=void 0,this.itemImpressionTrackTimeout=void 0,this.impressionMinimumVisibleThreshold=void 0,this.itemImpressionMinimumVisibleThreshold=void 0,this.headingText=void 0,this.style=void 0,this.privacyPolicyUrl=void 0,this.linkProperties=void 0}getAdSlot(){var t;return null!=(t=this.adSlot)?t:null}setAdSlot(t){return this.adSlot=t,this}getPositionSelector(){var t;return null!=(t=this.positionSelector)?t:null}getMaxNumberOfColumns(){var t;return null!=(t=this.maxNumberOfColumns)?t:null}getFormat(){var t;return null!=(t=this.format)?t:tt.AUTO}getDatasetId(){var t;return null!=(t=this.datasetId)?t:null}getImpressionTrackTimeout(){var t;return null!=(t=this.impressionTrackTimeout)?t:null}getItemImpressionTrackTimeout(){var t;return null!=(t=this.itemImpressionTrackTimeout)?t:null}getImpressionMinimumVisibleThreshold(){var t;return null!=(t=this.impressionMinimumVisibleThreshold)?t:null}getItemImpressionMinimumVisibleThreshold(){var t;return null!=(t=this.itemImpressionMinimumVisibleThreshold)?t:null}getHeadingText(){var t;return null!=(t=this.headingText)?t:null}getStyle(){var t;return null!=(t=this.style)?t:{}}getPrivacyPolicyUrl(){var t;return null!=(t=this.privacyPolicyUrl)?t:null}getLinkProperties(){var t;return null!=(t=this.linkProperties)?t:{}}}const Un=(t,e)=>{const n=Object.assign({},t);for(const r in e)"object"==typeof e[r]&&null!==e[r]?"object"==typeof n[r]&&null!==n[r]?n[r]=Un(n[r],e[r]):n[r]=Object.assign({},e[r]):n[r]=e[r];return n},Bn=(t,e)=>{for(const[n,r]of Object.entries(e)){const e=`set${n.charAt(0).toUpperCase()}${n.slice(1)}`,i=`get${n.charAt(0).toUpperCase()}${n.slice(1)}`,o=t[e],s="function"==typeof o?o:e=>{Object.defineProperty(t,n,{value:e})};(Object.hasOwn(t,n)||"function"==typeof t[i])&&s(r)}};var Vn;let Hn=M()(Vn=Reflect.metadata("design:type",Function)(Vn=Reflect.metadata("design:paramtypes",[void 0===H?Object:H])(Vn=Reflect.metadata("design:type",Function)(Vn=Reflect.metadata("design:paramtypes",[void 0===H?Object:H])(Vn=class AdSlotResolver{constructor(t){this.applicationContext=t}async resolve(t){var e,n;const r=new AdSlot;Bn(r,{id:t.identifier,creativeType:t.creativeType}),t.settings.datasetId=null!=(e=null!=(n=t.settings.datasetId)?n:this.applicationContext.getApplicationConfig().datasetId)?e:"revops-suggestions";const i=new AdSlotSettings;Bn(i,t.settings),r.setSettings(i);for(const o of t.constraints){const t=new AdSlotConstraint;Bn(t,o),r.addConstraint(t)}return r}})||Vn)||Vn)||Vn)||Vn)||Vn;class EventQueue{constructor(t){this.queue=new Set,this.options={maxQueueSize:10,timeout:5e3,callback:()=>{}},this.timer=null,this.options=Object.assign({},this.options,t)}push(t){this.queue.add(t),1===this.queue.size&&(this.timer=setTimeout((()=>{this.fireEvent()}),this.options.timeout)),this.queue.size>=this.options.maxQueueSize&&this.fireEvent()}getItems(){return[...this.queue]}fireEvent(){this.options.callback(this.getItems()),this.queue.clear(),this.timer&&(clearTimeout(this.timer),this.timer=null)}}var $n,zn;!function(t){t.assertEqual=t=>t,t.assertIs=function(t){},t.assertNever=function(t){throw new Error},t.arrayToEnum=t=>{const e={};for(const n of t)e[n]=n;return e},t.getValidEnumValues=e=>{const n=t.objectKeys(e).filter((t=>"number"!=typeof e[e[t]])),r={};for(const t of n)r[t]=e[t];return t.objectValues(r)},t.objectValues=e=>t.objectKeys(e).map((function(t){return e[t]})),t.objectKeys="function"==typeof Object.keys?t=>Object.keys(t):t=>{const e=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e},t.find=(t,e)=>{for(const n of t)if(e(n))return n},t.isInteger="function"==typeof Number.isInteger?t=>Number.isInteger(t):t=>"number"==typeof t&&isFinite(t)&&Math.floor(t)===t,t.joinValues=function(t,e=" | "){return t.map((t=>"string"==typeof t?`'${t}'`:t)).join(e)},t.jsonStringifyReplacer=(t,e)=>"bigint"==typeof e?e.toString():e}($n||($n={})),function(t){t.mergeShapes=(t,e)=>({...t,...e})}(zn||(zn={}));const qn=$n.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Wn=t=>{switch(typeof t){case"undefined":return qn.undefined;case"string":return qn.string;case"number":return isNaN(t)?qn.nan:qn.number;case"boolean":return qn.boolean;case"function":return qn.function;case"bigint":return qn.bigint;case"symbol":return qn.symbol;case"object":return Array.isArray(t)?qn.array:null===t?qn.null:t.then&&"function"==typeof t.then&&t.catch&&"function"==typeof t.catch?qn.promise:"undefined"!=typeof Map&&t instanceof Map?qn.map:"undefined"!=typeof Set&&t instanceof Set?qn.set:"undefined"!=typeof Date&&t instanceof Date?qn.date:qn.object;default:return qn.unknown}},Gn=$n.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ZodError extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=t=>{this.issues=[...this.issues,t]},this.addIssues=(t=[])=>{this.issues=[...this.issues,...t]};const e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}format(t){const e=t||function(t){return t.message},n={_errors:[]},r=t=>{for(const i of t.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(e(i));else{let t=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(t[n]=t[n]||{_errors:[]},t[n]._errors.push(e(i))):t[n]=t[n]||{_errors:[]},t=t[n],r++}}};return r(this),n}static assert(t){if(!(t instanceof ZodError))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,$n.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(t=(t=>t.message)){const e={},n=[];for(const r of this.issues)r.path.length>0?(e[r.path[0]]=e[r.path[0]]||[],e[r.path[0]].push(t(r))):n.push(t(r));return{formErrors:n,fieldErrors:e}}get formErrors(){return this.flatten()}}ZodError.create=t=>new ZodError(t);const Kn=(t,e)=>{let n;switch(t.code){case Gn.invalid_type:n=t.received===qn.undefined?"Required":`Expected ${t.expected}, received ${t.received}`;break;case Gn.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,$n.jsonStringifyReplacer)}`;break;case Gn.unrecognized_keys:n=`Unrecognized key(s) in object: ${$n.joinValues(t.keys,", ")}`;break;case Gn.invalid_union:n="Invalid input";break;case Gn.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${$n.joinValues(t.options)}`;break;case Gn.invalid_enum_value:n=`Invalid enum value. Expected ${$n.joinValues(t.options)}, received '${t.received}'`;break;case Gn.invalid_arguments:n="Invalid function arguments";break;case Gn.invalid_return_type:n="Invalid function return type";break;case Gn.invalid_date:n="Invalid date";break;case Gn.invalid_string:"object"==typeof t.validation?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,"number"==typeof t.validation.position&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:$n.assertNever(t.validation):n="regex"!==t.validation?`Invalid ${t.validation}`:"Invalid";break;case Gn.too_small:n="array"===t.type?`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:"string"===t.type?`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:"number"===t.type?`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:"date"===t.type?`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:"Invalid input";break;case Gn.too_big:n="array"===t.type?`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:"string"===t.type?`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:"number"===t.type?`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:"bigint"===t.type?`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:"date"===t.type?`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:"Invalid input";break;case Gn.custom:n="Invalid input";break;case Gn.invalid_intersection_types:n="Intersection results could not be merged";break;case Gn.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Gn.not_finite:n="Number must be finite";break;default:n=e.defaultError,$n.assertNever(t)}return{message:n}};let Yn=Kn;function Xn(){return Yn}const Qn=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,o=[...n,...i.path||[]],s={...i,path:o};if(void 0!==i.message)return{...i,path:o,message:i.message};let a="";const c=r.filter((t=>!!t)).slice().reverse();for(const l of c)a=l(s,{data:e,defaultError:a}).message;return{...i,path:o,message:a}};function Jn(t,e){const n=Xn(),r=Qn({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Kn?void 0:Kn].filter((t=>!!t))});t.common.issues.push(r)}class ParseStatus{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(t,e){const n=[];for(const r of e){if("aborted"===r.status)return tr;"dirty"===r.status&&t.dirty(),n.push(r.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,e){const n=[];for(const r of e){const t=await r.key,e=await r.value;n.push({key:t,value:e})}return ParseStatus.mergeObjectSync(t,n)}static mergeObjectSync(t,e){const n={};for(const r of e){const{key:e,value:i}=r;if("aborted"===e.status)return tr;if("aborted"===i.status)return tr;"dirty"===e.status&&t.dirty(),"dirty"===i.status&&t.dirty(),"__proto__"===e.value||void 0===i.value&&!r.alwaysSet||(n[e.value]=i.value)}return{status:t.value,value:n}}}const tr=Object.freeze({status:"aborted"}),er=t=>({status:"dirty",value:t}),nr=t=>({status:"valid",value:t}),rr=t=>"aborted"===t.status,ir=t=>"dirty"===t.status,or=t=>"valid"===t.status,sr=t=>"undefined"!=typeof Promise&&t instanceof Promise;function ar(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function cr(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}var lr,dr,ur;"function"==typeof SuppressedError&&SuppressedError,function(t){t.errToObj=t=>"string"==typeof t?{message:t}:t||{},t.toString=t=>"string"==typeof t?t:null==t?void 0:t.message}(lr||(lr={}));class ParseInputLazyPath{constructor(t,e,n,r){this._cachedPath=[],this.parent=t,this.data=e,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const pr=(t,e)=>{if(or(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const e=new ZodError(t.common.issues);return this._error=e,this._error}}};function hr(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(e)return{errorMap:e,description:i};return{errorMap:(e,i)=>{var o,s;const{message:a}=t;return"invalid_enum_value"===e.code?{message:null!=a?a:i.defaultError}:void 0===i.data?{message:null!==(o=null!=a?a:r)&&void 0!==o?o:i.defaultError}:"invalid_type"!==e.code?{message:i.defaultError}:{message:null!==(s=null!=a?a:n)&&void 0!==s?s:i.defaultError}},description:i}}class ZodType{get description(){return this._def.description}_getType(t){return Wn(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:Wn(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ParseStatus,ctx:{common:t.parent.common,data:t.data,parsedType:Wn(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const e=this._parse(t);if(sr(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){const e=this._parse(t);return Promise.resolve(e)}parse(t,e){const n=this.safeParse(t,e);if(n.success)return n.data;throw n.error}safeParse(t,e){var n;const r={common:{issues:[],async:null!==(n=null==e?void 0:e.async)&&void 0!==n&&n,contextualErrorMap:null==e?void 0:e.errorMap},path:(null==e?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Wn(t)},i=this._parseSync({data:t,path:r.path,parent:r});return pr(r,i)}"~validate"(t){var e,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Wn(t)};if(!this["~standard"].async)try{const e=this._parseSync({data:t,path:[],parent:r});return or(e)?{value:e.value}:{issues:r.common.issues}}catch(i){(null===(n=null===(e=null==i?void 0:i.message)||void 0===e?void 0:e.toLowerCase())||void 0===n?void 0:n.includes("encountered"))&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then((t=>or(t)?{value:t.value}:{issues:r.common.issues}))}async parseAsync(t,e){const n=await this.safeParseAsync(t,e);if(n.success)return n.data;throw n.error}async safeParseAsync(t,e){const n={common:{issues:[],contextualErrorMap:null==e?void 0:e.errorMap,async:!0},path:(null==e?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Wn(t)},r=this._parse({data:t,path:n.path,parent:n}),i=await(sr(r)?r:Promise.resolve(r));return pr(n,i)}refine(t,e){const n=t=>"string"==typeof e||void 0===e?{message:e}:"function"==typeof e?e(t):e;return this._refinement(((e,r)=>{const i=t(e),o=()=>r.addIssue({code:Gn.custom,...n(e)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((t=>!!t||(o(),!1))):!!i||(o(),!1)}))}refinement(t,e){return this._refinement(((n,r)=>!!t(n)||(r.addIssue("function"==typeof e?e(n,r):e),!1)))}_refinement(t){return new ZodEffects({schema:this,typeName:$r.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(t){return ZodUnion.create([this,t],this._def)}and(t){return ZodIntersection.create(this,t,this._def)}transform(t){return new ZodEffects({...hr(this._def),schema:this,typeName:$r.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const e="function"==typeof t?t:()=>t;return new ZodDefault({...hr(this._def),innerType:this,defaultValue:e,typeName:$r.ZodDefault})}brand(){return new ZodBranded({typeName:$r.ZodBranded,type:this,...hr(this._def)})}catch(t){const e="function"==typeof t?t:()=>t;return new ZodCatch({...hr(this._def),innerType:this,catchValue:e,typeName:$r.ZodCatch})}describe(t){return new(0,this.constructor)({...this._def,description:t})}pipe(t){return ZodPipeline.create(this,t)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const fr=/^c[^\s-]{8,}$/i,gr=/^[0-9a-z]+$/,vr=/^[0-9A-HJKMNP-TV-Z]{26}$/i,yr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,mr=/^[a-z0-9_-]{21}$/i,br=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,_r=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,wr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Sr;const Ar=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Er=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Rr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Or=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Tr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ir=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Cr="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",xr=new RegExp(`^${Cr}$`);function Nr(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:null==t.precision&&(e=`${e}(\\.\\d+)?`),e}function Pr(t){let e=`${Cr}T${Nr(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function jr(t,e){if(!br.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return"object"==typeof i&&null!==i&&(!(!i.typ||!i.alg)&&(!e||i.alg===e))}catch(n){return!1}}function kr(t,e){return!("v4"!==e&&e||!Er.test(t))||!("v6"!==e&&e||!Or.test(t))}class ZodString extends ZodType{_parse(t){this._def.coerce&&(t.data=String(t.data));if(this._getType(t)!==qn.string){const e=this._getOrReturnCtx(t);return Jn(e,{code:Gn.invalid_type,expected:qn.string,received:e.parsedType}),tr}const e=new ParseStatus;let n;for(const s of this._def.checks)if("min"===s.kind)t.data.length<s.value&&(n=this._getOrReturnCtx(t,n),Jn(n,{code:Gn.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),e.dirty());else if("max"===s.kind)t.data.length>s.value&&(n=this._getOrReturnCtx(t,n),Jn(n,{code:Gn.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),e.dirty());else if("length"===s.kind){const r=t.data.length>s.value,i=t.data.length<s.value;(r||i)&&(n=this._getOrReturnCtx(t,n),r?Jn(n,{code:Gn.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):i&&Jn(n,{code:Gn.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),e.dirty())}else if("email"===s.kind)wr.test(t.data)||(n=this._getOrReturnCtx(t,n),Jn(n,{validation:"email",code:Gn.invalid_string,message:s.message}),e.dirty());else if("emoji"===s.kind)Sr||(Sr=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Sr.test(t.data)||(n=this._getOrReturnCtx(t,n),Jn(n,{validation:"emoji",code:Gn.invalid_string,message:s.message}),e.dirty());else if("uuid"===s.kind)yr.test(t.data)||(n=this._getOrReturnCtx(t,n),Jn(n,{validation:"uuid",code:Gn.invalid_string,message:s.message}),e.dirty());else if("nanoid"===s.kind)mr.test(t.data)||(n=this._getOrReturnCtx(t,n),Jn(n,{validation:"nanoid",code:Gn.invalid_string,message:s.message}),e.dirty());else if("cuid"===s.kind)fr.test(t.data)||(n=this._getOrReturnCtx(t,n),Jn(n,{validation:"cuid",code:Gn.invalid_string,message:s.message}),e.dirty());else if("cuid2"===s.kind)gr.test(t.data)||(n=this._getOrReturnCtx(t,n),Jn(n,{validation:"cuid2",code:Gn.invalid_string,message:s.message}),e.dirty());else if("ulid"===s.kind)vr.test(t.data)||(n=this._getOrReturnCtx(t,n),Jn(n,{validation:"ulid",code:Gn.invalid_string,message:s.message}),e.dirty());else if("url"===s.kind)try{new URL(t.data)}catch(o){n=this._getOrReturnCtx(t,n),Jn(n,{validation:"url",code:Gn.invalid_string,message:s.message}),e.dirty()}else if("regex"===s.kind){s.regex.lastIndex=0;s.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),Jn(n,{validation:"regex",code:Gn.invalid_string,message:s.message}),e.dirty())}else if("trim"===s.kind)t.data=t.data.trim();else if("includes"===s.kind)t.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(t,n),Jn(n,{code:Gn.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),e.dirty());else if("toLowerCase"===s.kind)t.data=t.data.toLowerCase();else if("toUpperCase"===s.kind)t.data=t.data.toUpperCase();else if("startsWith"===s.kind)t.data.startsWith(s.value)||(n=this._getOrReturnCtx(t,n),Jn(n,{code:Gn.invalid_string,validation:{startsWith:s.value},message:s.message}),e.dirty());else if("endsWith"===s.kind)t.data.endsWith(s.value)||(n=this._getOrReturnCtx(t,n),Jn(n,{code:Gn.invalid_string,validation:{endsWith:s.value},message:s.message}),e.dirty());else if("datetime"===s.kind){Pr(s).test(t.data)||(n=this._getOrReturnCtx(t,n),Jn(n,{code:Gn.invalid_string,validation:"datetime",message:s.message}),e.dirty())}else if("date"===s.kind){xr.test(t.data)||(n=this._getOrReturnCtx(t,n),Jn(n,{code:Gn.invalid_string,validation:"date",message:s.message}),e.dirty())}else if("time"===s.kind){new RegExp(`^${Nr(s)}$`).test(t.data)||(n=this._getOrReturnCtx(t,n),Jn(n,{code:Gn.invalid_string,validation:"time",message:s.message}),e.dirty())}else"duration"===s.kind?_r.test(t.data)||(n=this._getOrReturnCtx(t,n),Jn(n,{validation:"duration",code:Gn.invalid_string,message:s.message}),e.dirty()):"ip"===s.kind?(r=t.data,("v4"!==(i=s.version)&&i||!Ar.test(r))&&("v6"!==i&&i||!Rr.test(r))&&(n=this._getOrReturnCtx(t,n),Jn(n,{validation:"ip",code:Gn.invalid_string,message:s.message}),e.dirty())):"jwt"===s.kind?jr(t.data,s.alg)||(n=this._getOrReturnCtx(t,n),Jn(n,{validation:"jwt",code:Gn.invalid_string,message:s.message}),e.dirty()):"cidr"===s.kind?kr(t.data,s.version)||(n=this._getOrReturnCtx(t,n),Jn(n,{validation:"cidr",code:Gn.invalid_string,message:s.message}),e.dirty()):"base64"===s.kind?Tr.test(t.data)||(n=this._getOrReturnCtx(t,n),Jn(n,{validation:"base64",code:Gn.invalid_string,message:s.message}),e.dirty()):"base64url"===s.kind?Ir.test(t.data)||(n=this._getOrReturnCtx(t,n),Jn(n,{validation:"base64url",code:Gn.invalid_string,message:s.message}),e.dirty()):$n.assertNever(s);var r,i;return{status:e.value,value:t.data}}_regex(t,e,n){return this.refinement((e=>t.test(e)),{validation:e,code:Gn.invalid_string,...lr.errToObj(n)})}_addCheck(t){return new ZodString({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...lr.errToObj(t)})}url(t){return this._addCheck({kind:"url",...lr.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...lr.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...lr.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...lr.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...lr.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...lr.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...lr.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...lr.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...lr.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...lr.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...lr.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...lr.errToObj(t)})}datetime(t){var e,n;return"string"==typeof t?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:void 0===(null==t?void 0:t.precision)?null:null==t?void 0:t.precision,offset:null!==(e=null==t?void 0:t.offset)&&void 0!==e&&e,local:null!==(n=null==t?void 0:t.local)&&void 0!==n&&n,...lr.errToObj(null==t?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return"string"==typeof t?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:void 0===(null==t?void 0:t.precision)?null:null==t?void 0:t.precision,...lr.errToObj(null==t?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...lr.errToObj(t)})}regex(t,e){return this._addCheck({kind:"regex",regex:t,...lr.errToObj(e)})}includes(t,e){return this._addCheck({kind:"includes",value:t,position:null==e?void 0:e.position,...lr.errToObj(null==e?void 0:e.message)})}startsWith(t,e){return this._addCheck({kind:"startsWith",value:t,...lr.errToObj(e)})}endsWith(t,e){return this._addCheck({kind:"endsWith",value:t,...lr.errToObj(e)})}min(t,e){return this._addCheck({kind:"min",value:t,...lr.errToObj(e)})}max(t,e){return this._addCheck({kind:"max",value:t,...lr.errToObj(e)})}length(t,e){return this._addCheck({kind:"length",value:t,...lr.errToObj(e)})}nonempty(t){return this.min(1,lr.errToObj(t))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((t=>"datetime"===t.kind))}get isDate(){return!!this._def.checks.find((t=>"date"===t.kind))}get isTime(){return!!this._def.checks.find((t=>"time"===t.kind))}get isDuration(){return!!this._def.checks.find((t=>"duration"===t.kind))}get isEmail(){return!!this._def.checks.find((t=>"email"===t.kind))}get isURL(){return!!this._def.checks.find((t=>"url"===t.kind))}get isEmoji(){return!!this._def.checks.find((t=>"emoji"===t.kind))}get isUUID(){return!!this._def.checks.find((t=>"uuid"===t.kind))}get isNANOID(){return!!this._def.checks.find((t=>"nanoid"===t.kind))}get isCUID(){return!!this._def.checks.find((t=>"cuid"===t.kind))}get isCUID2(){return!!this._def.checks.find((t=>"cuid2"===t.kind))}get isULID(){return!!this._def.checks.find((t=>"ulid"===t.kind))}get isIP(){return!!this._def.checks.find((t=>"ip"===t.kind))}get isCIDR(){return!!this._def.checks.find((t=>"cidr"===t.kind))}get isBase64(){return!!this._def.checks.find((t=>"base64"===t.kind))}get isBase64url(){return!!this._def.checks.find((t=>"base64url"===t.kind))}get minLength(){let t=null;for(const e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(const e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}}function Dr(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r;return parseInt(t.toFixed(i).replace(".",""))%parseInt(e.toFixed(i).replace(".",""))/Math.pow(10,i)}ZodString.create=t=>{var e;return new ZodString({checks:[],typeName:$r.ZodString,coerce:null!==(e=null==t?void 0:t.coerce)&&void 0!==e&&e,...hr(t)})};class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){this._def.coerce&&(t.data=Number(t.data));if(this._getType(t)!==qn.number){const e=this._getOrReturnCtx(t);return Jn(e,{code:Gn.invalid_type,expected:qn.number,received:e.parsedType}),tr}let e;const n=new ParseStatus;for(const r of this._def.checks)if("int"===r.kind)$n.isInteger(t.data)||(e=this._getOrReturnCtx(t,e),Jn(e,{code:Gn.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?t.data<r.value:t.data<=r.value)&&(e=this._getOrReturnCtx(t,e),Jn(e,{code:Gn.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?t.data>r.value:t.data>=r.value)&&(e=this._getOrReturnCtx(t,e),Jn(e,{code:Gn.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==Dr(t.data,r.value)&&(e=this._getOrReturnCtx(t,e),Jn(e,{code:Gn.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(t.data)||(e=this._getOrReturnCtx(t,e),Jn(e,{code:Gn.not_finite,message:r.message}),n.dirty()):$n.assertNever(r);return{status:n.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,lr.toString(e))}gt(t,e){return this.setLimit("min",t,!1,lr.toString(e))}lte(t,e){return this.setLimit("max",t,!0,lr.toString(e))}lt(t,e){return this.setLimit("max",t,!1,lr.toString(e))}setLimit(t,e,n,r){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:n,message:lr.toString(r)}]})}_addCheck(t){return new ZodNumber({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:lr.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:lr.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:lr.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:lr.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:lr.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:lr.toString(e)})}finite(t){return this._addCheck({kind:"finite",message:lr.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:lr.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:lr.toString(t)})}get minValue(){let t=null;for(const e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find((t=>"int"===t.kind||"multipleOf"===t.kind&&$n.isInteger(t.value)))}get isFinite(){let t=null,e=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===e||n.value>e)&&(e=n.value):"max"===n.kind&&(null===t||n.value<t)&&(t=n.value)}return Number.isFinite(e)&&Number.isFinite(t)}}ZodNumber.create=t=>new ZodNumber({checks:[],typeName:$r.ZodNumber,coerce:(null==t?void 0:t.coerce)||!1,...hr(t)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch(r){return this._getInvalidInput(t)}if(this._getType(t)!==qn.bigint)return this._getInvalidInput(t);let e;const n=new ParseStatus;for(const i of this._def.checks)if("min"===i.kind){(i.inclusive?t.data<i.value:t.data<=i.value)&&(e=this._getOrReturnCtx(t,e),Jn(e,{code:Gn.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty())}else if("max"===i.kind){(i.inclusive?t.data>i.value:t.data>=i.value)&&(e=this._getOrReturnCtx(t,e),Jn(e,{code:Gn.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty())}else"multipleOf"===i.kind?t.data%i.value!==BigInt(0)&&(e=this._getOrReturnCtx(t,e),Jn(e,{code:Gn.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):$n.assertNever(i);return{status:n.value,value:t.data}}_getInvalidInput(t){const e=this._getOrReturnCtx(t);return Jn(e,{code:Gn.invalid_type,expected:qn.bigint,received:e.parsedType}),tr}gte(t,e){return this.setLimit("min",t,!0,lr.toString(e))}gt(t,e){return this.setLimit("min",t,!1,lr.toString(e))}lte(t,e){return this.setLimit("max",t,!0,lr.toString(e))}lt(t,e){return this.setLimit("max",t,!1,lr.toString(e))}setLimit(t,e,n,r){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:n,message:lr.toString(r)}]})}_addCheck(t){return new ZodBigInt({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:lr.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:lr.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:lr.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:lr.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:lr.toString(e)})}get minValue(){let t=null;for(const e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}}ZodBigInt.create=t=>{var e;return new ZodBigInt({checks:[],typeName:$r.ZodBigInt,coerce:null!==(e=null==t?void 0:t.coerce)&&void 0!==e&&e,...hr(t)})};class ZodBoolean extends ZodType{_parse(t){this._def.coerce&&(t.data=Boolean(t.data));if(this._getType(t)!==qn.boolean){const e=this._getOrReturnCtx(t);return Jn(e,{code:Gn.invalid_type,expected:qn.boolean,received:e.parsedType}),tr}return nr(t.data)}}ZodBoolean.create=t=>new ZodBoolean({typeName:$r.ZodBoolean,coerce:(null==t?void 0:t.coerce)||!1,...hr(t)});class ZodDate extends ZodType{_parse(t){this._def.coerce&&(t.data=new Date(t.data));if(this._getType(t)!==qn.date){const e=this._getOrReturnCtx(t);return Jn(e,{code:Gn.invalid_type,expected:qn.date,received:e.parsedType}),tr}if(isNaN(t.data.getTime())){return Jn(this._getOrReturnCtx(t),{code:Gn.invalid_date}),tr}const e=new ParseStatus;let n;for(const r of this._def.checks)"min"===r.kind?t.data.getTime()<r.value&&(n=this._getOrReturnCtx(t,n),Jn(n,{code:Gn.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),e.dirty()):"max"===r.kind?t.data.getTime()>r.value&&(n=this._getOrReturnCtx(t,n),Jn(n,{code:Gn.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),e.dirty()):$n.assertNever(r);return{status:e.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ZodDate({...this._def,checks:[...this._def.checks,t]})}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:lr.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:lr.toString(e)})}get minDate(){let t=null;for(const e of this._def.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return null!=t?new Date(t):null}get maxDate(){let t=null;for(const e of this._def.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return null!=t?new Date(t):null}}ZodDate.create=t=>new ZodDate({checks:[],coerce:(null==t?void 0:t.coerce)||!1,typeName:$r.ZodDate,...hr(t)});class ZodSymbol extends ZodType{_parse(t){if(this._getType(t)!==qn.symbol){const e=this._getOrReturnCtx(t);return Jn(e,{code:Gn.invalid_type,expected:qn.symbol,received:e.parsedType}),tr}return nr(t.data)}}ZodSymbol.create=t=>new ZodSymbol({typeName:$r.ZodSymbol,...hr(t)});class ZodUndefined extends ZodType{_parse(t){if(this._getType(t)!==qn.undefined){const e=this._getOrReturnCtx(t);return Jn(e,{code:Gn.invalid_type,expected:qn.undefined,received:e.parsedType}),tr}return nr(t.data)}}ZodUndefined.create=t=>new ZodUndefined({typeName:$r.ZodUndefined,...hr(t)});class ZodNull extends ZodType{_parse(t){if(this._getType(t)!==qn.null){const e=this._getOrReturnCtx(t);return Jn(e,{code:Gn.invalid_type,expected:qn.null,received:e.parsedType}),tr}return nr(t.data)}}ZodNull.create=t=>new ZodNull({typeName:$r.ZodNull,...hr(t)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(t){return nr(t.data)}}ZodAny.create=t=>new ZodAny({typeName:$r.ZodAny,...hr(t)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(t){return nr(t.data)}}ZodUnknown.create=t=>new ZodUnknown({typeName:$r.ZodUnknown,...hr(t)});class ZodNever extends ZodType{_parse(t){const e=this._getOrReturnCtx(t);return Jn(e,{code:Gn.invalid_type,expected:qn.never,received:e.parsedType}),tr}}ZodNever.create=t=>new ZodNever({typeName:$r.ZodNever,...hr(t)});class ZodVoid extends ZodType{_parse(t){if(this._getType(t)!==qn.undefined){const e=this._getOrReturnCtx(t);return Jn(e,{code:Gn.invalid_type,expected:qn.void,received:e.parsedType}),tr}return nr(t.data)}}ZodVoid.create=t=>new ZodVoid({typeName:$r.ZodVoid,...hr(t)});class ZodArray extends ZodType{_parse(t){const{ctx:e,status:n}=this._processInputParams(t),r=this._def;if(e.parsedType!==qn.array)return Jn(e,{code:Gn.invalid_type,expected:qn.array,received:e.parsedType}),tr;if(null!==r.exactLength){const t=e.data.length>r.exactLength.value,i=e.data.length<r.exactLength.value;(t||i)&&(Jn(e,{code:t?Gn.too_big:Gn.too_small,minimum:i?r.exactLength.value:void 0,maximum:t?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&e.data.length<r.minLength.value&&(Jn(e,{code:Gn.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&e.data.length>r.maxLength.value&&(Jn(e,{code:Gn.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),e.common.async)return Promise.all([...e.data].map(((t,n)=>r.type._parseAsync(new ParseInputLazyPath(e,t,e.path,n))))).then((t=>ParseStatus.mergeArray(n,t)));const i=[...e.data].map(((t,n)=>r.type._parseSync(new ParseInputLazyPath(e,t,e.path,n))));return ParseStatus.mergeArray(n,i)}get element(){return this._def.type}min(t,e){return new ZodArray({...this._def,minLength:{value:t,message:lr.toString(e)}})}max(t,e){return new ZodArray({...this._def,maxLength:{value:t,message:lr.toString(e)}})}length(t,e){return new ZodArray({...this._def,exactLength:{value:t,message:lr.toString(e)}})}nonempty(t){return this.min(1,t)}}function Zr(t){if(t instanceof ZodObject){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ZodOptional.create(Zr(r))}return new ZodObject({...t._def,shape:()=>e})}return t instanceof ZodArray?new ZodArray({...t._def,type:Zr(t.element)}):t instanceof ZodOptional?ZodOptional.create(Zr(t.unwrap())):t instanceof ZodNullable?ZodNullable.create(Zr(t.unwrap())):t instanceof ZodTuple?ZodTuple.create(t.items.map((t=>Zr(t)))):t}ZodArray.create=(t,e)=>new ZodArray({type:t,minLength:null,maxLength:null,exactLength:null,typeName:$r.ZodArray,...hr(e)});class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const t=this._def.shape(),e=$n.objectKeys(t);return this._cached={shape:t,keys:e}}_parse(t){if(this._getType(t)!==qn.object){const e=this._getOrReturnCtx(t);return Jn(e,{code:Gn.invalid_type,expected:qn.object,received:e.parsedType}),tr}const{status:e,ctx:n}=this._processInputParams(t),{shape:r,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof ZodNever&&"strip"===this._def.unknownKeys))for(const a in n.data)i.includes(a)||o.push(a);const s=[];for(const a of i){const t=r[a],e=n.data[a];s.push({key:{status:"valid",value:a},value:t._parse(new ParseInputLazyPath(n,e,n.path,a)),alwaysSet:a in n.data})}if(this._def.catchall instanceof ZodNever){const t=this._def.unknownKeys;if("passthrough"===t)for(const e of o)s.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===t)o.length>0&&(Jn(n,{code:Gn.unrecognized_keys,keys:o}),e.dirty());else if("strip"!==t)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const t=this._def.catchall;for(const e of o){const r=n.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new ParseInputLazyPath(n,r,n.path,e)),alwaysSet:e in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const t=[];for(const e of s){const n=await e.key,r=await e.value;t.push({key:n,value:r,alwaysSet:e.alwaysSet})}return t})).then((t=>ParseStatus.mergeObjectSync(e,t))):ParseStatus.mergeObjectSync(e,s)}get shape(){return this._def.shape()}strict(t){return lr.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...void 0!==t?{errorMap:(e,n)=>{var r,i,o,s;const a=null!==(o=null===(i=(r=this._def).errorMap)||void 0===i?void 0:i.call(r,e,n).message)&&void 0!==o?o:n.defaultError;return"unrecognized_keys"===e.code?{message:null!==(s=lr.errToObj(t).message)&&void 0!==s?s:a}:{message:a}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(t){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ZodObject({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:$r.ZodObject})}setKey(t,e){return this.augment({[t]:e})}catchall(t){return new ZodObject({...this._def,catchall:t})}pick(t){const e={};return $n.objectKeys(t).forEach((n=>{t[n]&&this.shape[n]&&(e[n]=this.shape[n])})),new ZodObject({...this._def,shape:()=>e})}omit(t){const e={};return $n.objectKeys(this.shape).forEach((n=>{t[n]||(e[n]=this.shape[n])})),new ZodObject({...this._def,shape:()=>e})}deepPartial(){return Zr(this)}partial(t){const e={};return $n.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];t&&!t[n]?e[n]=r:e[n]=r.optional()})),new ZodObject({...this._def,shape:()=>e})}required(t){const e={};return $n.objectKeys(this.shape).forEach((n=>{if(t&&!t[n])e[n]=this.shape[n];else{let t=this.shape[n];for(;t instanceof ZodOptional;)t=t._def.innerType;e[n]=t}})),new ZodObject({...this._def,shape:()=>e})}keyof(){return Fr($n.objectKeys(this.shape))}}ZodObject.create=(t,e)=>new ZodObject({shape:()=>t,unknownKeys:"strip",catchall:ZodNever.create(),typeName:$r.ZodObject,...hr(e)}),ZodObject.strictCreate=(t,e)=>new ZodObject({shape:()=>t,unknownKeys:"strict",catchall:ZodNever.create(),typeName:$r.ZodObject,...hr(e)}),ZodObject.lazycreate=(t,e)=>new ZodObject({shape:t,unknownKeys:"strip",catchall:ZodNever.create(),typeName:$r.ZodObject,...hr(e)});class ZodUnion extends ZodType{_parse(t){const{ctx:e}=this._processInputParams(t),n=this._def.options;if(e.common.async)return Promise.all(n.map((async t=>{const n={...e,common:{...e.common,issues:[]},parent:null};return{result:await t._parseAsync({data:e.data,path:e.path,parent:n}),ctx:n}}))).then((function(t){for(const e of t)if("valid"===e.result.status)return e.result;for(const r of t)if("dirty"===r.result.status)return e.common.issues.push(...r.ctx.common.issues),r.result;const n=t.map((t=>new ZodError(t.ctx.common.issues)));return Jn(e,{code:Gn.invalid_union,unionErrors:n}),tr}));{let t;const r=[];for(const o of n){const n={...e,common:{...e.common,issues:[]},parent:null},i=o._parseSync({data:e.data,path:e.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||t||(t={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(t)return e.common.issues.push(...t.ctx.common.issues),t.result;const i=r.map((t=>new ZodError(t)));return Jn(e,{code:Gn.invalid_union,unionErrors:i}),tr}}get options(){return this._def.options}}ZodUnion.create=(t,e)=>new ZodUnion({options:t,typeName:$r.ZodUnion,...hr(e)});const Lr=t=>t instanceof ZodLazy?Lr(t.schema):t instanceof ZodEffects?Lr(t.innerType()):t instanceof ZodLiteral?[t.value]:t instanceof ZodEnum?t.options:t instanceof ZodNativeEnum?$n.objectValues(t.enum):t instanceof ZodDefault?Lr(t._def.innerType):t instanceof ZodUndefined?[void 0]:t instanceof ZodNull?[null]:t instanceof ZodOptional?[void 0,...Lr(t.unwrap())]:t instanceof ZodNullable?[null,...Lr(t.unwrap())]:t instanceof ZodBranded||t instanceof ZodReadonly?Lr(t.unwrap()):t instanceof ZodCatch?Lr(t._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==qn.object)return Jn(e,{code:Gn.invalid_type,expected:qn.object,received:e.parsedType}),tr;const n=this.discriminator,r=e.data[n],i=this.optionsMap.get(r);return i?e.common.async?i._parseAsync({data:e.data,path:e.path,parent:e}):i._parseSync({data:e.data,path:e.path,parent:e}):(Jn(e,{code:Gn.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),tr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,e,n){const r=new Map;for(const i of e){const e=Lr(i.shape[t]);if(!e.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const n of e){if(r.has(n))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(n)}`);r.set(n,i)}}return new ZodDiscriminatedUnion({typeName:$r.ZodDiscriminatedUnion,discriminator:t,options:e,optionsMap:r,...hr(n)})}}function Mr(t,e){const n=Wn(t),r=Wn(e);if(t===e)return{valid:!0,data:t};if(n===qn.object&&r===qn.object){const n=$n.objectKeys(e),r=$n.objectKeys(t).filter((t=>-1!==n.indexOf(t))),i={...t,...e};for(const o of r){const n=Mr(t[o],e[o]);if(!n.valid)return{valid:!1};i[o]=n.data}return{valid:!0,data:i}}if(n===qn.array&&r===qn.array){if(t.length!==e.length)return{valid:!1};const n=[];for(let r=0;r<t.length;r++){const i=Mr(t[r],e[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===qn.date&&r===qn.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class ZodIntersection extends ZodType{_parse(t){const{status:e,ctx:n}=this._processInputParams(t),r=(t,r)=>{if(rr(t)||rr(r))return tr;const i=Mr(t.value,r.value);return i.valid?((ir(t)||ir(r))&&e.dirty(),{status:e.value,value:i.data}):(Jn(n,{code:Gn.invalid_intersection_types}),tr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([t,e])=>r(t,e))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}ZodIntersection.create=(t,e,n)=>new ZodIntersection({left:t,right:e,typeName:$r.ZodIntersection,...hr(n)});class ZodTuple extends ZodType{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==qn.array)return Jn(n,{code:Gn.invalid_type,expected:qn.array,received:n.parsedType}),tr;if(n.data.length<this._def.items.length)return Jn(n,{code:Gn.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tr;!this._def.rest&&n.data.length>this._def.items.length&&(Jn(n,{code:Gn.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());const r=[...n.data].map(((t,e)=>{const r=this._def.items[e]||this._def.rest;return r?r._parse(new ParseInputLazyPath(n,t,n.path,e)):null})).filter((t=>!!t));return n.common.async?Promise.all(r).then((t=>ParseStatus.mergeArray(e,t))):ParseStatus.mergeArray(e,r)}get items(){return this._def.items}rest(t){return new ZodTuple({...this._def,rest:t})}}ZodTuple.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:t,typeName:$r.ZodTuple,rest:null,...hr(e)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==qn.object)return Jn(n,{code:Gn.invalid_type,expected:qn.object,received:n.parsedType}),tr;const r=[],i=this._def.keyType,o=this._def.valueType;for(const s in n.data)r.push({key:i._parse(new ParseInputLazyPath(n,s,n.path,s)),value:o._parse(new ParseInputLazyPath(n,n.data[s],n.path,s)),alwaysSet:s in n.data});return n.common.async?ParseStatus.mergeObjectAsync(e,r):ParseStatus.mergeObjectSync(e,r)}get element(){return this._def.valueType}static create(t,e,n){return new ZodRecord(e instanceof ZodType?{keyType:t,valueType:e,typeName:$r.ZodRecord,...hr(n)}:{keyType:ZodString.create(),valueType:t,typeName:$r.ZodRecord,...hr(e)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==qn.map)return Jn(n,{code:Gn.invalid_type,expected:qn.map,received:n.parsedType}),tr;const r=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map((([t,e],o)=>({key:r._parse(new ParseInputLazyPath(n,t,n.path,[o,"key"])),value:i._parse(new ParseInputLazyPath(n,e,n.path,[o,"value"]))})));if(n.common.async){const t=new Map;return Promise.resolve().then((async()=>{for(const n of o){const r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return tr;"dirty"!==r.status&&"dirty"!==i.status||e.dirty(),t.set(r.value,i.value)}return{status:e.value,value:t}}))}{const t=new Map;for(const n of o){const r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return tr;"dirty"!==r.status&&"dirty"!==i.status||e.dirty(),t.set(r.value,i.value)}return{status:e.value,value:t}}}}ZodMap.create=(t,e,n)=>new ZodMap({valueType:e,keyType:t,typeName:$r.ZodMap,...hr(n)});class ZodSet extends ZodType{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.parsedType!==qn.set)return Jn(n,{code:Gn.invalid_type,expected:qn.set,received:n.parsedType}),tr;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(Jn(n,{code:Gn.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),e.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(Jn(n,{code:Gn.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),e.dirty());const i=this._def.valueType;function o(t){const n=new Set;for(const r of t){if("aborted"===r.status)return tr;"dirty"===r.status&&e.dirty(),n.add(r.value)}return{status:e.value,value:n}}const s=[...n.data.values()].map(((t,e)=>i._parse(new ParseInputLazyPath(n,t,n.path,e))));return n.common.async?Promise.all(s).then((t=>o(t))):o(s)}min(t,e){return new ZodSet({...this._def,minSize:{value:t,message:lr.toString(e)}})}max(t,e){return new ZodSet({...this._def,maxSize:{value:t,message:lr.toString(e)}})}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}}ZodSet.create=(t,e)=>new ZodSet({valueType:t,minSize:null,maxSize:null,typeName:$r.ZodSet,...hr(e)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==qn.function)return Jn(e,{code:Gn.invalid_type,expected:qn.function,received:e.parsedType}),tr;function n(t,n){return Qn({data:t,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Xn(),Kn].filter((t=>!!t)),issueData:{code:Gn.invalid_arguments,argumentsError:n}})}function r(t,n){return Qn({data:t,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Xn(),Kn].filter((t=>!!t)),issueData:{code:Gn.invalid_return_type,returnTypeError:n}})}const i={errorMap:e.common.contextualErrorMap},o=e.data;if(this._def.returns instanceof ZodPromise){const t=this;return nr((async function(...e){const s=new ZodError([]),a=await t._def.args.parseAsync(e,i).catch((t=>{throw s.addIssue(n(e,t)),s})),c=await Reflect.apply(o,this,a);return await t._def.returns._def.type.parseAsync(c,i).catch((t=>{throw s.addIssue(r(c,t)),s}))}))}{const t=this;return nr((function(...e){const s=t._def.args.safeParse(e,i);if(!s.success)throw new ZodError([n(e,s.error)]);const a=Reflect.apply(o,this,s.data),c=t._def.returns.safeParse(a,i);if(!c.success)throw new ZodError([r(a,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new ZodFunction({...this._def,args:ZodTuple.create(t).rest(ZodUnknown.create())})}returns(t){return new ZodFunction({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,e,n){return new ZodFunction({args:t||ZodTuple.create([]).rest(ZodUnknown.create()),returns:e||ZodUnknown.create(),typeName:$r.ZodFunction,...hr(n)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(t){const{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}ZodLazy.create=(t,e)=>new ZodLazy({getter:t,typeName:$r.ZodLazy,...hr(e)});class ZodLiteral extends ZodType{_parse(t){if(t.data!==this._def.value){const e=this._getOrReturnCtx(t);return Jn(e,{received:e.data,code:Gn.invalid_literal,expected:this._def.value}),tr}return{status:"valid",value:t.data}}get value(){return this._def.value}}function Fr(t,e){return new ZodEnum({values:t,typeName:$r.ZodEnum,...hr(e)})}ZodLiteral.create=(t,e)=>new ZodLiteral({value:t,typeName:$r.ZodLiteral,...hr(e)});class ZodEnum extends ZodType{constructor(){super(...arguments),dr.set(this,void 0)}_parse(t){if("string"!=typeof t.data){const e=this._getOrReturnCtx(t),n=this._def.values;return Jn(e,{expected:$n.joinValues(n),received:e.parsedType,code:Gn.invalid_type}),tr}if(ar(this,dr,"f")||cr(this,dr,new Set(this._def.values),"f"),!ar(this,dr,"f").has(t.data)){const e=this._getOrReturnCtx(t),n=this._def.values;return Jn(e,{received:e.data,code:Gn.invalid_enum_value,options:n}),tr}return nr(t.data)}get options(){return this._def.values}get enum(){const t={};for(const e of this._def.values)t[e]=e;return t}get Values(){const t={};for(const e of this._def.values)t[e]=e;return t}get Enum(){const t={};for(const e of this._def.values)t[e]=e;return t}extract(t,e=this._def){return ZodEnum.create(t,{...this._def,...e})}exclude(t,e=this._def){return ZodEnum.create(this.options.filter((e=>!t.includes(e))),{...this._def,...e})}}dr=new WeakMap,ZodEnum.create=Fr;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),ur.set(this,void 0)}_parse(t){const e=$n.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==qn.string&&n.parsedType!==qn.number){const t=$n.objectValues(e);return Jn(n,{expected:$n.joinValues(t),received:n.parsedType,code:Gn.invalid_type}),tr}if(ar(this,ur,"f")||cr(this,ur,new Set($n.getValidEnumValues(this._def.values)),"f"),!ar(this,ur,"f").has(t.data)){const t=$n.objectValues(e);return Jn(n,{received:n.data,code:Gn.invalid_enum_value,options:t}),tr}return nr(t.data)}get enum(){return this._def.values}}ur=new WeakMap,ZodNativeEnum.create=(t,e)=>new ZodNativeEnum({values:t,typeName:$r.ZodNativeEnum,...hr(e)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==qn.promise&&!1===e.common.async)return Jn(e,{code:Gn.invalid_type,expected:qn.promise,received:e.parsedType}),tr;const n=e.parsedType===qn.promise?e.data:Promise.resolve(e.data);return nr(n.then((t=>this._def.type.parseAsync(t,{path:e.path,errorMap:e.common.contextualErrorMap}))))}}ZodPromise.create=(t,e)=>new ZodPromise({type:t,typeName:$r.ZodPromise,...hr(e)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$r.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:e,ctx:n}=this._processInputParams(t),r=this._def.effect||null,i={addIssue:t=>{Jn(n,t),t.fatal?e.abort():e.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){const t=r.transform(n.data,i);if(n.common.async)return Promise.resolve(t).then((async t=>{if("aborted"===e.value)return tr;const r=await this._def.schema._parseAsync({data:t,path:n.path,parent:n});return"aborted"===r.status?tr:"dirty"===r.status||"dirty"===e.value?er(r.value):r}));{if("aborted"===e.value)return tr;const r=this._def.schema._parseSync({data:t,path:n.path,parent:n});return"aborted"===r.status?tr:"dirty"===r.status||"dirty"===e.value?er(r.value):r}}if("refinement"===r.type){const t=t=>{const e=r.refinement(t,i);if(n.common.async)return Promise.resolve(e);if(e instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return t};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?tr:("dirty"===r.status&&e.dirty(),t(r.value),{status:e.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?tr:("dirty"===n.status&&e.dirty(),t(n.value).then((()=>({status:e.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const t=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!or(t))return t;const o=r.transform(t.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:o}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((t=>or(t)?Promise.resolve(r.transform(t.value,i)).then((t=>({status:e.value,value:t}))):t))}$n.assertNever(r)}}ZodEffects.create=(t,e,n)=>new ZodEffects({schema:t,typeName:$r.ZodEffects,effect:e,...hr(n)}),ZodEffects.createWithPreprocess=(t,e,n)=>new ZodEffects({schema:e,effect:{type:"preprocess",transform:t},typeName:$r.ZodEffects,...hr(n)});class ZodOptional extends ZodType{_parse(t){return this._getType(t)===qn.undefined?nr(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ZodOptional.create=(t,e)=>new ZodOptional({innerType:t,typeName:$r.ZodOptional,...hr(e)});class ZodNullable extends ZodType{_parse(t){return this._getType(t)===qn.null?nr(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ZodNullable.create=(t,e)=>new ZodNullable({innerType:t,typeName:$r.ZodNullable,...hr(e)});class ZodDefault extends ZodType{_parse(t){const{ctx:e}=this._processInputParams(t);let n=e.data;return e.parsedType===qn.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}ZodDefault.create=(t,e)=>new ZodDefault({innerType:t,typeName:$r.ZodDefault,defaultValue:"function"==typeof e.default?e.default:()=>e.default,...hr(e)});class ZodCatch extends ZodType{_parse(t){const{ctx:e}=this._processInputParams(t),n={...e,common:{...e.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return sr(r)?r.then((t=>({status:"valid",value:"valid"===t.status?t.value:this._def.catchValue({get error(){return new ZodError(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new ZodError(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(t,e)=>new ZodCatch({innerType:t,typeName:$r.ZodCatch,catchValue:"function"==typeof e.catch?e.catch:()=>e.catch,...hr(e)});class ZodNaN extends ZodType{_parse(t){if(this._getType(t)!==qn.nan){const e=this._getOrReturnCtx(t);return Jn(e,{code:Gn.invalid_type,expected:qn.nan,received:e.parsedType}),tr}return{status:"valid",value:t.data}}}ZodNaN.create=t=>new ZodNaN({typeName:$r.ZodNaN,...hr(t)});const Ur=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(t){const{ctx:e}=this._processInputParams(t),n=e.data;return this._def.type._parse({data:n,path:e.path,parent:e})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(t){const{status:e,ctx:n}=this._processInputParams(t);if(n.common.async){return(async()=>{const t=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===t.status?tr:"dirty"===t.status?(e.dirty(),er(t.value)):this._def.out._parseAsync({data:t.value,path:n.path,parent:n})})()}{const t=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===t.status?tr:"dirty"===t.status?(e.dirty(),{status:"dirty",value:t.value}):this._def.out._parseSync({data:t.value,path:n.path,parent:n})}}static create(t,e){return new ZodPipeline({in:t,out:e,typeName:$r.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(t){const e=this._def.innerType._parse(t),n=t=>(or(t)&&(t.value=Object.freeze(t.value)),t);return sr(e)?e.then((t=>n(t))):n(e)}unwrap(){return this._def.innerType}}function Br(t,e){const n="function"==typeof t?t(e):"string"==typeof t?{message:t}:t;return"string"==typeof n?{message:n}:n}function Vr(t,e={},n){return t?ZodAny.create().superRefine(((r,i)=>{var o,s;const a=t(r);if(a instanceof Promise)return a.then((t=>{var o,s;if(!t){const t=Br(e,r),a=null===(s=null!==(o=t.fatal)&&void 0!==o?o:n)||void 0===s||s;i.addIssue({code:"custom",...t,fatal:a})}}));if(!a){const t=Br(e,r),a=null===(s=null!==(o=t.fatal)&&void 0!==o?o:n)||void 0===s||s;i.addIssue({code:"custom",...t,fatal:a})}})):ZodAny.create()}ZodReadonly.create=(t,e)=>new ZodReadonly({innerType:t,typeName:$r.ZodReadonly,...hr(e)});const Hr={object:ZodObject.lazycreate};var $r;!function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"}($r||($r={}));const zr=ZodString.create,qr=ZodNumber.create,Wr=ZodNaN.create,Gr=ZodBigInt.create,Kr=ZodBoolean.create,Yr=ZodDate.create,Xr=ZodSymbol.create,Qr=ZodUndefined.create,Jr=ZodNull.create,ti=ZodAny.create,ei=ZodUnknown.create,ni=ZodNever.create,ri=ZodVoid.create,ii=ZodArray.create,oi=ZodObject.create,si=ZodObject.strictCreate,ai=ZodUnion.create,ci=ZodDiscriminatedUnion.create,li=ZodIntersection.create,di=ZodTuple.create,ui=ZodRecord.create,pi=ZodMap.create,hi=ZodSet.create,fi=ZodFunction.create,gi=ZodLazy.create,vi=ZodLiteral.create,yi=ZodEnum.create,mi=ZodNativeEnum.create,bi=ZodPromise.create,_i=ZodEffects.create,wi=ZodOptional.create,Si=ZodNullable.create,Ai=ZodEffects.createWithPreprocess,Ei=ZodPipeline.create,Ri={string:t=>ZodString.create({...t,coerce:!0}),number:t=>ZodNumber.create({...t,coerce:!0}),boolean:t=>ZodBoolean.create({...t,coerce:!0}),bigint:t=>ZodBigInt.create({...t,coerce:!0}),date:t=>ZodDate.create({...t,coerce:!0})},Oi=tr;var Ti=Object.freeze({__proto__:null,defaultErrorMap:Kn,setErrorMap:function(t){Yn=t},getErrorMap:Xn,makeIssue:Qn,EMPTY_PATH:[],addIssueToContext:Jn,ParseStatus,INVALID:tr,DIRTY:er,OK:nr,isAborted:rr,isDirty:ir,isValid:or,isAsync:sr,get util(){return $n},get objectUtil(){return zn},ZodParsedType:qn,getParsedType:Wn,ZodType,datetimeRegex:Pr,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND:Ur,ZodBranded,ZodPipeline,ZodReadonly,custom:Vr,Schema:ZodType,ZodSchema:ZodType,late:Hr,get ZodFirstPartyTypeKind(){return $r},coerce:Ri,any:ti,array:ii,bigint:Gr,boolean:Kr,date:Yr,discriminatedUnion:ci,effect:_i,enum:yi,function:fi,instanceof:(t,e={message:`Input not instance of ${t.name}`})=>Vr((e=>e instanceof t),e),intersection:li,lazy:gi,literal:vi,map:pi,nan:Wr,nativeEnum:mi,never:ni,null:Jr,nullable:Si,number:qr,object:oi,oboolean:()=>Kr().optional(),onumber:()=>qr().optional(),optional:wi,ostring:()=>zr().optional(),pipeline:Ei,preprocess:Ai,promise:bi,record:ui,set:hi,strictObject:si,string:zr,symbol:Xr,transformer:_i,tuple:di,undefined:Qr,union:ai,unknown:ei,void:ri,NEVER:Oi,ZodIssueCode:Gn,quotelessJson:t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError});const Ii=oi({fontSize:zr().optional().nullable()}).passthrough().optional(),Ci=oi({target:zr().optional().nullable(),rel:zr().optional().nullable(),referrerPolicy:zr().optional().nullable()}).optional().nullable(),xi=oi({target:zr().optional().nullable(),rel:zr().optional().nullable(),referrerPolicy:zr().optional().nullable(),href:zr().optional().nullable()}).optional().nullable(),Ni=oi({identifier:zr().uuid(),creativeType:Ti.nativeEnum(G),settings:oi({positionSelector:zr().optional().nullable(),positionInjectType:Ti.nativeEnum(J),maxNumberOfColumns:qr().optional().nullable(),footerType:zr().optional().nullable(),format:Ti.nativeEnum(tt),datasetId:zr().optional().nullable(),linkCloaking:Kr(),headingText:zr().optional().nullable(),linkProperties:oi({internal:Ci,external:Ci,subtitle:Ci,privacyPolicy:xi,targetingSettings:xi,personalData:xi,termsOfUse:xi,brand:xi}).optional().nullable(),style:oi({heading:Ii,container:Ii,outerContainer:Ii,list:Ii,item:Ii,itemLink:Ii,itemTitle:Ii,itemSubtitle:Ii,itemMeta:Ii,itemAuthors:Ii,footer:Ii,footerLeft:Ii,footerRight:Ii}).passthrough().optional().nullable()}),constraints:ii(oi({type:Ti.nativeEnum(et),constraint:oi({any:Kr(),values:ii(zr()).optional().nullable()})}))}),Pi=oi({identifier:zr().uuid(),settings:oi({swoopId:zr().optional().nullable(),swoopIntegrationType:Ti.nativeEnum(Q).optional().nullable(),swoopScriptUrl:zr().optional().nullable(),npiSources:ii(Ti.nativeEnum($)).nullable(),doctorSpecialtySources:ii(Ti.nativeEnum(q)).nullable(),npiDetectionEnabled:Kr().nullable().default(!1),doctorSpecialtyDetectionEnabled:Kr().nullable().default(!1),npiDetectors:oi({[$.LHK]:oi({url:zr().url()}).optional(),[$.DMD]:oi({url:zr().url()}).optional()}).optional().nullable(),doctorSpecialtyDetectors:oi({[q.TARGL]:oi({url:zr().url()}).optional()}).optional().nullable(),userMetricsScriptUrl:zr().optional().nullable()})}),ji=oi({adSet:Pi,adSlots:ii(Ni)}),ki=oi({id:qr().optional(),encryptedId:zr().optional(),source:Ti.nativeEnum(q),destination:Ti.nativeEnum(W)}),Di=ii(oi({number:qr().optional(),encryptedNumber:zr().optional(),source:Ti.nativeEnum($),destination:Ti.nativeEnum(z)})),Zi=ii(ki),Li=ii(oi({id:zr().uuid(),creativeType:Ti.nativeEnum(G),title:zr(),subtitle:oi({type:Ti.nativeEnum(Y),content:zr().optional().nullable(),url:zr().url().optional().nullable()}).optional().nullable(),url:zr().url(),campaignId:zr(),publicationId:zr().nullable().optional(),linkingType:Ti.nativeEnum(X),clickUrl:zr().url(),impressionUrl:zr().url(),authors:zr().optional().nullable(),publicationName:zr().optional().nullable(),publicationDate:zr().optional().nullable(),publicationAbbreviatedName:zr().optional().nullable(),creative:oi({type:Ti.nativeEnum(G),format:Ti.nativeEnum(K),fileResource:oi({url:zr().url()}),metadata:oi({}).passthrough().nullable().optional()}).optional().nullable()})),Mi=oi({id:zr(),scriptId:zr(),datasetId:zr().optional(),cookie:oi({expires:qr().optional(),flags:zr().optional(),path:zr().optional(),domain:zr().optional()}).optional(),userProperties:ui(zr()).optional(),startTime:qr().gte(0).optional().default((new Date).getTime()),debug:Kr().optional().default(!1),publicSettings:ji.optional().nullable()}),Fi=oi({widgetInstallUrl:zr().nullable().default(null),apiUrl:zr(),version:zr(),sessionId:zr().optional().default(r())}).extend(Mi.shape);var Ui;let Bi=M()(Ui=function(t,e){return F("backendHttpClient")(t,void 0,0)}(Ui=function(t,e){return U()(t,void 0,1)}(Ui=Reflect.metadata("design:type",Function)(Ui=Reflect.metadata("design:paramtypes",["undefined"==typeof HttpClientInterface?Object:HttpClientInterface,void 0===at?Object:at])(Ui=Reflect.metadata("design:type",Function)(Ui=Reflect.metadata("design:paramtypes",["undefined"==typeof HttpClientInterface?Object:HttpClientInterface,void 0===at?Object:at])(Ui=class ApiClient{constructor(t,e){this.eventQueue=void 0,this.httpClient=t,this.logger=e,this.eventQueue=new EventQueue({maxQueueSize:20,timeout:2e3,callback:this.eventQueueCallback.bind(this)})}async getRecommendations(t,e){const n=this.httpClient.createRequest("POST",`/ad-slots/${t}/recommendations`,{json:e}),r=await this.httpClient.sendRequest(n).then((t=>t.json()));try{return Li.parse(r)}catch(o){var i;throw null==(i=this.logger)||i.error("Unable to parse public recommendation items",o),new Error("Unable to parse public recommendation items",{cause:o})}}async getSettings(t){const e=this.httpClient.createRequest("GET",`/ad-sets/${t}/settings`),n=await this.httpClient.sendRequest(e).then((t=>t.json()));try{return ji.parse(n)}catch(i){var r;throw null==(r=this.logger)||r.error("Unable to parse public settings",i),new Error("Unable to parse public settings",{cause:i})}}async processNpi(t,e){const n=this.httpClient.createRequest("POST",`/ad-sets/${e}/npi`,{json:t}),r=await this.httpClient.sendRequest(n).then((t=>{var e;if(t.getStatusCode()>=400)throw null==(e=this.logger)||e.error(`Unable to process npi. Status: ${t.getStatusCode()}, ${t.getReasonPhrase()}`),new Error("Unable to process npi");return t})).then((t=>t.json())).catch((()=>[]));try{return Di.parse(r)}catch(o){var i;throw null==(i=this.logger)||i.error("Unable to parse public npis",o),new Error("Unable to parse public npis",{cause:o})}}async processDoctorSpecialty(t,e){const n=this.httpClient.createRequest("POST",`/ad-sets/${e}/doctor-specialty`,{json:t}),r=await this.httpClient.sendRequest(n).then((t=>{var e;if(t.getStatusCode()>=400)throw null==(e=this.logger)||e.error(`Unable to process doctor specialty. Status: ${t.getStatusCode()}, ${t.getReasonPhrase()}`),new Error("Unable to process doctor specialty");return t})).then((t=>t.json())).catch((()=>[]));try{return Zi.parse(r)}catch(o){var i;throw null==(i=this.logger)||i.error("Unable to parse public doctor specialties",o),new Error("Unable to parse public doctor specialties",{cause:o})}}async registerEvent(t,e){this.eventQueue.push({adSlotIdentifier:t,payload:e})}async eventQueueCallback(t){const e=t.reduce(((t,e)=>{var n;return t.has(e.adSlotIdentifier)||t.set(e.adSlotIdentifier,[]),null==(n=t.get(e.adSlotIdentifier))||n.push(e),t}),new Map),n=[];for(const[r,i]of e.entries()){const t=this.httpClient.createRequest("POST",`/ad-slots/${r}/events`,{json:i.map((t=>t.payload))});n.push(this.httpClient.sendRequest(t).then((t=>{})))}await Promise.all(n)}})||Ui)||Ui)||Ui)||Ui)||Ui)||Ui)||Ui;class AdSet{constructor(){this.id=void 0,this.settings=void 0,this.adSlots=new Set}getId(){if(void 0===this.id)throw new Error(`Attempt to access "id" of ${this.constructor.name} before initialization`);return this.id}getAdSlots(){return[...this.adSlots.values()]}addAdSlot(t){return this.hasAdSlot(t)||(this.adSlots.add(t),t.setAdSet(this)),this}hasAdSlot(t){return this.adSlots.has(t)}removeAdSlot(t){return this.hasAdSlot(t)?(this.adSlots.delete(t)&&t.getAdSet()===this&&t.setAdSet(void 0),this):this}getSettings(){if(void 0===this.settings)throw new Error(`Attempt to access "settings" of ${this.constructor.name} before initialization`);return this.settings}setSettings(t){return this.settings=t,t.setAdSet(this),this}}class AdSetSettings{constructor(){this.adSet=void 0,this.swoopId=void 0,this.swoopIntegrationType=void 0,this.swoopScriptUrl=void 0,this.npiDetectionEnabled=!1,this.npiSources=[],this.npiDetectors=void 0,this.doctorSpecialtyDetectionEnabled=!1,this.doctorSpecialtySources=[],this.doctorSpecialtyDetectors=void 0,this.userMetricsScriptUrl=void 0}getAdSet(){var t;return null!=(t=this.adSet)?t:null}setAdSet(t){return this.adSet=t,this}isNpiDetectionEnabled(){var t;return null!=(t=this.npiDetectionEnabled)&&t}isDoctorSpecialtyDetectionEnabled(){var t;return null!=(t=this.doctorSpecialtyDetectionEnabled)&&t}getSwoopId(){var t;return null!=(t=this.swoopId)?t:null}getSwoopIntegrationType(){var t;return null!=(t=this.swoopIntegrationType)?t:Q.NONE}getSwoopScriptUrl(){var t;return null!=(t=this.swoopScriptUrl)?t:null}getUserMetricsScriptUrl(){var t;return null!=(t=this.userMetricsScriptUrl)?t:null}getNpiSources(){return this.npiSources}getDoctorSpecialtySources(){return this.doctorSpecialtySources}getNpiDetectors(){var t;return null!=(t=this.npiDetectors)?t:null}getDoctorSpecialtyDetectors(){var t;return null!=(t=this.doctorSpecialtyDetectors)?t:null}}class AdSetResolveEvent extends event_Event{constructor(t,e){super(),this.render=!0,this.id=t,this.adSet=e}getId(){var t,e;return null!=(t=null==(e=this.adSet)?void 0:e.getId())?t:this.id}getAdSet(){var t;return null!=(t=this.adSet)?t:null}}var Vi;let Hi=M()(Vi=function(t,e){return U()(t,void 0,3)}(Vi=Reflect.metadata("design:type",Function)(Vi=Reflect.metadata("design:paramtypes",[void 0===Hn?Object:Hn,void 0===Bi?Object:Bi,void 0===lt?Object:lt,void 0===at?Object:at])(Vi=Reflect.metadata("design:type",Function)(Vi=Reflect.metadata("design:paramtypes",[void 0===Hn?Object:Hn,void 0===Bi?Object:Bi,void 0===lt?Object:lt,void 0===at?Object:at])(Vi=class AdSetResolver{constructor(t,e,n,r){this.adSlotResolver=t,this.apiClient=e,this.eventManager=n,this.logger=r}async resolve(t){var e;const n=t.getApplicationId();null==(e=this.logger)||e.info(`Resolving AdSet with identifier: ${n}`);let r=await this.eventManager.dispatch(ot.AD_SET_PRE_RESOLVE,new AdSetResolveEvent(n));if(r.isPropagationStopped())return null;let i=t.getApplicationConfig().publicSettings;if(!i){var o;null==(o=this.logger)||o.debug(`Fetching AdSet settings with identifier: ${n}`);try{i=await this.apiClient.getSettings(n)}catch(l){var s;return null==(s=this.logger)||s.error(`Error while resolving AdSet with identifier: ${n}`,l),null}}const a=new AdSet;Bn(a,{id:i.adSet.identifier});const c=new AdSetSettings;Bn(c,i.adSet.settings),a.setSettings(c);for(const d of i.adSlots){const t=await this.adSlotResolver.resolve(d);t&&a.addAdSlot(t)}return r=await this.eventManager.dispatch(ot.AD_SET_POST_RESOLVE,new AdSetResolveEvent(n,a)),r.getAdSet()}})||Vi)||Vi)||Vi)||Vi)||Vi)||Vi;class metadata_Metadata{constructor(){this.title=null,this.doi=null}getTitle(){return this.title}setTitle(t){return this.title=null!=t?t:null,this}getDoi(){return this.doi}setDoi(t){return this.doi=null!=t?t:null,this}}var $i;let zi=M()($i=function(t,e){return B("MetadataProcessor")(t,void 0,0)}($i=Reflect.metadata("design:type",Function)($i=Reflect.metadata("design:paramtypes",[Array])($i=Reflect.metadata("design:type",Function)($i=Reflect.metadata("design:paramtypes",[Array])($i=class MetadataResolver{constructor(t){this.processors=t}async resolve(){const t=new metadata_Metadata;for(const e of this.processors)await e.process(t);return t}})||$i)||$i)||$i)||$i)||$i)||$i;var qi;let Wi=M()(qi=function(t,e){return U()(t,void 0,8)}(qi=Reflect.metadata("design:type",Function)(qi=Reflect.metadata("design:paramtypes",[void 0===H?Object:H,void 0===Hi?Object:Hi,void 0===Fn?Object:Fn,void 0===ht?Object:ht,void 0===ut?Object:ut,void 0===zi?Object:zi,void 0===lt?Object:lt,void 0===gt?Object:gt,void 0===at?Object:at])(qi=Reflect.metadata("design:type",Function)(qi=Reflect.metadata("design:paramtypes",[void 0===H?Object:H,void 0===Hi?Object:Hi,void 0===Fn?Object:Fn,void 0===ht?Object:ht,void 0===ut?Object:ut,void 0===zi?Object:zi,void 0===lt?Object:lt,void 0===gt?Object:gt,void 0===at?Object:at])(qi=class Application{constructor(t,e,n,r,i,o,s,a,c){this.initialized=!1,this.context=t,this.adSetResolver=e,this.adSetRenderer=n,this.npiDetector=r,this.doctorSpecialtyDetector=i,this.metadataResolver=o,this.eventManager=s,this.integrationRunner=a,this.logger=c}async run(){await this.eventManager.dispatch(ot.APPLICATION_PRE_RUN,new ApplicationLifecycleEvent(this)),await this.init();const t=this.context.getAdSet();if(t){this.context.setMetadata(await this.metadataResolver.resolve());try{await this.integrationRunner.run(t)}catch(r){var e;if(r instanceof IntegrationStoppedExecutionException)this.context.setCanRender(!1);else null==(e=this.logger)||e.error("Integration failed to run",r)}this.context.canRender()?(await this.render(),await this.eventManager.dispatch(ot.APPLICATION_POST_RUN,new ApplicationLifecycleEvent(this))):await this.eventManager.dispatch(ot.APPLICATION_POST_RUN,new ApplicationLifecycleEvent(this))}else{var n;null==(n=this.logger)||n.error(`Ad set with identifier ${this.context.getApplicationId()} cannot be resolved`)}}async init(){if(this.initialized)return;await this.eventManager.dispatch(ot.APPLICATION_PRE_INIT,new ApplicationLifecycleEvent(this));const t=await this.adSetResolver.resolve(this.context);var e;t?(this.context.setAdSet(t),await this.performDetection(t),this.initialized=!0,await this.eventManager.dispatch(ot.APPLICATION_POST_INIT,new ApplicationLifecycleEvent(this))):null==(e=this.logger)||e.error(`Ad set with identifier ${this.context.getApplicationId()} cannot be resolved`)}async performDetection(t){this.npiDetector.supports(t)&&await this.npiDetector.detect(t),this.doctorSpecialtyDetector.supports(t)&&await this.doctorSpecialtyDetector.detect(t)}async render(){const t=this.context.getAdSet();if(!t)throw new Error("Ad set is not defined");await this.adSetRenderer.render(t)}})||qi)||qi)||qi)||qi)||qi)||qi;var Gi={Request:"Request",Singleton:"Singleton",Transient:"Transient"},Ki={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},Yi={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},Xi=0;function Qi(){return Xi++}var Ji=function(){function t(t,e){this.id=Qi(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=Ki.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===Gi.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e},t}(),to=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(O,t),userGeneratedMetadata:Reflect.getMetadata(E,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(R,t)||[]},t}(),eo={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function no(t){return t instanceof RangeError||t.message===y}function ro(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function io(t,e,n){var r="",i=n(t,e);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach((function(t){var e="Object";null!==t.implementationType&&(e=ao(t.implementationType)),r=r+"\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)}))),r}function oo(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||oo(t.parentRequest,e))}function so(t){t.childRequests.forEach((function(t){if(oo(t,t.serviceIdentifier)){var e=function(t){var e=function t(e,n){void 0===n&&(n=[]);var r=ro(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}(t);return e.reverse().join(" --\x3e ")}(t);throw new Error(u+" "+e)}so(t)}))}function ao(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}var co=function(){function t(t){this.id=Qi(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}(),lo=function(t,e){this.parentContext=t,this.rootRequest=e},uo=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}(),po=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}(),ho=function(){function t(t,e,n,r){this.id=Qi(),this.type=t,this.serviceIdentifier=n;var i="symbol"==typeof e?e.toString().slice(7,-1):e;this.name=new po(i||""),this.identifier=e,this.metadata=new Array;var o=null;"string"==typeof r?o=new x(m,r):r instanceof x&&(o=r),null!==o&&this.metadata.push(o)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(A)},t.prototype.matchesArray=function(t){return this.matchesTag(A)(t)},t.prototype.isNamed=function(){return this.hasTag(m)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return C.every((function(e){return t.key!==e}))}))},t.prototype.isOptional=function(){return this.matchesTag(w)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===m}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return C.every((function(e){return t.key!==e}))})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(m)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,i=e.metadata;r<i.length;r++){var o=i[r];if(o.key===t&&o.value===n)return!0}return!1}},t}(),fo=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function go(t,e,n,r){var i=t.getConstructorMetadata(n),o=i.compilerGeneratedMetadata;if(void 0===o)throw new Error(l+" "+e+".");var s=i.userGeneratedMetadata,a=Object.keys(s),c=0===n.length&&a.length>0,d=a.length>n.length,u=function(t,e,n,r,i){for(var o=[],s=0;s<i;s++){var a=vo(s,t,e,n,r);null!==a&&o.push(a)}return o}(r,e,o,s,c||d?a.length:n.length),p=mo(t,n,e);return fo(fo([],u,!0),p,!0)}function vo(t,e,n,r,i){var o=i[t.toString()]||[],s=_o(o),a=!0!==s.unmanaged,c=r[t],l=s.inject||s.multiInject;if((c=l||c)instanceof uo&&(c=c.unwrap()),a){if(!e&&(c===Object||c===Function||void 0===c))throw new Error(d+" argument "+t+" in class "+n+".");var u=new ho(Yi.ConstructorArgument,s.targetName,c);return u.metadata=o,u}return null}function yo(t,e,n,r){var i=t||e;if(void 0===i){var o=l+" for property "+String(n)+" in class "+r+".";throw new Error(o)}return i}function mo(t,e,n){for(var r=t.getPropertiesMetadata(e),i=[],o=Object.getOwnPropertySymbols(r),s=0,a=Object.keys(r).concat(o);s<a.length;s++){var c=a[s],l=r[c],d=_o(l),u=d.targetName||c,p=yo(d.inject,d.multiInject,c,n),h=new ho(Yi.ClassProperty,u,p);h.metadata=l,i.push(h)}var f=Object.getPrototypeOf(e.prototype).constructor;if(f!==Object){var g=mo(t,f,n);i=fo(fo([],i,!0),g,!0)}return i}function bo(t,e){var n=Object.getPrototypeOf(e.prototype).constructor;if(n!==Object){var r=go(t,ao(n),n,!0),i=r.map((function(t){return t.metadata.filter((function(t){return t.key===_}))})),o=[].concat.apply([],i).length,s=r.length-o;return s>0?s:bo(t,n)}return 0}function _o(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[S],multiInject:e[A],targetName:e[b],unmanaged:e[_]}}var wo=function(){function t(t,e,n,r,i){this.id=Qi(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var i=new t(e,this.parentContext,this,n,r);return this.childRequests.push(i),i},t}();function So(t){return t._bindingDictionary}function Ao(t,e,n,r,i){var o=Ro(n.container,i.serviceIdentifier),s=[];return o.length===eo.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&t.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),o=Ro(n.container,i.serviceIdentifier)),s=e?o:o.filter((function(t){var e=new wo(t.serviceIdentifier,n,r,t,i);return t.constraint(e)})),function(t,e,n,r){switch(e.length){case eo.NoBindingsAvailable:if(n.isOptional())return e;var i=ro(t),o=c;throw o+=function(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),i=e.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t}(i,n),o+=io(r,i,Ro),new Error(o);case eo.OnlyOneBindingAvailable:return e;case eo.MultipleBindingsAvailable:default:if(n.isArray())return e;i=ro(t),o=a+" "+i;throw o+=io(r,i,Ro),new Error(o)}}(i.serviceIdentifier,s,i,n.container),s}function Eo(t,e,n,r,i,o){var s,a;if(null===i){s=Ao(t,e,r,null,o),a=new wo(n,r,null,s,o);var c=new lo(r,a);r.addPlan(c)}else s=Ao(t,e,r,i,o),a=i.addChildRequest(o.serviceIdentifier,s,o);s.forEach((function(e){var n=null;if(o.isArray())n=a.addChildRequest(e.serviceIdentifier,e,o);else{if(e.cache)return;n=a}if(e.type===Ki.Instance&&null!==e.implementationType){var i=function(t,e){return go(t,ao(e),e,!1)}(t,e.implementationType);if(!r.container.options.skipBaseClassChecks){var s=bo(t,e.implementationType);if(i.length<s){var c=h(ao(e.implementationType));throw new Error(c)}}i.forEach((function(e){Eo(t,!1,e.serviceIdentifier,r,n,e)}))}}))}function Ro(t,e){var n=[],r=So(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=Ro(t.parent,e)),n}function Oo(t,e,n,r,i,o,s,a){void 0===a&&(a=!1);var c=new co(e),l=function(t,e,n,r,i,o){var s=new x(t?A:S,n),a=new ho(e,r,n,s);if(void 0!==i){var c=new x(i,o);a.metadata.push(c)}return a}(n,r,i,"",o,s);try{return Eo(t,a,i,c,null,l),c}catch(d){throw no(d)&&so(c.plan.rootRequest),d}}function To(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&"function"==typeof t.then}function Io(t){return!!To(t)||Array.isArray(t)&&t.some(To)}var Co,xo=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},No=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Po=function(t,e,n){t.has(e.id)||t.set(e.id,n)},jo=function(t,e){t.cache=e,t.activated=!0,To(e)&&ko(t,e)},ko=function(t,e){return xo(void 0,void 0,void 0,(function(){var n,r;return No(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e];case 1:return n=i.sent(),t.cache=n,[3,3];case 2:throw r=i.sent(),t.cache=null,t.activated=!1,r;case 3:return[2]}}))}))};!function(t){t.DynamicValue="toDynamicValue",t.Factory="toFactory",t.Provider="toProvider"}(Co||(Co={}));var Do=function(){return Do=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Do.apply(this,arguments)},Zo=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},Lo=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Mo=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};function Fo(t,e,n){var r;if(e.length>0){var i=function(t,e){return t.reduce((function(t,n){var r=e(n);return n.target.type===Yi.ConstructorArgument?t.constructorInjections.push(r):(t.propertyRequests.push(n),t.propertyInjections.push(r)),t.isAsync||(t.isAsync=Io(r)),t}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(e,n),o=Do(Do({},i),{constr:t});r=i.isAsync?function(t){return Zo(this,void 0,void 0,(function(){var e,n;return Lo(this,(function(r){switch(r.label){case 0:return[4,Bo(t.constructorInjections)];case 1:return e=r.sent(),[4,Bo(t.propertyInjections)];case 2:return n=r.sent(),[2,Uo(Do(Do({},t),{constructorInjections:e,propertyInjections:n}))]}}))}))}(o):Uo(o)}else r=new t;return r}function Uo(t){var e,n=new((e=t.constr).bind.apply(e,Mo([void 0],t.constructorInjections,!1)));return t.propertyRequests.forEach((function(e,r){var i=e.target.identifier,o=t.propertyInjections[r];e.target.isOptional()&&void 0===o||(n[i]=o)})),n}function Bo(t){return Zo(this,void 0,void 0,(function(){var e,n,r,i;return Lo(this,(function(o){for(e=[],n=0,r=t;n<r.length;n++)i=r[n],Array.isArray(i)?e.push(Promise.all(i)):e.push(i);return[2,Promise.all(e)]}))}))}function Vo(t,e){var n=function(t,e){var n,r;if(Reflect.hasMetadata(T,t)){var i=Reflect.getMetadata(T,t);try{return null===(r=(n=e)[i.value])||void 0===r?void 0:r.call(n)}catch(o){if(o instanceof Error)throw new Error(f(t.name,o.message))}}}(t,e);return To(n)?n.then((function(){return e})):e}function Ho(t,e){t.scope!==Gi.Singleton&&function(t,e){var n="Class cannot be instantiated in "+(t.scope===Gi.Request?"request":"transient")+" scope.";if("function"==typeof t.onDeactivation)throw new Error(v(e.name,n));if(Reflect.hasMetadata(I,e))throw new Error(g(e.name,n))}(t,e)}var $o=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},zo=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},qo=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,r=e.childRequests,i=e.target&&e.target.isArray(),o=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(i&&o)return r.map((function(e){return qo(t)(e)}));if(!e.target.isOptional()||0!==n.length){var s=n[0];return Yo(t,e,s)}}},Wo=function(t,e){var n=function(t){switch(t.type){case Ki.Factory:return{factory:t.factory,factoryType:Co.Factory};case Ki.Provider:return{factory:t.provider,factoryType:Co.Provider};case Ki.DynamicValue:return{factory:t.dynamicValue,factoryType:Co.DynamicValue};default:throw new Error("Unexpected factory type "+t.type)}}(t);return function(t,e){try{return t()}catch(n){throw no(n)&&(n=e()),n}}((function(){return n.factory.bind(t)(e)}),(function(){return new Error((t=n.factoryType,r=e.currentRequest.serviceIdentifier.toString(),"It looks like there is a circular dependency in one of the '"+t+"' bindings. Please investigate bindings with service identifier '"+r+"'."));var t,r}))},Go=function(t,e,n){var r,i=e.childRequests;switch(function(t){var e=null;switch(t.type){case Ki.ConstantValue:case Ki.Function:e=t.cache;break;case Ki.Constructor:case Ki.Instance:e=t.implementationType;break;case Ki.DynamicValue:e=t.dynamicValue;break;case Ki.Provider:e=t.provider;break;case Ki.Factory:e=t.factory}if(null===e){var n=ro(t.serviceIdentifier);throw new Error("Invalid binding type: "+n)}}(n),n.type){case Ki.ConstantValue:case Ki.Function:r=n.cache;break;case Ki.Constructor:r=n.implementationType;break;case Ki.Instance:r=function(t,e,n,r){Ho(t,e);var i=Fo(e,n,r);return To(i)?i.then((function(t){return Vo(e,t)})):Vo(e,i)}(n,n.implementationType,i,qo(t));break;default:r=Wo(n,e.parentContext)}return r},Ko=function(t,e,n){var r=function(t,e){return e.scope===Gi.Singleton&&e.activated?e.cache:e.scope===Gi.Request&&t.has(e.id)?t.get(e.id):null}(t,e);return null!==r||function(t,e,n){e.scope===Gi.Singleton&&jo(e,n),e.scope===Gi.Request&&Po(t,e,n)}(t,e,r=n()),r},Yo=function(t,e,n){return Ko(t,n,(function(){var r=Go(t,e,n);return r=To(r)?r.then((function(t){return Xo(e,n,t)})):Xo(e,n,r)}))};function Xo(t,e,n){var r,i=Qo(t.parentContext,e,n),o=ns(t.parentContext.container),s=o.next();do{r=s.value;var a=t.parentContext,c=t.serviceIdentifier,l=es(r,c);i=To(i)?ts(l,a,i):Jo(l,a,i),s=o.next()}while(!0!==s.done&&!So(r).hasKey(t.serviceIdentifier));return i}var Qo=function(t,e,n){return"function"==typeof e.onActivation?e.onActivation(t,n):n},Jo=function(t,e,n){for(var r=t.next();!r.done;){if(To(n=r.value(e,n)))return ts(t,e,n);r=t.next()}return n},ts=function(t,e,n){return $o(void 0,void 0,void 0,(function(){var r,i;return zo(this,(function(o){switch(o.label){case 0:return[4,n];case 1:r=o.sent(),i=t.next(),o.label=2;case 2:return i.done?[3,4]:[4,i.value(e,r)];case 3:return r=o.sent(),i=t.next(),[3,2];case 4:return[2,r]}}))}))},es=function(t,e){var n=t._activations;return n.hasKey(e)?n.get(e).values():[].values()},ns=function(t){for(var e=[t],n=t.parent;null!==n;)e.push(n),n=n.parent;return{next:function(){var t=e.pop();return void 0!==t?{done:!1,value:t}:{done:!0,value:void 0}}}};var rs=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||rs(n,e))},is=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new x(t,e),n}},os=is(m),ss=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var r=e.bindings[0].implementationType;return t===r}return!1}},as=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new cs(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=os(t),new cs(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t&&(null!==t.target&&!t.target.isNamed()&&!t.target.isTagged())},new cs(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=is(t)(e),new cs(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return null!==e&&ss(t)(e.parentRequest)},new cs(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return null!==e&&os(t)(e.parentRequest)},new cs(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return null!==n&&is(t)(e)(n.parentRequest)},new cs(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return null!==e&&rs(e,ss(t))},new cs(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return null!==e&&!rs(e,ss(t))},new cs(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return null!==e&&rs(e,os(t))},new cs(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return null!==e&&!rs(e,os(t))},new cs(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return null!==n&&rs(n,is(t)(e))},new cs(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return null!==n&&!rs(n,is(t)(e))},new cs(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return null!==e&&rs(e,t)},new cs(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return null!==e&&!rs(e,t)},new cs(this._binding)},t}(),cs=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new as(this._binding)},t.prototype.onDeactivation=function(t){return this._binding.onDeactivation=t,new as(this._binding)},t}(),ls=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new as(this._binding),this._bindingOnSyntax=new cs(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},t}(),ds=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=Gi.Request,new ls(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=Gi.Singleton,new ls(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=Gi.Transient,new ls(this._binding)},t}(),us=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new as(this._binding),this._bindingOnSyntax=new cs(this._binding),this._bindingInSyntax=new ds(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},t}(),ps=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=Ki.Instance,this._binding.implementationType=t,new us(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("The toSelf function can only be applied when a constructor is used as service identifier");var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=Ki.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Gi.Singleton,new ls(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=Ki.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new us(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=Ki.Constructor,this._binding.implementationType=t,this._binding.scope=Gi.Singleton,new ls(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=Ki.Factory,this._binding.factory=t,this._binding.scope=Gi.Singleton,new ls(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error("Value provided to function binding must be a function!");var e=this.toConstantValue(t);return this._binding.type=Ki.Function,this._binding.scope=Gi.Singleton,e},t.prototype.toAutoFactory=function(t){return this._binding.type=Ki.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},this._binding.scope=Gi.Singleton,new ls(this._binding)},t.prototype.toAutoNamedFactory=function(t){return this._binding.type=Ki.Factory,this._binding.factory=function(e){return function(n){return e.container.getNamed(t,n)}},new ls(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=Ki.Provider,this._binding.provider=t,this._binding.scope=Gi.Singleton,new ls(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}(),hs=function(){function t(){}return t.of=function(e,n,r,i,o){var s=new t;return s.bindings=e,s.middleware=n,s.deactivations=i,s.activations=r,s.moduleActivationStore=o,s},t}();var fs,gs=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(o);if(null==e)throw new Error(o);var n=this._map.get(t);void 0!==n?n.push(e):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(o);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(s)},t.prototype.remove=function(t){if(null==t)throw new Error(o);if(!this._map.delete(t))throw new Error(s)},t.prototype.removeIntersection=function(t){var e=this;this.traverse((function(n,r){var i=t.hasKey(n)?t.get(n):void 0;if(void 0!==i){var o=r.filter((function(t){return!i.some((function(e){return t===e}))}));e._setValue(n,o)}}))},t.prototype.removeByCondition=function(t){var e=this,n=[];return this._map.forEach((function(r,i){for(var o=[],s=0,a=r;s<a.length;s++){var c=a[s];t(c)?n.push(c):o.push(c)}e._setValue(i,o)})),n},t.prototype.hasKey=function(t){if(null==t)throw new Error(o);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,"object"==typeof(r=t)&&null!==r&&"clone"in r&&"function"==typeof r.clone?t.clone():t);var r}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t.prototype._setValue=function(t,e){e.length>0?this._map.set(t,e):this._map.delete(t)},t}(),vs=function(){function t(){this._map=new Map}return t.prototype.remove=function(t){if(this._map.has(t)){var e=this._map.get(t);return this._map.delete(t),e}return this._getEmptyHandlersStore()},t.prototype.addDeactivation=function(t,e,n){this._getModuleActivationHandlers(t).onDeactivations.add(e,n)},t.prototype.addActivation=function(t,e,n){this._getModuleActivationHandlers(t).onActivations.add(e,n)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){e._map.set(n,{onActivations:t.onActivations.clone(),onDeactivations:t.onDeactivations.clone()})})),e},t.prototype._getModuleActivationHandlers=function(t){var e=this._map.get(t);return void 0===e&&(e=this._getEmptyHandlersStore(),this._map.set(t,e)),e},t.prototype._getEmptyHandlersStore=function(){return{onActivations:new gs,onDeactivations:new gs}},t}(),ys=function(){return ys=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ys.apply(this,arguments)},ms=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(e){o(e)}}function a(t){try{c(r.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},bs=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},_s=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},ws=function(){function t(t){var e=t||{};if("object"!=typeof e)throw new Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===e.defaultScope)e.defaultScope=Gi.Transient;else if(e.defaultScope!==Gi.Singleton&&e.defaultScope!==Gi.Transient&&e.defaultScope!==Gi.Request)throw new Error('Invalid Container option. Default scope must be a string ("singleton" or "transient").');if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=Qi(),this._bindingDictionary=new gs,this._snapshots=[],this._middleware=null,this._activations=new gs,this._deactivations=new gs,this.parent=null,this._metadataReader=new to,this._moduleActivationStore=new vs}return t.merge=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=new t,s=_s([e,n],r,!0).map((function(t){return So(t)})),a=So(o);return s.forEach((function(t){var e;e=a,t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))})),o},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=t;r<i.length;r++){var o=i[r],s=n(o.id);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction,s.unbindAsyncFunction,s.onActivationFunction,s.onDeactivationFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ms(this,void 0,void 0,(function(){var e,n,r,i,o;return bs(this,(function(s){switch(s.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,s.label=1;case 1:return n<r.length?(i=r[n],o=e(i.id),[4,i.registry(o.bindFunction,o.unbindFunction,o.isboundFunction,o.rebindFunction,o.unbindAsyncFunction,o.onActivationFunction,o.onDeactivationFunction)]):[3,4];case 2:s.sent(),s.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e){var n=t._removeModuleBindings(e.id);t._deactivateSingletons(n),t._removeModuleHandlers(e.id)}))},t.prototype.unloadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ms(this,void 0,void 0,(function(){var e,n,r,i;return bs(this,(function(o){switch(o.label){case 0:e=0,n=t,o.label=1;case 1:return e<n.length?(r=n[e],i=this._removeModuleBindings(r.id),[4,this._deactivateSingletonsAsync(i)]):[3,4];case 2:o.sent(),this._removeModuleHandlers(r.id),o.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))},t.prototype.bind=function(t){var e=this.options.defaultScope||Gi.Transient,n=new Ji(t,e);return this._bindingDictionary.add(t,n),new ps(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.rebindAsync=function(t){return ms(this,void 0,void 0,(function(){return bs(this,(function(e){switch(e.label){case 0:return[4,this.unbindAsync(t)];case 1:return e.sent(),[2,this.bind(t)]}}))}))},t.prototype.unbind=function(t){if(this._bindingDictionary.hasKey(t)){var e=this._bindingDictionary.get(t);this._deactivateSingletons(e)}this._removeServiceFromDictionary(t)},t.prototype.unbindAsync=function(t){return ms(this,void 0,void 0,(function(){var e;return bs(this,(function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(t)?(e=this._bindingDictionary.get(t),[4,this._deactivateSingletonsAsync(e)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(t),[2]}}))}))},t.prototype.unbindAll=function(){var t=this;this._bindingDictionary.traverse((function(e,n){t._deactivateSingletons(n)})),this._bindingDictionary=new gs},t.prototype.unbindAllAsync=function(){return ms(this,void 0,void 0,(function(){var t,e=this;return bs(this,(function(n){switch(n.label){case 0:return t=[],this._bindingDictionary.traverse((function(n,r){t.push(e._deactivateSingletonsAsync(r))})),[4,Promise.all(t)];case 1:return n.sent(),this._bindingDictionary=new gs,[2]}}))}))},t.prototype.onActivation=function(t,e){this._activations.add(t,e)},t.prototype.onDeactivation=function(t,e){this._deactivations.add(t,e)},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isCurrentBound=function(t){return this._bindingDictionary.hasKey(t)},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,m,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),o=function(t,e,n,r){var i=new ho(Yi.Variable,"",e,new x(n,r)),o=new co(t);return new wo(e,o,null,[],i)}(this,t,e,n);r=i.some((function(t){return t.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(hs.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error("No snapshot available to restore.");this._bindingDictionary=t.bindings,this._activations=t.activations,this._deactivations=t.deactivations,this._middleware=t.middleware,this._moduleActivationStore=t.moduleActivationStore},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){var e=this._getNotAllArgs(t,!1);return this._getButThrowIfAsync(e)},t.prototype.getAsync=function(t){return ms(this,void 0,void 0,(function(){var e;return bs(this,(function(n){return e=this._getNotAllArgs(t,!1),[2,this._get(e)]}))}))},t.prototype.getTagged=function(t,e,n){var r=this._getNotAllArgs(t,!1,e,n);return this._getButThrowIfAsync(r)},t.prototype.getTaggedAsync=function(t,e,n){return ms(this,void 0,void 0,(function(){var r;return bs(this,(function(i){return r=this._getNotAllArgs(t,!1,e,n),[2,this._get(r)]}))}))},t.prototype.getNamed=function(t,e){return this.getTagged(t,m,e)},t.prototype.getNamedAsync=function(t,e){return this.getTaggedAsync(t,m,e)},t.prototype.getAll=function(t){var e=this._getAllArgs(t);return this._getButThrowIfAsync(e)},t.prototype.getAllAsync=function(t){var e=this._getAllArgs(t);return this._getAll(e)},t.prototype.getAllTagged=function(t,e,n){var r=this._getNotAllArgs(t,!0,e,n);return this._getButThrowIfAsync(r)},t.prototype.getAllTaggedAsync=function(t,e,n){var r=this._getNotAllArgs(t,!0,e,n);return this._getAll(r)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,m,e)},t.prototype.getAllNamedAsync=function(t,e){return this.getAllTaggedAsync(t,m,e)},t.prototype.resolve=function(t){var e=this.isBound(t);e||this.bind(t).toSelf();var n=this.get(t);return e||this.unbind(t),n},t.prototype._preDestroy=function(t,e){var n,r;if(Reflect.hasMetadata(I,t))return null===(r=(n=e)[Reflect.getMetadata(I,t).value])||void 0===r?void 0:r.call(n)},t.prototype._removeModuleHandlers=function(t){var e=this._moduleActivationStore.remove(t);this._activations.removeIntersection(e.onActivations),this._deactivations.removeIntersection(e.onDeactivations)},t.prototype._removeModuleBindings=function(t){return this._bindingDictionary.removeByCondition((function(e){return e.moduleId===t}))},t.prototype._deactivate=function(t,e){var n=this,r=Object.getPrototypeOf(e).constructor;try{if(this._deactivations.hasKey(t.serviceIdentifier)){var i=this._deactivateContainer(e,this._deactivations.get(t.serviceIdentifier).values());if(To(i))return this._handleDeactivationError(i.then((function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(t,e,r)})),r)}var o=this._propagateContainerDeactivationThenBindingAndPreDestroy(t,e,r);if(To(o))return this._handleDeactivationError(o,r)}catch(s){if(s instanceof Error)throw new Error(v(r.name,s.message))}},t.prototype._handleDeactivationError=function(t,e){return ms(this,void 0,void 0,(function(){var n;return bs(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t];case 1:return r.sent(),[3,3];case 2:if((n=r.sent())instanceof Error)throw new Error(v(e.name,n.message));return[3,3];case 3:return[2]}}))}))},t.prototype._deactivateContainer=function(t,e){for(var n=this,r=e.next();r.value;){var i=r.value(t);if(To(i))return i.then((function(){return n._deactivateContainerAsync(t,e)}));r=e.next()}},t.prototype._deactivateContainerAsync=function(t,e){return ms(this,void 0,void 0,(function(){var n;return bs(this,(function(r){switch(r.label){case 0:n=e.next(),r.label=1;case 1:return n.value?[4,n.value(t)]:[3,3];case 2:return r.sent(),n=e.next(),[3,1];case 3:return[2]}}))}))},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var i=t.bind(r);return e(i,n),i}},r=function(n){return function(r){var i=t.rebind(r);return e(i,n),i}},i=function(e){return function(n,r){t._moduleActivationStore.addActivation(e,n,r),t.onActivation(n,r)}},o=function(e){return function(n,r){t._moduleActivationStore.addDeactivation(e,n,r),t.onDeactivation(n,r)}};return function(e){return{bindFunction:n(e),isboundFunction:function(e){return t.isBound(e)},onActivationFunction:i(e),onDeactivationFunction:o(e),rebindFunction:r(e),unbindFunction:function(e){return t.unbind(e)},unbindAsyncFunction:function(e){return t.unbindAsync(e)}}}},t.prototype._getAll=function(t){return Promise.all(this._get(t))},t.prototype._get=function(t){var e=ys(ys({},t),{contextInterceptor:function(t){return t},targetType:Yi.Variable});if(this._middleware){var n=this._middleware(e);if(null==n)throw new Error("Invalid return type in middleware. Middleware must return!");return n}return this._planAndResolve()(e)},t.prototype._getButThrowIfAsync=function(t){var e=this._get(t);if(Io(e))throw new Error("You are attempting to construct '"+t.serviceIdentifier+"' in a synchronous way\n but it has asynchronous dependencies.");return e},t.prototype._getAllArgs=function(t){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t}},t.prototype._getNotAllArgs=function(t,e,n,r){return{avoidConstraints:!1,isMultiInject:e,serviceIdentifier:t,key:n,value:r}},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=Oo(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return function(t){return qo(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}(n=e.contextInterceptor(n))}},t.prototype._deactivateIfSingleton=function(t){var e=this;if(t.activated)return To(t.cache)?t.cache.then((function(n){return e._deactivate(t,n)})):this._deactivate(t,t.cache)},t.prototype._deactivateSingletons=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(To(this._deactivateIfSingleton(r)))throw new Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}},t.prototype._deactivateSingletonsAsync=function(t){return ms(this,void 0,void 0,(function(){var e=this;return bs(this,(function(n){switch(n.label){case 0:return[4,Promise.all(t.map((function(t){return e._deactivateIfSingleton(t)})))];case 1:return n.sent(),[2]}}))}))},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(t,e,n){return this.parent?this._deactivate.bind(this.parent)(t,e):this._bindingDeactivationAndPreDestroy(t,e,n)},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(t,e,n){return ms(this,void 0,void 0,(function(){return bs(this,(function(r){switch(r.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(t,e)]:[3,2];case 1:return r.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(t,e,n)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},t.prototype._removeServiceFromDictionary=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error("Could not unbind serviceIdentifier: "+ro(t))}},t.prototype._bindingDeactivationAndPreDestroy=function(t,e,n){var r=this;if("function"==typeof t.onDeactivation){var i=t.onDeactivation(e);if(To(i))return i.then((function(){return r._preDestroy(n,e)}))}return this._preDestroy(n,e)},t.prototype._bindingDeactivationAndPreDestroyAsync=function(t,e,n){return ms(this,void 0,void 0,(function(){return bs(this,(function(r){switch(r.label){case 0:return"function"!=typeof t.onDeactivation?[3,2]:[4,t.onDeactivation(e)];case 1:r.sent(),r.label=2;case 2:return[4,this._preDestroy(n,e)];case 3:return r.sent(),[2]}}))}))},t}();class ParameterBag{constructor(t={}){this.parameters=void 0,this.resolved=!1,this.parameters=new Map(Object.entries(t))}get(t){if(!this.has(t))throw new Error(`Parameter ${String(t)} not found`);return this.parameters.get(t)}set(t,e){this.parameters.set(t,e)}add(t={}){for(const[e,n]of Object.entries(t))this.set(e,n)}remove(t){this.parameters.delete(t)}has(t){return this.parameters.has(t)}all(){return Object.fromEntries(this.parameters.entries())}clear(){this.parameters.clear()}resolve(){this.resolved||(this.resolved=!0)}}class FrozenParameterBag extends ParameterBag{add(t){throw new Error("Impossible to call add() on a frozen ParameterBag.")}clear(){throw new Error("Impossible to call clear() on a frozen ParameterBag.")}set(t,e){throw new Error("Impossible to call set() on a frozen ParameterBag.")}remove(t){throw new Error("Impossible to call remove() on a frozen ParameterBag.")}}class Container{constructor(t){this.container=void 0,this.compiled=!1,this.parameterBag=void 0,this.parameterBag=null!=t?t:new ParameterBag,this.container=new ws({defaultScope:"Singleton"})}set(t,e){if(this.container.isBound(t))throw new Error(`The "${String(t)}" service is already initialized, you cannot replace it.`);"object"==typeof e?this.container.bind(t).toConstantValue(e):this.container.bind(t).to(e)}alias(t,e){this.container.bind(t).toService(e)}get(t){return this.container.get(t)}has(t){return this.container.isBound(t)}getParameterBag(){return this.parameterBag}getParameter(t){return this.parameterBag.get(t)}hasParameter(t){return this.parameterBag.has(t)}setParameter(t,e){this.parameterBag.set(t,e)}getContainer(){return this.container}isCompiled(){return this.compiled}compile(){this.parameterBag.resolve(),this.parameterBag=new FrozenParameterBag(this.parameterBag.all());for(const[t,e]of Object.entries(this.parameterBag.all())){if(this.has(t))throw new Error(`Service with id ${String(t)} already exists. Cannot assign a parameter with this name`);this.container.bind(t).toConstantValue(e)}this.compiled=!0}}class Definition{constructor(t,e=[]){this.cls=void 0,this.tags=new Set,this.calls=[],t&&this.setClass(t)}getClass(){if(!this.cls)throw new Error("Class name must be defined");return this.cls}setClass(t){return this.cls=t,this}setMethodCalls(t=[]){for(const e of t)this.addMethodCall(e.method,e.parameters);return this}addMethodCall(t,e=[]){var n;return null==(n=this.calls)||n.push({method:t,parameters:e}),this}removeMethodCall(t){for(let e=0;e<this.calls.length;e++){this.calls[e].method===t&&this.calls.splice(e,1)}return this}hasMethodCall(t){for(let e=0;e<this.calls.length;e++){if(this.calls[e].method===t)return!0}return!1}getMethodCalls(){return this.calls}setTags(t){return this.tags=new Set(t),this}hasTag(t){return this.tags.has(t)}getTags(){return[...this.tags]}addTag(t){return this.tags.add(t),this}clearTag(t){return this.tags.delete(t),this}clearTags(){return this.tags=new Set,this}}class Reference{constructor(t){this.id=t}getId(){return this.id}}class ContainerBuilder extends Container{constructor(...t){super(...t),this.definitions=new Map}compile(){super.compile();for(const[t,e]of this.definitions){const n=this.container.bind(t).to(e.getClass());if(e.getMethodCalls().length>0&&n.onActivation(((t,n)=>{const r=n;for(const i of e.getMethodCalls()){if(!(i.method in r))throw new Error(`Method ${i.method} doesn't exist on object of type ${r.constructor.name}`);for(let e=0;e<i.parameters.length;e++)i.parameters[e]instanceof Reference&&(i.parameters[e]=t.container.get(i.parameters[e].getId()));r[i.method].apply(r,i.parameters)}return r})),e.getTags().length>0)for(const r of e.getTags())this.container.bind(r).toService(t)}}set(t,e){if(this.isCompiled())throw new Error("Container is already compiled");return super.set(t,e)}register(t,e){return this.setDefinition(t,new Definition(e))}getDefinitions(){return Object.fromEntries(this.definitions.entries())}addDefinitions(t){for(const e of t)this.setDefinition(e.id,e.definition)}setDefinition(t,e){if(this.isCompiled())throw new Error("Adding definition to a compiled container is not allowed.");return this.definitions.set(t,e),e}hasDefinition(t){return this.definitions.has(t)}getDefinition(t){if(!this.hasDefinition(t))throw new Error(`You have requested a non-existent service ${t.toString()}`);return this.definitions.get(t)}}class kernel_Kernel{constructor(t=!1){this.booted=!1,this.container=void 0,this.debug=t}getContainer(){if(!this.container)throw new Error("Cannot retrieve the container from a non-booted kernel.");return this.container}boot(){this.booted||(this.container=this.buildContainer(),this.container.compile())}getKernelParameters(){return{"kernel.debug":this.debug}}buildContainer(){const t=this.getContainerBuilder();return this.build(t),t}getContainerBuilder(){const t=new ContainerBuilder;return t.getParameterBag().add(this.getKernelParameters()),t}build(t){}}let Ss=M()(fs=Reflect.metadata("design:type",Function)(fs=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi])(fs=Reflect.metadata("design:type",Function)(fs=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi])(fs=class AbstractDoctorSpecialtySource{constructor(t){this.apiClient=t}supports(t){var e;return(null!=(e=t.getSettings().getDoctorSpecialtySources())?e:[]).includes(this.getType())}async detect(t){const e=await this.process(t);if(!e)return[];if(e.encryptedDoctorSpecialty)try{return this.apiClient.processDoctorSpecialty(e,t.getId())}catch(n){return[]}return[]}})||fs)||fs)||fs)||fs)||fs;class Message{constructor(t,e){this.headers=void 0,this.uri=void 0,this.uri=t instanceof URL?t:new URL(t),this.headers=new Headers(e)}getHeaders(){return this.headers}hasHeader(t){return this.headers.has(t.toLowerCase())}withHeader(t,e){e=Array.isArray(e)?e:[e];for(const n of e)this.headers.set(t.toLowerCase(),n);return this}withAddedHeader(t,e){e=Array.isArray(e)?e:[e];for(const n of e)this.headers.append(t.toLowerCase(),n);return this}withoutHeader(t){return this.headers.delete(t.toLowerCase()),this}getUri(){return this.uri}withUri(t){return this.uri=t,this}}class request_Request extends Message{constructor(t,e,n,r){super(e,n),this.body=void 0,this.method=void 0,this.method=t,this.body=null!=r?r:null}getMethod(){return this.method}withMethod(t){return this.method=t,this}getBody(){return this.body}withBody(t){return this.body=t,this}}class Response extends Message{constructor(t=200,e,n,r,i,o){var s;super(e,n),this.statusCode=void 0,this.body=void 0,this.jsonBody=void 0,this.reasonPhrase=void 0,this.statusCode=t,this.body=null!=r?r:null,this.jsonBody=null!=i?i:Promise.resolve(null),this.reasonPhrase=null!=(s=null!=o?o:Response.PHRASES[t])?s:""}getStatusCode(){return this.statusCode}getReasonPhrase(){return this.reasonPhrase}withStatus(t,e){var n;return this.statusCode=t,this.reasonPhrase=null!=(n=null!=e?e:Response.PHRASES[t])?n:"",this}getBody(){return this.body}withBody(t){return this.body=t,this}json(){return this.jsonBody}withJson(t){return this.jsonBody=t,this}}Response.PHRASES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-status",208:"Already Reported",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested range not satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version not supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",511:"Network Authentication Required"};const As=(...t)=>{const e=new Headers;for(const n of t)n&&(n instanceof Headers?n.forEach(((t,n)=>{e.set(n,t)})):Array.isArray(n)?n.forEach((([t,n])=>{e.set(t,n)})):"object"==typeof n&&Object.entries(n).forEach((([t,n])=>{e.set(t,n)})));return e};var Es,Rs;let Os=M()(Es=Reflect.metadata("design:type",Function)(Es=Reflect.metadata("design:paramtypes",["undefined"==typeof HttpClientOptions?Object:HttpClientOptions])(Es=Reflect.metadata("design:type",Function)(Es=Reflect.metadata("design:paramtypes",["undefined"==typeof HttpClientOptions?Object:HttpClientOptions])((Rs=class HttpClient{constructor(t={}){this.options={},this.options=Object.assign({},HttpClient.defaultOptions,t,{headers:As(HttpClient.defaultOptions.headers,t.headers)})}async sendRequest(t,e){return fetch(t.getUri().toString(),Object.assign({},this.options,{headers:As(this.options.headers,t.getHeaders()),body:t.getBody(),method:t.getMethod(),credentials:e||this.options.credentials})).then((async function(t){return new Response(t.status,t.url,t.headers,t.body,t.clone().json().catch((()=>null)),t.statusText)}))}createRequest(t,e,n){var r;const i=new request_Request(t,this.createUri(e)),o=Object.assign({},n);let s=null==n?void 0:n.body;if(void 0!==(null==o?void 0:o.json)){if(void 0!==s&&""!==s)throw Error('Define either the "json" or the "body" option, setting both is not supported.');s=JSON.stringify(o.json),delete o.json,i.hasHeader("content-type")||i.withHeader("content-type","application/json")}if("[object Object]"===Object.prototype.toString.call(s)&&(s=new URLSearchParams(s).toString(),i.hasHeader("content-type")||i.withHeader("content-type","application/x-www-form-urlencoded")),i.hasHeader("accept")||i.withHeader("accept","*/*"),["GET","HEAD"].includes(t)&&s)throw new Error("Request with GET/HEAD method cannot have body");return i.withBody(null!=(r=s)?r:null),i}createUri(t){return new URL(t,this.options.baseUri)}withOptions(t){return void 0!==t.headers&&(t.headers=new Headers(t.headers)),this.options=Object.assign({},HttpClient.defaultOptions,t),this}},Rs.defaultOptions={},Es=Rs))||Es)||Es)||Es)||Es)||Es;var Ts;let Is=M()(Ts=function(t,e){return U()(t,void 0,3)}(Ts=Reflect.metadata("design:type",Function)(Ts=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi,void 0===H?Object:H,void 0===Os?Object:Os,void 0===at?Object:at])(Ts=Reflect.metadata("design:type",Function)(Ts=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi,void 0===H?Object:H,void 0===Os?Object:Os,void 0===at?Object:at])(Ts=class TarglDoctorSpecialtySource extends Ss{constructor(t,e,n,r){super(t),this.applicationContext=e,this.httpClient=n,this.logger=r}getType(){return q.TARGL}async process(t){var e;const n=null==(e=t.getSettings().getDoctorSpecialtyDetectors())||null==(e=e[this.getType()])?void 0:e.url;if(!n)return{encryptedDoctorSpecialty:void 0,source:this.getType()};try{const t=new URL(n);t.searchParams.set("sessionId",this.applicationContext.getSessionId());const e=this.httpClient.createRequest("GET",t),r=await this.httpClient.sendRequest(e,"include"),i=await r.json();return{source:this.getType(),encryptedDoctorSpecialty:i.s?i.s:void 0}}catch(i){var r;return null==(r=this.logger)||r.error(i),{encryptedDoctorSpecialty:void 0,source:this.getType()}}}})||Ts)||Ts)||Ts)||Ts)||Ts)||Ts;var Cs;let xs=M()(Cs=Reflect.metadata("design:type",Function)(Cs=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi])(Cs=Reflect.metadata("design:type",Function)(Cs=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi])(Cs=class AbstractNpiSource{constructor(t){this.apiClient=t}supports(t){var e;return(null!=(e=t.getSettings().getNpiSources())?e:[]).includes(this.getType())}async detect(t){const e=await this.process(t);return e&&(e.encryptedNpi||e.aimId)?this.apiClient.processNpi(e,t.getId()):[]}})||Cs)||Cs)||Cs)||Cs)||Cs;var Ns;let Ps=M()(Ns=Reflect.metadata("design:type",Function)(Ns=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi,void 0===wn?Object:wn])(Ns=Reflect.metadata("design:type",Function)(Ns=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi,void 0===wn?Object:wn])(Ns=class DmdNpiSource extends xs{constructor(t,e){super(t),this.apiClient=t,this.browserObjectModel=e}getType(){return $.DMD}async process(t){var e;const n=null==(e=t.getSettings().getNpiDetectors())||null==(e=e[this.getType()])?void 0:e.url;if(!n)return{encryptedNpi:void 0,aimId:void 0,source:this.getType()};const r=new URL(n);return r.searchParams.set("client-origin",this.browserObjectModel.getWindow().location.origin),r.searchParams.set("timestamp",Date.now().toString()),new Promise((t=>{const e=({origin:e,data:o})=>{if(new URL(n).pathname="",e.replace(/\/$/,"")!==r.toString().replace(/\/$/,""))return;const s=null==o?void 0:o.aimId;clearTimeout(i),t({aimId:s,encryptedNpi:void 0,source:this.getType()})},i=setTimeout((()=>{this.browserObjectModel.getWindow().removeEventListener("message",e,!1),t({aimId:void 0,encryptedNpi:void 0,source:this.getType()})}),100);this.browserObjectModel.getWindow().addEventListener("message",e,!1);const o=this.browserObjectModel.getDocument().createElement("iframe");o.setAttribute("style","display:none!important"),o.setAttribute("src",r.toString()),this.browserObjectModel.getDocument().body.appendChild(o)}))}})||Ns)||Ns)||Ns)||Ns)||Ns;var js;let ks=M()(js=function(t,e){return U()(t,void 0,2)}(js=Reflect.metadata("design:type",Function)(js=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi,void 0===Os?Object:Os,void 0===at?Object:at])(js=Reflect.metadata("design:type",Function)(js=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi,void 0===Os?Object:Os,void 0===at?Object:at])(js=class LhkNpiSource extends xs{constructor(t,e,n){super(t),this.httpClient=e,this.logger=n}getType(){return $.LHK}async process(t){var e;const n=null==(e=t.getSettings().getNpiDetectors())||null==(e=e[this.getType()])?void 0:e.url;if(!n)return{encryptedNpi:void 0,aimId:void 0,source:this.getType()};try{const t=new URL(n);t.searchParams.set("test","true");const e=this.httpClient.createRequest("GET",t);e.withHeader("X-Session-Id","test");const r=await this.httpClient.sendRequest(e,"include"),i=await r.json();return{source:this.getType(),encryptedNpi:i.encrypted?i.encrypted:void 0}}catch(i){var r;return null==(r=this.logger)||r.error(i),{encryptedNpi:void 0,aimId:void 0,source:this.getType()}}}})||js)||js)||js)||js)||js)||js;var Ds;let Zs=M()(Ds=Reflect.metadata("design:type",Function)(Ds=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===it?Object:it])(Ds=Reflect.metadata("design:type",Function)(Ds=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===it?Object:it])(Ds=class SwoopCallbackOnlyIntegration{constructor(t,e){this.browserObjectModel=t,this.userContext=e}async run(t){var e;const n=this.browserObjectModel.getWindow()._npi_cb;if(!this.supports(t)||void 0===n)return;const r=null==(e=this.userContext.getNpis().find((t=>t.getDestination()===z.SWOOP)))?void 0:e.getEncryptedNumber();if(r)throw n(r),new IntegrationStoppedExecutionException(this)}supports(t){return t.getSettings().getSwoopIntegrationType()===Q.CALLBACK_ONLY}})||Ds)||Ds)||Ds)||Ds)||Ds;class IntegrationRunException extends Error{constructor(t,e){super(),this.integration=t,this.adSet=e}getIntegration(){return this.integration}getAdSet(){return this.adSet}}var Ls;let Ms=M()(Ls=Reflect.metadata("design:type",Function)(Ls=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===it?Object:it])(Ls=Reflect.metadata("design:type",Function)(Ls=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===it?Object:it])(Ls=class SwoopDefaultIntegration{constructor(t,e){this.browserObjectModel=t,this.userContext=e}async run(t){var e;if(!this.supports(t))return;const n=null==(e=this.userContext.getNpis().find((t=>t.getDestination()===z.SWOOP)))?void 0:e.getEncryptedNumber();if(!n)return;const r=t.getSettings().getSwoopScriptUrl(),i=t.getSettings().getSwoopId();if(!r||!i)throw new IntegrationRunException(this,t);const o=this.browserObjectModel.getDocument().createElement("script");o.src=r,o.id="swoop_sdk",o.dataset.domain=i,o.dataset.npi=n,this.browserObjectModel.getDocument().getElementsByTagName("body")[0].appendChild(o)}supports(t){return t.getSettings().getSwoopIntegrationType()===Q.DEFAULT}})||Ls)||Ls)||Ls)||Ls)||Ls;var Fs;let Us=M()(Fs=Reflect.metadata("design:type",Function)(Fs=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===it?Object:it])(Fs=Reflect.metadata("design:type",Function)(Fs=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===it?Object:it])(Fs=class SwoopPassthroughIntegration extends Ms{constructor(t,e){super(t,e),this.browserObjectModel=t,this.userContext=e}supports(t){return t.getSettings().getSwoopIntegrationType()===Q.PASSTHROUGH}})||Fs)||Fs)||Fs)||Fs)||Fs;var Bs;let Vs=M()(Bs=Reflect.metadata("design:type",Function)(Bs=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===H?Object:H])(Bs=Reflect.metadata("design:type",Function)(Bs=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===H?Object:H])(Bs=class UserMetricIntegration{constructor(t,e){this.browserObjectModel=t,this.applicationContext=e}async run(t){if(!this.supports(t))return;const e=t.getSettings().getUserMetricsScriptUrl();if(!e)return;const n=this.browserObjectModel.getDocument().createElement("script");n.src=e,n.type="text/javascript",n.async=!0,n.onload=()=>{const t=this.browserObjectModel.getWindow().MetricsManager;t&&new t(this.applicationContext.getSessionId())},this.browserObjectModel.getDocument().getElementsByTagName("head")[0].appendChild(n)}supports(t){var e,n;return(null!=(e=null==(n=t.getSettings().getUserMetricsScriptUrl())||null==(n=n.trim())?void 0:n.length)?e:0)>0}})||Bs)||Bs)||Bs)||Bs)||Bs;var Hs,$s;let zs=M()(Hs=Reflect.metadata("design:type",Function)(Hs=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn])(Hs=Reflect.metadata("design:type",Function)(Hs=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn])(($s=class DoiProvider{constructor(t){this.browserObjectModel=t}provide(){for(const e of DoiProvider.selectors){var t;const n=this.browserObjectModel.getDocument().querySelector(e);if(!n)continue;const r=null!=(t=n.getAttribute("content"))?t:n.textContent;if(r)return r}return null}},$s.selectors=['meta[name="citation_doi" i]'],Hs=$s))||Hs)||Hs)||Hs)||Hs)||Hs;var qs;let Ws=M()(qs=Reflect.metadata("design:type",Function)(qs=Reflect.metadata("design:paramtypes",[void 0===zs?Object:zs])(qs=Reflect.metadata("design:type",Function)(qs=Reflect.metadata("design:paramtypes",[void 0===zs?Object:zs])(qs=class DoiMetadataProcessor{constructor(t){this.doiProvider=t}async process(t){t.setDoi(this.doiProvider.provide())}})||qs)||qs)||qs)||qs)||qs;var Gs,Ks;let Ys=M()(Gs=Reflect.metadata("design:type",Function)(Gs=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn])(Gs=Reflect.metadata("design:type",Function)(Gs=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn])((Ks=class TitleProvider{constructor(t){this.browserObjectModel=t}provide(){for(const e of TitleProvider.selectors){var t;const n=this.browserObjectModel.getDocument().querySelector(e);if(!n)continue;const r=null!=(t=n.getAttribute("content"))?t:n.textContent;if(r)return r}return null}},Ks.selectors=['meta[name="citation_title" i]','meta[name="DC.title" i]','meta[name="og:title" i]','meta[property="og:title" i]','meta[name="twitter:title" i]','meta[name="title" i]',"title"],Gs=Ks))||Gs)||Gs)||Gs)||Gs)||Gs;var Xs;let Qs=M()(Xs=Reflect.metadata("design:type",Function)(Xs=Reflect.metadata("design:paramtypes",[void 0===Ys?Object:Ys])(Xs=Reflect.metadata("design:type",Function)(Xs=Reflect.metadata("design:paramtypes",[void 0===Ys?Object:Ys])(Xs=class TitleMetadataProcessor{constructor(t){this.titleProvider=t}async process(t){t.setTitle(this.titleProvider.provide())}})||Xs)||Xs)||Xs)||Xs)||Xs;class AdSlotContainerItem{constructor(){this.id=void 0,this.title=void 0,this.subtitle=null,this.campaignId=void 0,this.publicationId=void 0,this.url=void 0,this.clickUrl=void 0,this.impressionUrl=void 0,this.linkingType=void 0,this.authors=null,this.publicationName=null,this.publicationAbbreviatedName=null,this.publicationDate=null,this.creativeType=void 0,this.creative=void 0,this.adSlotContainer=void 0}getId(){if(void 0===this.id)throw new Error(`Attempt to access "id" of ${this.constructor.name} before initialization`);return this.id}getTitle(){var t;return null!=(t=this.title)?t:null}getSubtitle(){var t;return null!=(t=this.subtitle)?t:null}getUrl(){var t;return null!=(t=this.url)?t:null}getClickUrl(){var t;return null!=(t=this.clickUrl)?t:null}getImpressionUrl(){var t;return null!=(t=this.impressionUrl)?t:null}getCampaignId(){var t;return null!=(t=this.campaignId)?t:null}getPublicationId(){var t;return null!=(t=this.publicationId)?t:null}getAuthors(){var t;return null!=(t=this.authors)?t:null}getPublicationName(){var t;return null!=(t=this.publicationName)?t:null}getPublicationAbbreviatedName(){var t;return null!=(t=this.publicationAbbreviatedName)?t:null}getPublicationDate(){var t;return null!=(t=this.publicationDate)?t:null}getLinkingType(){var t;return null!=(t=this.linkingType)?t:null}getCreativeType(){var t;return null!=(t=this.creativeType)?t:null}getCreative(){var t;return null!=(t=this.creative)?t:null}getAdSlotContainer(){var t;return null!=(t=this.adSlotContainer)?t:null}setAdSlotContainer(t){return this.adSlotContainer=t,this}}var Js;let ta=M()(Js=class AdSlotContainerItemResolver{resolve(t){const e=new AdSlotContainerItem;return Bn(e,{id:t.id,title:t.title,subtitle:t.subtitle,publicationName:t.publicationName,publicationAbbreviatedName:t.publicationAbbreviatedName,publicationDate:t.publicationDate,campaignId:t.campaignId,publicationId:t.publicationId,url:t.url,clickUrl:t.clickUrl,impressionUrl:t.impressionUrl,linkingType:t.linkingType,authors:t.authors,creativeType:t.creativeType,creative:t.creative}),e}})||Js;var ea;let na=M()(ea=Reflect.metadata("design:type",Function)(ea=Reflect.metadata("design:paramtypes",[void 0===it?Object:it])(ea=Reflect.metadata("design:type",Function)(ea=Reflect.metadata("design:paramtypes",[void 0===it?Object:it])(ea=class AdSlotConstraintNpiValidator{constructor(t){this.userContext=t}supports(t){return t.getType()===et.NPI}validate(t){var e;if(!this.userContext.hasNpi())return!1;if(null!=(e=t.getConstraint())&&e.any)return!0;return this.userContext.getNpis().filter((t=>null!==t.getEncryptedNumber())).map((t=>t.getEncryptedNumber())).some((e=>{var n,r;return(null!=(n=null==(r=t.getConstraint())?void 0:r.values)?n:[]).includes(e)}))}})||ea)||ea)||ea)||ea)||ea;var ra;let ia=M()(ra=Reflect.metadata("design:type",Function)(ra=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===bn?Object:bn])(ra=Reflect.metadata("design:type",Function)(ra=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===bn?Object:bn])(ra=class ImageCreativeView{constructor(t,e){this.browserObjectModel=t,this.stylesheetRenderer=e}render(t){var e,n,r,i,o;const s=null==(e=t.getAdSlotContainer())?void 0:e.getAdSlot();if(!s)throw new Error("AdSlot is required to render LinkCreativeView");const a=this.browserObjectModel.getDocument().createElement("null"),c=s.getSettings().getLinkProperties(),l=t.getLinkingType(),d={adSlot:s,dom:this.browserObjectModel.getDocument(),stylesheet:this.stylesheetRenderer.getStylesheet(s)},u=Rn(Object.assign({href:null!=(n=t.getUrl())?n:"",className:this.stylesheetRenderer.getClass(s,"listItemLink"),linkingType:l,attributes:{"data-id":t.getId(),"data-c-id":t.getCampaignId(),"data-p-id":t.getPublicationId(),"data-linking-type":null==l?void 0:l.toString()}},c[l===X.INTERNAL?"internal":"external"]),d),p=((t,e)=>{var n,r;const i=e.dom.createElement("img");return i.src=null!=(n=t.src)?n:"",t.title&&(i.title=t.title),t.width&&(i.width=t.width),t.height&&(i.height=t.height),t.alt&&(i.alt=t.alt),i.className=null!=(r=t.className)?r:"",i})({src:null==(r=t.getCreative())?void 0:r.fileResource.url,width:un[s.getSettings().getFormat()].width,height:un[s.getSettings().getFormat()].height,alt:null==(i=t.getCreative())||null==(i=i.metadata)?void 0:i.alt,title:null!=(o=t.getTitle())?o:void 0,className:this.stylesheetRenderer.getClass(s,"listItemImg")},d);return u.appendChild(p),a.appendChild(u),a}supports(t){return t.getCreativeType()===G.IMAGE}})||ra)||ra)||ra)||ra)||ra;var oa;let sa=M()(oa=Reflect.metadata("design:type",Function)(oa=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===bn?Object:bn])(oa=Reflect.metadata("design:type",Function)(oa=Reflect.metadata("design:paramtypes",[void 0===wn?Object:wn,void 0===bn?Object:bn])(oa=class LinkCreativeView{constructor(t,e){this.browserObjectModel=t,this.stylesheetRenderer=e}render(t){var e,n,r,i;const o=null==(e=t.getAdSlotContainer())?void 0:e.getAdSlot();if(!o)throw new Error("AdSlot is required to render LinkCreativeView");const s=this.browserObjectModel.getDocument().createElement("null"),a=o.getSettings().getLinkProperties(),c=t.getLinkingType(),l={adSlot:o,dom:this.browserObjectModel.getDocument(),stylesheet:this.stylesheetRenderer.getStylesheet(o)},d=Rn(Object.assign({href:null!=(n=t.getUrl())?n:"",className:this.stylesheetRenderer.getClass(o,"listItemLink"),linkingType:c,textContent:null!=(r=t.getTitle())?r:"",attributes:{"data-id":t.getId(),"data-c-id":t.getCampaignId(),"data-p-id":t.getPublicationId(),"data-linking-type":null==c?void 0:c.toString()}},a[c===X.INTERNAL?"internal":"external"]),l);if(c===X.EXTERNAL){const t=this.browserObjectModel.getDocument().createElement("span");t.className=this.stylesheetRenderer.getClass(o,"listItemTitleExternalLinkIcon"),t.innerHTML='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\r\n  <g>\r\n    <path\r\n      d="M10.0002 5H8.2002C7.08009 5 6.51962 5 6.0918 5.21799C5.71547 5.40973 5.40973 5.71547 5.21799 6.0918C5 6.51962 5 7.08009 5 8.2002V15.8002C5 16.9203 5 17.4801 5.21799 17.9079C5.40973 18.2842 5.71547 18.5905 6.0918 18.7822C6.5192 19 7.07899 19 8.19691 19H15.8031C16.921 19 17.48 19 17.9074 18.7822C18.2837 18.5905 18.5905 18.2839 18.7822 17.9076C19 17.4802 19 16.921 19 15.8031V14M20 9V4M20 4H15M20 4L13 11"\r\n      stroke="#a3afc5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\r\n  </g>\r\n</svg>\r\n',d.appendChild(t)}s.appendChild(d);const u=((t,e)=>{var n,r,i,o,s,a,c;const l=e.dom.createElement("span");return l.className=null!=(n=t.className)?n:e.stylesheet.classes.listItemSubtitle,(null==(r=t.subtitle)?void 0:r.type)===Y.TEXT&&null!=(i=t.subtitle)&&i.content?(l.textContent=t.subtitle.content,l):(null==(o=t.subtitle)?void 0:o.type)===Y.LINK&&null!=(s=t.subtitle)&&s.content&&null!=(a=t.subtitle)&&a.url?(l.appendChild(Rn(Object.assign({href:t.subtitle.url,textContent:t.subtitle.content},null==(d=e.adSlot.getSettings().getLinkProperties())?void 0:d.subtitle),e)),l):(null==(c=t.subtitle)?void 0:c.type)===Y.HIDDEN?(l.style.display="none",l):null;var d})({subtitle:t.getSubtitle()},l);if("none"===(null==u||null==(i=u.style)?void 0:i.display))return s;const p=this.browserObjectModel.getDocument().createElement("div");if(p.className=this.stylesheetRenderer.getClass(o,"listItemMeta"),u)p.appendChild(u);else{var h,f;const e=["authors",t.getPublicationAbbreviatedName()&&(null!=(h=null==(f=t.getPublicationAbbreviatedName())?void 0:f.length)?h:0)>0?"publicationAbbreviatedName":"publicationName","publicationDate"],n=[];for(const r of e){var g;const e=`${r.charAt(0).toUpperCase()}${r.slice(1)}`,i=`get${e}`,s=t[i]?t[i]():"";if(s&&(null!=(g=s.length)?g:0)>0){const t=this.browserObjectModel.getDocument().createElement("span");t.className=this.stylesheetRenderer.getClass(o,`listItem${e}`),t.textContent=s,n.push(t)}}for(let t=0;t<n.length;t++){const e=n[t],r=t===n.length-1;p.appendChild(e),r||p.appendChild(this.browserObjectModel.getDocument().createTextNode(", "))}}return s.appendChild(p),s}supports(t){return t.getCreativeType()===G.LINK}})||oa)||oa)||oa)||oa)||oa;var aa;let ca=M()(aa=function(t,e){return U()(t,void 0,2)}(aa=Reflect.metadata("design:type",Function)(aa=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi,void 0===H?Object:H,void 0===at?Object:at])(aa=Reflect.metadata("design:type",Function)(aa=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi,void 0===H?Object:H,void 0===at?Object:at])(aa=class AdSetSubscriber{constructor(t,e,n){this.apiClient=t,this.applicationContext=e,this.logger=n}getSubscribedEvents(){return{[ot.AD_SET_PRE_RESOLVE]:"onPreResolve",[ot.AD_SET_POST_RESOLVE]:"onPostResolve"}}async onPreResolve(t){var e;null==(e=this.logger)||e.debug(`Ad set ${t.getId()} onPreRender`)}async onPostResolve(t){var e;null==(e=this.logger)||e.debug(`Ad set ${t.getId()} onPostRender`)}})||aa)||aa)||aa)||aa)||aa)||aa;var la;let da=M()(la=function(t,e){return U()(t,void 0,4)}(la=Reflect.metadata("design:type",Function)(la=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi,void 0===ta?Object:ta,void 0===it?Object:it,void 0===H?Object:H,void 0===at?Object:at])(la=Reflect.metadata("design:type",Function)(la=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi,void 0===ta?Object:ta,void 0===it?Object:it,void 0===H?Object:H,void 0===at?Object:at])(la=class AdSlotContainerSubscriber{constructor(t,e,n,r,i){this.apiClient=t,this.adSlotElementItemResolver=e,this.userContext=n,this.applicationContext=r,this.logger=i}getSubscribedEvents(){return{[ot.AD_SLOT_CONTAINER_PRE_RENDER]:"onPreRender",[ot.AD_SLOT_CONTAINER_POST_RENDER]:"onPostRender",[ot.AD_SLOT_CONTAINER_NOT_FOUND]:"onNotFound",[ot.AD_SLOT_CONTAINER_ITEM_VIEW]:"onItemView",[ot.AD_SLOT_CONTAINER_VIEW]:"onView"}}async onPreRender(t){var e,n,r,i,o;const s=t.getAdSlotContainer(),a=null==(e=t.getAdSlotContainer())?void 0:e.getAdSlot();if(!s||!a)return;const c=await this.apiClient.getRecommendations(a.getId(),{npis:this.userContext.getNpis().filter((t=>null!==t.getEncryptedNumber())).map((t=>({encryptedNumber:t.getEncryptedNumber(),source:t.getSource(),destination:t.getDestination()}))),doctorSpecialties:this.userContext.getDoctorSpecialties().filter((t=>null!==t.getEncryptedId())).map((t=>({encryptedId:t.getEncryptedId(),source:t.getSource(),destination:t.getDestination()}))),sourceMetadata:{title:null!=(n=null==(r=this.applicationContext.getMetadata())?void 0:r.getTitle())?n:void 0,doi:null!=(i=null==(o=this.applicationContext.getMetadata())?void 0:o.getDoi())?i:void 0},startTime:this.applicationContext.getStartTime()});for(const l of c)s.addItem(this.adSlotElementItemResolver.resolve(l));t.setItems(c)}async onPostRender(t){var e,n,r,i,o;null==(e=this.logger)||e.debug(`Ad slot Element for Ad Slot ${null==(n=t.getAdSlotContainer())||null==(n=n.getAdSlot())?void 0:n.getId()} onPostRender`);const s=null==(r=t.getAdSlotContainer())?void 0:r.getAdSlot();s&&await this.apiClient.registerEvent(s.getId(),{eventType:nt.AD_SLOT_LOAD,placementIndex:null!=(i=null==(o=t.getAdSlotContainer())?void 0:o.getIndex())?i:0,startTime:this.applicationContext.getStartTime(),npis:this.userContext.getNpis().filter((t=>null!==t.getEncryptedNumber())).map((t=>({encryptedNumber:t.getEncryptedNumber(),source:t.getSource(),destination:t.getDestination()}))),doctorSpecialties:this.userContext.getDoctorSpecialties().filter((t=>null!==t.getEncryptedId())).map((t=>({encryptedId:t.getEncryptedId(),source:t.getSource(),destination:t.getDestination()})))})}async onNotFound(t){var e;null==(e=this.logger)||e.debug(`AdSlotElement id ${t.getId()} not found. Used datasetId ${t.getDatasetId()}`)}async onItemView(t){var e,n,r,i,o;const s=null==(e=t.getAdSlotContainerItem().getAdSlotContainer())?void 0:e.getAdSlot(),a=t.getAdSlotContainerItem().getImpressionUrl();var c,l;if(!s)return void(null==(c=this.logger)||c.error(`AdSlot not set for AdSlotContainerItem with id ${t.getAdSlotContainerItem().getId()}`));if(!a)return void(null==(l=this.logger)||l.error(`Url not set for AdSlotContainerItem with id ${t.getAdSlotContainerItem().getId()}`));const d=null!=(n=a.replace(/\/$/,"").split("/").pop())?n:"";await this.apiClient.registerEvent(s.getId(),{eventType:nt.AD_SLOT_ITEM_IMPRESSION,placementIndex:null!=(r=null==(i=t.getAdSlotContainerItem().getAdSlotContainer())?void 0:i.getIndex())?r:0,encryptedPayload:d,startTime:this.applicationContext.getStartTime()}),null==(o=this.logger)||o.debug(`AdSlotContainerItem with id ${t.getAdSlotContainerItem().getId()} viewed`)}async onView(t){var e,n,r,i;const o=null==(e=t.getAdSlotContainer())?void 0:e.getAdSlot();var s;o?(await this.apiClient.registerEvent(o.getId(),{eventType:nt.AD_SLOT_VIEW,placementIndex:null!=(n=null==(r=t.getAdSlotContainer())?void 0:r.getIndex())?n:0,startTime:this.applicationContext.getStartTime(),npis:this.userContext.getNpis().filter((t=>null!==t.getEncryptedNumber())).map((t=>({encryptedNumber:t.getEncryptedNumber(),source:t.getSource(),destination:t.getDestination()}))),doctorSpecialties:this.userContext.getDoctorSpecialties().filter((t=>null!==t.getEncryptedId())).map((t=>({encryptedId:t.getEncryptedId(),source:t.getSource(),destination:t.getDestination()})))}),null==(i=this.logger)||i.debug(`AdSlotContainer with index ${t.getAdSlotContainer().getIndex()} viewed`)):null==(s=this.logger)||s.error(`AdSlot not set for AdSlotContainer with index ${t.getAdSlotContainer().getIndex()}`)}})||la)||la)||la)||la)||la)||la;var ua;let pa=M()(ua=function(t,e){return U()(t,void 0,0)}(ua=Reflect.metadata("design:type",Function)(ua=Reflect.metadata("design:paramtypes",[void 0===at?Object:at])(ua=Reflect.metadata("design:type",Function)(ua=Reflect.metadata("design:paramtypes",[void 0===at?Object:at])(ua=class AdSlotSubscriber{constructor(t){this.logger=t}getSubscribedEvents(){return{[ot.AD_SLOT_PRE_RENDER]:"onPreRender",[ot.AD_SLOT_POST_RENDER]:"onPostRender"}}async onPreRender(t){var e;null==(e=this.logger)||e.debug(`Ad slot ${t.getAdSlot().getId()} onPreRender`)}onPostRender(t){var e;null==(e=this.logger)||e.debug(`Ad slot ${t.getAdSlot().getId()} onPostRender`)}})||ua)||ua)||ua)||ua)||ua)||ua;var ha;let fa=M()(ha=function(t,e){return U()(t,void 0,0)}(ha=Reflect.metadata("design:type",Function)(ha=Reflect.metadata("design:paramtypes",[void 0===at?Object:at])(ha=Reflect.metadata("design:type",Function)(ha=Reflect.metadata("design:paramtypes",[void 0===at?Object:at])(ha=class ApplicationSubscriber{constructor(t){this.logger=t}getSubscribedEvents(){return{[ot.APPLICATION_PRE_RUN]:"onApplicationPreRun",[ot.APPLICATION_POST_RUN]:"onApplicationPostRun",[ot.APPLICATION_PRE_INIT]:"onApplicationPreInit",[ot.APPLICATION_POST_INIT]:"onApplicationPostInit"}}onApplicationPreRun(t){var e;null==(e=this.logger)||e.debug("Pre run application")}onApplicationPostRun(t){var e;null==(e=this.logger)||e.debug("Post run application")}onApplicationPreInit(t){var e;null==(e=this.logger)||e.debug("Pre init application")}onApplicationPostInit(t){var e;null==(e=this.logger)||e.debug("Post init application")}})||ha)||ha)||ha)||ha)||ha)||ha;var ga;let va=M()(ga=function(t,e){return U()(t,void 0,2)}(ga=Reflect.metadata("design:type",Function)(ga=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi,void 0===it?Object:it,void 0===at?Object:at])(ga=Reflect.metadata("design:type",Function)(ga=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi,void 0===it?Object:it,void 0===at?Object:at])(ga=class BackendSubscriber{constructor(t,e,n){this.apiClient=t,this.userContext=e,this.logger=n}getSubscribedEvents(){return{[ot.BACKEND_EVENT]:"onBackendEvent"}}async onBackendEvent(t){var e;return null==(e=this.logger)||e.debug(`Registering event: ${t.getType()} for ad slot ${t.getAdSlotIdentifier()}`),this.apiClient.registerEvent(t.getAdSlotIdentifier(),{eventType:t.getType(),npis:this.userContext.getNpis().filter((t=>null!==t.getEncryptedNumber())).map((t=>({encryptedNumber:t.getEncryptedNumber(),source:t.getSource(),destination:t.getDestination()}))),doctorSpecialties:this.userContext.getDoctorSpecialties().filter((t=>null!==t.getEncryptedId())).map((t=>({encryptedId:t.getEncryptedId(),source:t.getSource(),destination:t.getDestination()})))})}})||ga)||ga)||ga)||ga)||ga)||ga;var ya;let ma=M()(ya=function(t,e){return U()(t,void 0,0)}(ya=Reflect.metadata("design:type",Function)(ya=Reflect.metadata("design:paramtypes",[void 0===at?Object:at])(ya=Reflect.metadata("design:type",Function)(ya=Reflect.metadata("design:paramtypes",[void 0===at?Object:at])(ya=class IntegrationsSubscriber{constructor(t){this.logger=t}getSubscribedEvents(){return{[ot.INTEGRATION_PRE_RUN]:"onIntegrationPreRun",[ot.INTEGRATION_POST_RUN]:"onIntegrationPostRun"}}onIntegrationPreRun(t){var e;null==(e=this.logger)||e.debug(`Pre run integration: ${t.getIntegration().constructor.name}`)}onIntegrationPostRun(t){var e;null==(e=this.logger)||e.debug(`Post run integration: ${t.getIntegration().constructor.name}`)}})||ya)||ya)||ya)||ya)||ya)||ya;var ba;let _a=M()(ba=function(t,e){return U()(t,void 0,0)}(ba=Reflect.metadata("design:type",Function)(ba=Reflect.metadata("design:paramtypes",[void 0===at?Object:at])(ba=Reflect.metadata("design:type",Function)(ba=Reflect.metadata("design:paramtypes",[void 0===at?Object:at])(ba=class NpiDetectionSubscriber{constructor(t){this.logger=t}getSubscribedEvents(){return{[ot.NPI_PRE_DETECT]:"onPreDetect",[ot.NPI_POST_DETECT]:"onPostDetect"}}async onPreDetect(t){var e;null==(e=this.logger)||e.debug(`Pre detect npi for source "${t.getSource().constructor.name}"`)}async onPostDetect(t){var e;null==(e=this.logger)||e.debug(`Post detect npi "${t.getNpi().getEncryptedNumber()}" and source "${t.getSource().constructor.name}"`)}})||ba)||ba)||ba)||ba)||ba)||ba;var wa;let Sa=M()(wa=function(t,e){return U()(t,void 0,1)}(wa=Reflect.metadata("design:type",Function)(wa=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi,void 0===at?Object:at])(wa=Reflect.metadata("design:type",Function)(wa=Reflect.metadata("design:paramtypes",[void 0===Bi?Object:Bi,void 0===at?Object:at])(wa=class TelemetrySubscriber{constructor(t,e){this.apiClient=t,this.logger=e}getSubscribedEvents(){return{[ot.TELEMETRY_EVENT]:"onTelemetryEvent"}}async onTelemetryEvent(t){var e;null==(e=this.logger)||e.debug(`Registering event: ${t.getId()}`)}})||wa)||wa)||wa)||wa)||wa)||wa;class Kernel extends kernel_Kernel{constructor(t){super(t.isDebug()),this.applicationContext=t}getKernelParameters(){return Object.assign({},super.getKernelParameters(),{"kernel.version":this.applicationContext.getVersion(),"kernel.sessionId":this.applicationContext.getSessionId()})}build(t){t.set(H,this.applicationContext),t.register(at,at).addMethodCall("setEnabled",[t.hasParameter("kernel.debug")&&t.getParameter("kernel.debug")]),t.set(it,it),t.set(Wi,Wi),t.set(wn,wn),t.set(vn,vn),t.set(bn,bn),this.registerMetadataConfiguration(t),this.registerIntegrationConfiguration(t),this.registerAdSetConfiguration(t),this.registerAdSlotConfiguration(t),this.registerNpiDetectorConfiguration(t),this.registerDoctorSpecialtyDetectorConfiguration(t),this.registerApiClientConfiguration(t),this.registerEventManagerConfiguration(t)}registerMetadataConfiguration(t){t.set(Ys,Ys),t.set(zs,zs),t.register(Qs,Qs).addTag("MetadataProcessor"),t.register(Ws,Ws).addTag("MetadataProcessor"),t.set(zi,zi)}registerIntegrationConfiguration(t){t.register(Vs,Vs).addTag("Integration"),t.register(Ms,Ms).addTag("Integration"),t.register(Us,Us).addTag("Integration"),t.register(Zs,Zs).addTag("Integration"),t.set(gt,gt)}registerAdSetConfiguration(t){t.set(Hi,Hi),t.set(Fn,Fn)}registerAdSlotConfiguration(t){t.set(Hn,Hn),t.set(Nn,Nn),t.set(ta,ta),t.set(Ln,Ln),t.set(Cn,Cn),t.set(Dn,Dn),t.register(na,na).addTag("AdSlotConstraintValidator"),t.set(Tn,Tn),t.set(En,En),t.register(sa,sa).addTag("AdSlotContainerItemViewCreative"),t.register(ia,ia).addTag("AdSlotContainerItemViewCreative")}registerNpiDetectorConfiguration(t){t.set(ht,ht),t.register(ks,ks).addTag("NpiSource"),t.register(Ps,Ps).addTag("NpiSource")}registerDoctorSpecialtyDetectorConfiguration(t){t.set(ut,ut),t.register(Is,Is).addTag("DoctorSpecialtySource")}registerApiClientConfiguration(t){var e,n;t.register(Os,Os).addMethodCall("withOptions",[{baseUri:this.applicationContext.getApplicationConfig().apiUrl}]);const r={"X-Revops-Version":this.applicationContext.getVersion(),"X-Revops-Session-Id":this.applicationContext.getSessionId(),"X-Revops-Source-Type":2,"X-Revops-Source-Url":null!=(e=this.applicationContext.getWindow().actualUrl)?e:this.applicationContext.getWindow().location.href};var i;this.applicationContext.isDebug()&&null!=(n=this.applicationContext.getApplicationConfig().userProperties)&&n.qaIp&&(r["X-Revops-QA-Ip"]=null==(i=this.applicationContext.getApplicationConfig().userProperties)?void 0:i.qaIp);t.register("backendHttpClient",Os).addMethodCall("withOptions",[{baseUri:this.applicationContext.getApplicationConfig().apiUrl,headers:r}]),t.set(Bi,Bi)}registerEventManagerConfiguration(t){t.set(ca,ca),t.set(pa,pa),t.set(da,da),t.set(fa,fa),t.set(va,va),t.set(_a,_a),t.set(ma,ma),t.set(Sa,Sa),t.register(lt,lt).addMethodCall("addSubscriber",[new Reference(ca)]).addMethodCall("addSubscriber",[new Reference(pa)]).addMethodCall("addSubscriber",[new Reference(da)]).addMethodCall("addSubscriber",[new Reference(fa)]).addMethodCall("addSubscriber",[new Reference(va)]).addMethodCall("addSubscriber",[new Reference(_a)]).addMethodCall("addSubscriber",[new Reference(ma)]).addMethodCall("addSubscriber",[new Reference(Sa)])}}class NavigationEvent extends Event{}class Navigation{constructor(){this.events=new Map,this.initEvents()}addEventListener(t,e,n){if("navigatesuccess"!==t)throw new Error("Unsupported event type");let r=new Map;this.events.has(t)&&(r=this.events.get(t)),r.set(e,n),this.events.set(t,r)}removeEventListener(t,e,n){if(!this.events.has(t))return;const r=this.events.get(t);r&&(r.delete(e),this.events.set(t,r))}dispatchEvent(t){if(!t.type)return!1;if(!t.type||!this.events.has(t.type))return!0;for(const[e,n]of this.events.entries())if("navigatesuccess"===e)for(const[r]of n.entries())r&&r.call(this,t);return!1}initEvents(){let t=window.location.href;const e=window.setInterval((()=>{if(t===window.location.href)return;t=window.location.href;const e=new NavigationEvent("navigatesuccess",{cancelable:!0});this.dispatchEvent(e)}),100);window.addEventListener("beforeunload",(()=>{window.clearInterval(e)}))}}const Aa=t=>{var e,n;if(!t.RevopsObject)return;t.navigation||(t.navigation=new Navigation);let r={};for(const d of t[t.RevopsObject].q){const[t,e]=d;"config"===t&&"object"==typeof e&&(r=Un(r,e))}r=null!=(e=r)&&e.debug?Mi.strict().parse(r):Mi.parse(r),Object.freeze(r);const i=t.document.querySelector(`script[id="${r.scriptId}"]`);if(!i)throw new Error("Script Tag not found");let o=Un(r,{widgetInstallUrl:i.src,version:"0.606.0",apiUrl:"https://rev.trendmd.com"});o=null!=(n=o)&&n.debug?Fi.strict().parse(o):Fi.parse(o),Object.freeze(o);const s=new H(o,t),a=new Kernel(s);a.boot();const c=a.getContainer().get(at),l=a.getContainer().get(Wi);document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(null==c||c.info("cleanup queue"))})),"complete"!==t.document.readyState?t.addEventListener("load",(()=>{null==c||c.info("Run application on window load"),l.run()})):(null==c||c.info("Run application on complete"),l.run())}},1102:(t,e,n)=>{var r=n(1637),i=n(6380),o=n(7408),s=n(3997),a=n(4642);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},6491:(t,e,n)=>{var r=n(6073),i=n(3390),o=n(2461),s=n(8190),a=n(5670);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},5651:(t,e,n)=>{var r=n(2221)(n(9649),"Map");t.exports=r},2290:(t,e,n)=>{var r=n(6881),i=n(5089),o=n(7548),s=n(2151),a=n(1476);function c(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=a,t.exports=c},7649:(t,e,n)=>{var r=n(6491),i=n(8023),o=n(9611),s=n(6138),a=n(6961),c=n(2631);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=s,l.prototype.has=a,l.prototype.set=c,t.exports=l},997:(t,e,n)=>{var r=n(9649).Symbol;t.exports=r},7830:(t,e,n)=>{var r=n(9649).Uint8Array;t.exports=r},4175:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},7296:(t,e,n)=>{var r=n(4830),i=n(7987),o=n(9546),s=n(758),a=n(5824),c=n(5739),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),d=!n&&i(t),u=!n&&!d&&s(t),p=!n&&!d&&!u&&c(t),h=n||d||u||p,f=h?r(t.length,String):[],g=f.length;for(var v in t)!e&&!l.call(t,v)||h&&("length"==v||u&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,g))||f.push(v);return f}},8511:(t,e,n)=>{var r=n(2618),i=n(7689);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},8902:(t,e,n)=>{var r=n(2618),i=n(7689),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];o.call(t,e)&&i(s,n)&&(void 0!==n||e in t)||r(t,e,n)}},8627:(t,e,n)=>{var r=n(7689);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},2618:(t,e,n)=>{var r=n(26);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},9395:(t,e,n)=>{var r=n(2289),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},1453:(t,e,n)=>{var r=n(5517)();t.exports=r},8247:(t,e,n)=>{var r=n(997),i=n(7386),o=n(4591),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):o(t)}},621:(t,e,n)=>{var r=n(8247),i=n(7734);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},291:(t,e,n)=>{var r=n(3331),i=n(7114),o=n(2289),s=n(7606),a=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,d=c.toString,u=l.hasOwnProperty,p=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?p:a).test(s(t))}},9278:(t,e,n)=>{var r=n(8247),i=n(459),o=n(7734),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!s[r(t)]}},6827:(t,e,n)=>{var r=n(2289),i=n(6358),o=n(4040),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},663:(t,e,n)=>{var r=n(7649),i=n(8511),o=n(1453),s=n(7480),a=n(2289),c=n(4399),l=n(434);t.exports=function t(e,n,d,u,p){e!==n&&o(n,(function(o,c){if(p||(p=new r),a(o))s(e,n,c,d,t,u,p);else{var h=u?u(l(e,c),o,c+"",e,n,p):void 0;void 0===h&&(h=o),i(e,c,h)}}),c)}},7480:(t,e,n)=>{var r=n(8511),i=n(4751),o=n(9687),s=n(8571),a=n(1685),c=n(7987),l=n(9546),d=n(71),u=n(758),p=n(3331),h=n(2289),f=n(5128),g=n(5739),v=n(434),y=n(7602);t.exports=function(t,e,n,m,b,_,w){var S=v(t,n),A=v(e,n),E=w.get(A);if(E)r(t,n,E);else{var R=_?_(S,A,n+"",t,e,w):void 0,O=void 0===R;if(O){var T=l(A),I=!T&&u(A),C=!T&&!I&&g(A);R=A,T||I||C?l(S)?R=S:d(S)?R=s(S):I?(O=!1,R=i(A,!0)):C?(O=!1,R=o(A,!0)):R=[]:f(A)||c(A)?(R=S,c(S)?R=y(S):h(S)&&!p(S)||(R=a(A))):O=!1}O&&(w.set(A,R),b(R,A,m,_,w),w.delete(A)),r(t,n,R)}}},6359:(t,e,n)=>{var r=n(9568),i=n(8296),o=n(6660);t.exports=function(t,e){return o(i(t,e,r),t+"")}},2956:(t,e,n)=>{var r=n(1914),i=n(26),o=n(9568),s=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=s},4830:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},9199:t=>{t.exports=function(t){return function(e){return t(e)}}},6477:(t,e,n)=>{var r=n(7830);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},4751:(t,e,n)=>{t=n.nmd(t);var r=n(9649),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}},9687:(t,e,n)=>{var r=n(6477);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},8571:t=>{t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},322:(t,e,n)=>{var r=n(8902),i=n(2618);t.exports=function(t,e,n,o){var s=!n;n||(n={});for(var a=-1,c=e.length;++a<c;){var l=e[a],d=o?o(n[l],t[l],l,n,t):void 0;void 0===d&&(d=t[l]),s?i(n,l,d):r(n,l,d)}return n}},8976:(t,e,n)=>{var r=n(9649)["__core-js_shared__"];t.exports=r},6921:(t,e,n)=>{var r=n(6359),i=n(1599);t.exports=function(t){return r((function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++r<o;){var c=n[r];c&&t(e,c,r,s)}return e}))}},5517:t=>{t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var c=s[t?a:++i];if(!1===n(o[c],c,o))break}return e}}},26:(t,e,n)=>{var r=n(2221),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},6954:t=>{var e="object"==typeof global&&global&&global.Object===Object&&global;t.exports=e},5502:(t,e,n)=>{var r=n(9983);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},2221:(t,e,n)=>{var r=n(291),i=n(5779);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},5506:(t,e,n)=>{var r=n(8892)(Object.getPrototypeOf,Object);t.exports=r},7386:(t,e,n)=>{var r=n(997),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(c){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}},5779:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},1637:(t,e,n)=>{var r=n(5586);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},6380:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},7408:(t,e,n)=>{var r=n(5586),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},3997:(t,e,n)=>{var r=n(5586),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},4642:(t,e,n)=>{var r=n(5586);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},1685:(t,e,n)=>{var r=n(9395),i=n(5506),o=n(6358);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},5824:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=n??9007199254740991)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},1599:(t,e,n)=>{var r=n(7689),i=n(6387),o=n(5824),s=n(2289);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&o(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},9983:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},7114:(t,e,n)=>{var r,i=n(8976),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},6358:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},6073:t=>{t.exports=function(){this.__data__=[],this.size=0}},3390:(t,e,n)=>{var r=n(8627),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},2461:(t,e,n)=>{var r=n(8627);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},8190:(t,e,n)=>{var r=n(8627);t.exports=function(t){return r(this.__data__,t)>-1}},5670:(t,e,n)=>{var r=n(8627);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},6881:(t,e,n)=>{var r=n(1102),i=n(6491),o=n(5651);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},5089:(t,e,n)=>{var r=n(5502);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},7548:(t,e,n)=>{var r=n(5502);t.exports=function(t){return r(this,t).get(t)}},2151:(t,e,n)=>{var r=n(5502);t.exports=function(t){return r(this,t).has(t)}},1476:(t,e,n)=>{var r=n(5502);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},5586:(t,e,n)=>{var r=n(2221)(Object,"create");t.exports=r},4040:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},9214:(t,e,n)=>{t=n.nmd(t);var r=n(6954),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i&&r.process,a=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=a},4591:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},8892:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},8296:(t,e,n)=>{var r=n(4175),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=i(o.length-e,0),c=Array(a);++s<a;)c[s]=o[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=o[s];return l[e]=n(c),r(t,this,l)}}},9649:(t,e,n)=>{var r=n(6954),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},434:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},6660:(t,e,n)=>{var r=n(2956),i=n(2249)(r);t.exports=i},2249:t=>{var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},8023:(t,e,n)=>{var r=n(6491);t.exports=function(){this.__data__=new r,this.size=0}},9611:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},6138:t=>{t.exports=function(t){return this.__data__.get(t)}},6961:t=>{t.exports=function(t){return this.__data__.has(t)}},2631:(t,e,n)=>{var r=n(6491),i=n(5651),o=n(2290);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}},7606:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(n){}try{return t+""}catch(n){}}return""}},1914:t=>{t.exports=function(t){return function(){return t}}},7689:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},9568:t=>{t.exports=function(t){return t}},7987:(t,e,n)=>{var r=n(621),i=n(7734),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=c},9546:t=>{var e=Array.isArray;t.exports=e},6387:(t,e,n)=>{var r=n(3331),i=n(459);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},71:(t,e,n)=>{var r=n(6387),i=n(7734);t.exports=function(t){return i(t)&&r(t)}},758:(t,e,n)=>{t=n.nmd(t);var r=n(9649),i=n(8854),o=e&&!e.nodeType&&e,s=o&&t&&!t.nodeType&&t,a=s&&s.exports===o?r.Buffer:void 0,c=(a?a.isBuffer:void 0)||i;t.exports=c},3331:(t,e,n)=>{var r=n(8247),i=n(2289);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},459:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},2289:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7734:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},5128:(t,e,n)=>{var r=n(8247),i=n(5506),o=n(7734),s=Function.prototype,a=Object.prototype,c=s.toString,l=a.hasOwnProperty,d=c.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d}},5739:(t,e,n)=>{var r=n(9278),i=n(9199),o=n(9214),s=o&&o.isTypedArray,a=s?i(s):r;t.exports=a},4399:(t,e,n)=>{var r=n(7296),i=n(6827),o=n(6387);t.exports=function(t){return o(t)?r(t,!0):i(t)}},9488:(t,e,n)=>{var r=n(663),i=n(6921)((function(t,e,n){r(t,e,n)}));t.exports=i},8854:t=>{t.exports=function(){return!1}},7602:(t,e,n)=>{var r=n(322),i=n(4399);t.exports=function(t){return r(t,i(t))}},2775:()=>{var t;!function(t){!function(e){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(t);function i(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===n.Reflect?n.Reflect=t:r=i(n.Reflect,r),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,c={create:o?function(){return rt(Object.create(null))}:s?function(){return rt({__proto__:null})}:function(){return rt({})},has:a?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:a?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},l=Object.getPrototypeOf(Function),d="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,u=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?tt():Map,p=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?et():Set,h=new(d||"function"!=typeof WeakMap?nt():WeakMap);function f(t,e,n,r){if(D(n)){if(!$(t))throw new TypeError;if(!q(e))throw new TypeError;return E(t,e)}if(!$(t))throw new TypeError;if(!M(e))throw new TypeError;if(!M(r)&&!D(r)&&!Z(r))throw new TypeError;return Z(r)&&(r=void 0),R(t,e,n=H(n),r)}function g(t,e){function n(n,r){if(!M(n))throw new TypeError;if(!D(r)&&!W(r))throw new TypeError;N(t,e,n,r)}return n}function v(t,e,n,r){if(!M(n))throw new TypeError;return D(r)||(r=H(r)),N(t,e,n,r)}function y(t,e,n){if(!M(e))throw new TypeError;return D(n)||(n=H(n)),T(t,e,n)}function m(t,e,n){if(!M(e))throw new TypeError;return D(n)||(n=H(n)),I(t,e,n)}function b(t,e,n){if(!M(e))throw new TypeError;return D(n)||(n=H(n)),C(t,e,n)}function _(t,e,n){if(!M(e))throw new TypeError;return D(n)||(n=H(n)),x(t,e,n)}function w(t,e){if(!M(t))throw new TypeError;return D(e)||(e=H(e)),P(t,e)}function S(t,e){if(!M(t))throw new TypeError;return D(e)||(e=H(e)),j(t,e)}function A(t,e,n){if(!M(e))throw new TypeError;D(n)||(n=H(n));var r=O(e,n,!1);if(D(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=h.get(e);return i.delete(n),i.size>0||h.delete(e),!0}function E(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!D(r)&&!Z(r)){if(!q(r))throw new TypeError;e=r}}return e}function R(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=(0,t[i])(e,n,r);if(!D(o)&&!Z(o)){if(!M(o))throw new TypeError;r=o}}return r}function O(t,e,n){var r=h.get(t);if(D(r)){if(!n)return;r=new u,h.set(t,r)}var i=r.get(e);if(D(i)){if(!n)return;i=new u,r.set(e,i)}return i}function T(t,e,n){if(I(t,e,n))return!0;var r=J(e);return!Z(r)&&T(t,r,n)}function I(t,e,n){var r=O(e,n,!1);return!D(r)&&B(r.has(t))}function C(t,e,n){if(I(t,e,n))return x(t,e,n);var r=J(e);return Z(r)?void 0:C(t,r,n)}function x(t,e,n){var r=O(e,n,!1);if(!D(r))return r.get(t)}function N(t,e,n,r){O(n,r,!0).set(t,e)}function P(t,e){var n=j(t,e),r=J(t);if(null===r)return n;var i=P(r,e);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new p,s=[],a=0,c=n;a<c.length;a++){var l=c[a];o.has(l)||(o.add(l),s.push(l))}for(var d=0,u=i;d<u.length;d++){l=u[d];o.has(l)||(o.add(l),s.push(l))}return s}function j(t,e){var n=[],r=O(t,e,!1);if(D(r))return n;for(var i=K(r.keys()),o=0;;){var s=X(i);if(!s)return n.length=o,n;var a=Y(s);try{n[o]=a}catch(c){try{Q(i)}finally{throw c}}o++}}function k(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function D(t){return void 0===t}function Z(t){return null===t}function L(t){return"symbol"==typeof t}function M(t){return"object"==typeof t?null!==t:"function"==typeof t}function F(t,e){switch(k(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",i=G(t,r);if(void 0!==i){var o=i.call(t,n);if(M(o))throw new TypeError;return o}return U(t,"default"===n?"number":n)}function U(t,e){if("string"===e){var n=t.toString;if(z(n))if(!M(i=n.call(t)))return i;if(z(r=t.valueOf))if(!M(i=r.call(t)))return i}else{var r;if(z(r=t.valueOf))if(!M(i=r.call(t)))return i;var i,o=t.toString;if(z(o))if(!M(i=o.call(t)))return i}throw new TypeError}function B(t){return!!t}function V(t){return""+t}function H(t){var e=F(t,3);return L(e)?e:V(e)}function $(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function z(t){return"function"==typeof t}function q(t){return"function"==typeof t}function W(t){switch(k(t)){case 3:case 4:return!0;default:return!1}}function G(t,e){var n=t[e];if(null!=n){if(!z(n))throw new TypeError;return n}}function K(t){var e=G(t,i);if(!z(e))throw new TypeError;var n=e.call(t);if(!M(n))throw new TypeError;return n}function Y(t){return t.value}function X(t){var e=t.next();return!e.done&&e}function Q(t){var e=t.return;e&&e.call(t)}function J(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===l)return e;if(e!==l)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!=typeof i||i===t?e:i}function tt(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function o(t,e){return e}function s(t,e){return[t,e]}}function et(){return function(){function t(){this._map=new u}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}()}function nt(){var t=16,n=c.create(),r=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=o(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=o(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){return o(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=o(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var t;do{t="@@WeakMap@@"+l()}while(c.has(n,t));return n[t]=!0,t}function o(t,n){if(!e.call(t,r)){if(!n)return;Object.defineProperty(t,r,{value:c.create()})}return t[r]}function s(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t)}function l(){var e=a(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<t;++r){var i=e[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function rt(t){return t.__=void 0,delete t.__,t}t("decorate",f),t("metadata",g),t("defineMetadata",v),t("hasMetadata",y),t("hasOwnMetadata",m),t("getMetadata",b),t("getOwnMetadata",_),t("getMetadataKeys",w),t("getOwnMetadataKeys",S),t("deleteMetadata",A)}(r)}()}(t||(t={}))}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r](o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),((t,e,r,i,o,s,a,c,l,d,u)=>{const p=null!=(i=null!=(o=r.Reflect)?o:e.Reflect)?i:t.Reflect;e.Reflect=void 0,r.Reflect=void 0,t.Reflect=void 0,n(2775),t.Reflect=null!=(s=null!=(a=t.Reflect)?a:r.Reflect)?s:e.Reflect,r.Reflect=null!=(c=null!=(l=r.Reflect)?l:t.Reflect)?c:e.Reflect,e.Reflect=null!=(d=null!=(u=e.Reflect)?u:t.Reflect)?d:r.Reflect,n(155).O(t),t.Reflect=p,e.Reflect=p,r.Reflect=p})(window,"undefined"!=typeof global?global:{},"undefined"!=typeof globalThis?globalThis:{})})();
//# sourceMappingURL=widget.js.map
//# debugId=4ed1abaa-e840-5b30-80c4-3cc87ca59c8b
